import{T as v}from"./TextStyle-e28da61f.js";import{_ as w,r as y,o as L,c as x,w as l,a as e,h as f,s as u,d as a,bb as p}from"./index-4503f8c1.js";import{V as d}from"./VCol-a93c4277.js";import{d as s,e as m,f as g,g as h,h as V,i as c}from"./VisualizationBuilder-5a7bfb61.js";import{V as T}from"./VContainer-0a8d6998.js";const I={props:{chartSubType:String,option:Object},data(){return{expandLabelSettings:[],expandLabelLineSettings:[],settings:{type:"pie",colorBy:"data",selectedMode:"single",selectedOffset:20,startAngle:90,minAngle:"",minShowLabelAngle:"",roseType:"",avoidLabelOverlap:!0,stillShowZeroSum:!0,left:"",right:"",top:"",bottom:"",width:"",height:"",label:{show:!0,position:"outside",distanceToLabelLine:5,formatter:"{b}：{c}  {per|{d}%}",rich:{per:{color:"#fff",backgroundColor:"#4C5058",padding:[3,4],borderRadius:4}}},labelLine:{show:!0,length:15,length2:15},labelLayout:{draggable:!0},itemStyle:{},radius:["0%","75%"],tooltip:{trigger:"item"}},other:{label:{percent:!0,number:!0}},colorBy:["data","series"],selectedMode:[!1,"single","multiple","series"],roseTypes:["radius","area"],labelPosition:["outside","inside","inner","center"],innerRadius:0,outerRadius:75}},watch:{chartSubType(){this.chartSubType==="donut"?(this.settings.radius=["40%","70%"],this.settings.avoidLabelOverlap=!1,this.settings.label={show:!1,position:"center"},this.settings.emphasis={label:{show:!0,fontSize:"12",fontWeight:"bold"}},this.settings.labelLine.show=!1,this.settings.itemStyle={borderRadius:10,borderColor:"#fff",borderWidth:2}):(this.settings.radius=["0%","70%"],this.settings.avoidLabelOverlap=!0,this.settings.label={show:!0,position:"outside",distanceToLabelLine:5},delete this.settings.emphasis,this.settings.labelLine.show=!0,this.settings.itemStyle={})}},mounted(){this.expandLabelSettings.push(0),this.expandLabelLineSettings.push(0),setTimeout(()=>{this.expandLabelSettings=[],this.expandLabelLineSettings=[]},500)},created(){if(this.chartSubType==="donut"&&(this.settings.radius=["40%","70%"],this.settings.avoidLabelOverlap=!1,this.settings.label={show:!1,position:"center"},this.settings.emphasis={label:{show:!0,fontSize:"12",fontWeight:"bold"}},this.settings.labelLine={show:!1},this.settings.itemStyle={borderRadius:10,borderColor:"#fff",borderWidth:2}),this.option.series&&this.option.series.length>0){const r=this.option.series.find(t=>t.type==="pie");for(const t in r)this.settings[t]&&(this.settings[t]=r[t])}this.innerRadius=this.settings.radius[0].toString().replace("%",""),this.outerRadius=this.settings.radius[1].toString().replace("%",""),this.updated()},methods:{labelPercent(){this.other.label.percent?this.other.label.number?this.settings.label.formatter="{b}：{c}  {per|{d}%}":this.settings.label.formatter="{b}：{d}%":this.other.label.number?this.settings.label.formatter="{b}:{c}":this.settings.label.formatter="{b}",this.updated()},labelNumber(){this.other.label.number?this.other.label.percent?this.settings.label.formatter="{b}：{c}  {per|{d}%}":this.settings.label.formatter="{b}：{c}":this.other.label.percent?this.settings.label.formatter="{b}:{per|{d}%}":this.settings.label.formatter="{b}",this.updated()},LabelTextStyle(r){for(const t in r.value)this.settings.label[t]=r.value[t];this.updated()},updated(){this.$emit("chartSettings",this.settings)},radius(r){r==="inner"&&(this.innerRadius>100&&(this.innerRadius=100),this.innerRadius<0&&(this.innerRadius=0),this.settings.radius=[this.innerRadius+"%",this.outerRadius+"%"]),r==="outer"&&(this.outerRadius>100&&(this.outerRadius=100),this.outerRadius<0&&(this.outerRadius=0),this.settings.radius=[this.innerRadius+"%",this.outerRadius+"%"]),this.updated()}},components:{TextStyle:v}};function C(r,t,b,R,o,i){const S=y("TextStyle");return L(),x(T,{"grid-list-xs":""},{default:l(()=>[e(f,null,{default:l(()=>[e(d,{cols:"6"},{default:l(()=>[e(u,{disabled:b.option.series&&b.option.series.length>0,type:"number",min:"0",max:"100",modelValue:o.innerRadius,"onUpdate:modelValue":t[0]||(t[0]=n=>o.innerRadius=n),label:"Inner Radius",onInput:t[1]||(t[1]=n=>i.radius("inner")),"append-icon":"mdi-percent"},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Inner Radius of Pie chart")]),_:1})]),_:1},8,["disabled","modelValue"])]),_:1}),e(d,{cols:"6"},{default:l(()=>[e(u,{disabled:b.option.series&&b.option.series.length>0,type:"number",min:"0",max:"100",modelValue:o.outerRadius,"onUpdate:modelValue":t[2]||(t[2]=n=>o.outerRadius=n),label:"Outer Radius",onInput:t[3]||(t[3]=n=>i.radius("outer")),"append-icon":"mdi-percent"},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Outer Radius of Pie chart")]),_:1})]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1}),e(p,{items:o.colorBy,modelValue:o.settings.colorBy,"onUpdate:modelValue":t[4]||(t[4]=n=>o.settings.colorBy=n),label:"Color By",onChange:i.updated},null,8,["items","modelValue","onChange"]),e(p,{items:o.selectedMode,modelValue:o.settings.selectedMode,"onUpdate:modelValue":t[5]||(t[5]=n=>o.settings.selectedMode=n),label:"Sector Selection Mode",onChange:i.updated},null,8,["items","modelValue","onChange"]),e(u,{modelValue:o.settings.selectedOffset,"onUpdate:modelValue":t[6]||(t[6]=n=>o.settings.selectedOffset=n),type:"number",label:"Offset Of Selected Sector",min:"-200",max:"200",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("The offset distance of selected sector.")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.startAngle,"onUpdate:modelValue":t[7]||(t[7]=n=>o.settings.startAngle=n),type:"number",label:"Start angle, ragenges [0, 360]",min:"0",max:"360",onInput:i.updated},null,8,["modelValue","onInput"]),e(u,{modelValue:o.settings.minAngle,"onUpdate:modelValue":t[8]||(t[8]=n=>o.settings.minAngle=n),type:"number",label:"Minimum Angle of Sector",min:"0",max:"360",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("The minimum angle of sector (0 ~ 360). It prevents some sector from being too small when value is small, which will affect user interaction")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.minShowLabelAngle,"onUpdate:modelValue":t[9]||(t[9]=n=>o.settings.minShowLabelAngle=n),type:"number",label:"Minimum Angle To Show Label",min:"0",max:"360",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("If a sector is less than this angle (0 ~ 360), label and labelLine will not be displayed")]),_:1})]),_:1},8,["modelValue","onInput"]),e(p,{items:o.roseTypes,modelValue:o.settings.roseType,"onUpdate:modelValue":t[10]||(t[10]=n=>o.settings.roseType=n),label:"Rose Type",onChange:i.updated,clearable:""},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Whether to show as Nightingale chart, which distinguishes data through radius")]),_:1})]),_:1},8,["items","modelValue","onChange"]),e(m,{color:"blue",label:"Avoid Label Overlap",modelValue:o.settings.avoidLabelOverlap,"onUpdate:modelValue":t[11]||(t[11]=n=>o.settings.avoidLabelOverlap=n),onChange:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Whether to enable the strategy to avoid labels overlap. Defaults to be enabled, which will move the label positions in the case of labels overlapping")]),_:1})]),_:1},8,["modelValue","onChange"]),e(m,{color:"blue",label:"Show Zero Sum",modelValue:o.settings.stillShowZeroSum,"onUpdate:modelValue":t[12]||(t[12]=n=>o.settings.stillShowZeroSum=n),onChange:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Whether to show sector when all data are zero.")]),_:1})]),_:1},8,["modelValue","onChange"]),e(u,{modelValue:o.settings.left,"onUpdate:modelValue":t[13]||(t[13]=n=>o.settings.left=n),type:"number",label:"Move from left by",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Distance between pie chart component and the left side of the container")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.right,"onUpdate:modelValue":t[14]||(t[14]=n=>o.settings.right=n),type:"number",label:"Move from right by",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Distance between pie chart component and the right side of the container")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.top,"onUpdate:modelValue":t[15]||(t[15]=n=>o.settings.top=n),type:"number",label:"Move from top by",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Distance between pie chart component and the top side of the container")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.bottom,"onUpdate:modelValue":t[16]||(t[16]=n=>o.settings.bottom=n),type:"number",label:"Move from bottom by",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Distance between pie chart component and the bottom side of the container")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.width,"onUpdate:modelValue":t[17]||(t[17]=n=>o.settings.width=n),type:"number",label:"Width of pie component",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Width of pie chart component. Adaptive by default.")]),_:1})]),_:1},8,["modelValue","onInput"]),e(u,{modelValue:o.settings.height,"onUpdate:modelValue":t[18]||(t[18]=n=>o.settings.height=n),type:"number",label:"Height of pie component",min:"-1000",max:"1000",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Height of pie chart component. Adaptive by default.e")]),_:1})]),_:1},8,["modelValue","onInput"]),e(g,{multiple:"",focusable:"",modelValue:o.expandLabelSettings,"onUpdate:modelValue":t[24]||(t[24]=n=>o.expandLabelSettings=n)},{default:l(()=>[e(h,null,{default:l(()=>[e(V,null,{default:l(()=>[a("Labels")]),_:1}),e(c,null,{default:l(()=>[e(f,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(m,{color:"blue",label:"Show/Hide",modelValue:o.settings.label.show,"onUpdate:modelValue":t[19]||(t[19]=n=>o.settings.label.show=n),onChange:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Show or Hide labels")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(m,{color:"blue",label:"Show Percent",modelValue:o.other.label.percent,"onUpdate:modelValue":t[20]||(t[20]=n=>o.other.label.percent=n),onChange:i.labelPercent},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Show Percent")]),_:1})]),_:1},8,["modelValue","onChange"]),e(m,{color:"blue",label:"Show Number",modelValue:o.other.label.number,"onUpdate:modelValue":t[21]||(t[21]=n=>o.other.label.number=n),onChange:i.labelNumber},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Show Number")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(p,{items:o.labelPosition,modelValue:o.settings.label.position,"onUpdate:modelValue":t[22]||(t[22]=n=>o.settings.label.position=n),label:"Position of label",onChange:i.updated},null,8,["items","modelValue","onChange"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(u,{modelValue:o.settings.label.distanceToLabelLine,"onUpdate:modelValue":t[23]||(t[23]=n=>o.settings.label.distanceToLabelLine=n),type:"number",label:"Distance between label line and text",min:"0",max:"100",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Distance between label line and text")]),_:1})]),_:1},8,["modelValue","onInput"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(S,{onTextStyle:i.LabelTextStyle,values:o.settings.label},null,8,["onTextStyle","values"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Settings about labels of a pie sectors")]),_:1})]),_:1},8,["modelValue"]),e(g,{multiple:"",focusable:"",modelValue:o.expandLabelLineSettings,"onUpdate:modelValue":t[28]||(t[28]=n=>o.expandLabelLineSettings=n)},{default:l(()=>[e(h,null,{default:l(()=>[e(V,null,{default:l(()=>[a("Labels Lines")]),_:1}),e(c,null,{default:l(()=>[e(f,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(m,{color:"blue",label:"Show/Hide",modelValue:o.settings.labelLine.show,"onUpdate:modelValue":t[25]||(t[25]=n=>o.settings.labelLine.show=n),onChange:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Show or Hide label line")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(u,{modelValue:o.settings.labelLine.length,"onUpdate:modelValue":t[26]||(t[26]=n=>o.settings.labelLine.length=n),type:"number",label:"Length of first segment",min:"0",max:"100",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("The length of the first segment of guide line")]),_:1})]),_:1},8,["modelValue","onInput"])]),_:1}),e(d,{cols:"12"},{default:l(()=>[e(u,{modelValue:o.settings.labelLine.length2,"onUpdate:modelValue":t[27]||(t[27]=n=>o.settings.labelLine.length2=n),type:"number",label:"Length of second segment",min:"0",max:"100",onInput:i.updated},{default:l(()=>[e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("The length of the second segment of guide line")]),_:1})]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{activator:"parent",location:"bottom"},{default:l(()=>[a("Settings about lines of labels")]),_:1})]),_:1},8,["modelValue"])]),_:1})}const M=w(I,[["render",C]]);export{M as default};
