"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[5527],{65527:function(t,e,i){i.r(e),i.d(e,{default:function(){return k}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"grid-list-xs":""}},[i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.push("/resource/view/student/"+t.queries.practitioner)}}},[i("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-eye")]),i("span",[t._v("View Student")])],1)],1)],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"500px",transition:"dialog-transition"},model:{value:t.activateDialog,callback:function(e){t.activateDialog=e},expression:"activateDialog"}},[i("v-card",[i("v-toolbar",{staticClass:"darken-1 white--text text-uppercase font-weight-bold",attrs:{color:"primary",dark:""}},[t._v(" Confirm Activation "),i("v-spacer"),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.activateDialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-card-text",[t._v(" Are you sure you want to activate "),i("b",[t._v(t._s(t.practitionername)+" ")]),i("br"),t._v(" as a family member of "),i("b",[t._v(t._s(t.currentHead.name))])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"success"},on:{click:t.activate}},[t._v("Yes, Proceed")])],1)],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"500px",transition:"dialog-transition"},model:{value:t.deactivateDialog,callback:function(e){t.deactivateDialog=e},expression:"deactivateDialog"}},[i("v-card",[i("v-toolbar",{staticClass:"darken-1 white--text text-uppercase font-weight-bold",attrs:{color:"primary",dark:""}},[t._v(" Confirm Deactivation "),i("v-spacer"),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.activateDialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-card-text",[t._v(" Are you sure you want to Deactivate "),i("b",[t._v(t._s(t.practitionername)+" ")]),i("br"),t._v(" as a family member of "),i("b",[t._v(t._s(t.currentHead.name))])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.deactivate}},[t._v("Yes, Proceed")])],1)],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"500px",transition:"dialog-transition"},model:{value:t.removeDialog,callback:function(e){t.removeDialog=e},expression:"removeDialog"}},[i("v-card",[i("v-toolbar",{staticClass:"darken-1 white--text text-uppercase font-weight-bold",attrs:{color:"primary",dark:""}},[t._v(" Confirm Remove "),i("v-spacer"),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.removeDialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-card-text",[t._v(" Are you sure you want to remove "),i("b",[t._v(t._s(t.practitionername)+" ")]),i("br"),t._v(" as a family member of "),i("b",[t._v(t._s(t.currentHead.name))])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.remove}},[t._v("Yes, Proceed")])],1)],1)],1),i("b",[t._v("Student: "+t._s(t.practitionername)+" - "+t._s(t.practitionerregnum))]),i("v-card",[i("v-card-title",[t._v(" Current Family Head Details ")]),i("v-card-text",[i("v-row",[i("v-col",[t._v(" Name: "),i("b",[t._v(t._s(t.currentHead.name))])]),i("v-col",[t._v(" Registration Number: "),i("b",[t._v(t._s(t.currentHead.regNum))])]),i("v-col",[t._v(" Active: "),i("b",[t._v(t._s(t.currentHead.status))])])],1),i("v-row",["no"===t.currentHead.statusCode?i("v-col",[i("v-btn",{attrs:{color:"success",rounded:""},on:{click:function(e){t.activateDialog=!0}}},[t._v("Activate To Family")])],1):t._e(),"yes"===t.currentHead.statusCode?i("v-col",[i("v-btn",{attrs:{color:"error",rounded:""},on:{click:function(e){t.deactivateDialog=!0}}},[t._v("Deactivate From Family")])],1):t._e(),i("v-col",[i("v-btn",{attrs:{color:"error",rounded:""},on:{click:function(e){t.removeDialog=!0}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-cancel")]),t._v(" Remove From Family ")],1)],1)],1)],1)],1)],1)},r=[],o={props:["queries"],data(){return{date:"",menu:!1,overlay:!1,activateDialog:!1,deactivateDialog:!1,removeDialog:!1,practitionername:"",practitionerregnum:"",familyHead:{},total:0,name:"",regNum:"",loading:!1,currentHead:{name:"",regNum:"",status:"",statusCode:""}}},methods:{remove(){this.overlay=!0,this.deactivateDialog=!1,fetch("/site/student/removeFamilyHead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({practitioner:this.queries.practitioner,familyHead:this.currentHead.id})}).then((t=>{200===t.status?(this.$router.push("/resource/view/student/"+this.queries.practitioner),this.$store.commit("setMessage",{type:"success",text:"Family head deactivated"})):this.$store.commit("setMessage",{type:"error",text:"Failed to deactivate family head."})})).catch((()=>{this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed to deactivate family head."})}))},deactivate(){this.overlay=!0,this.deactivateDialog=!1,fetch("/site/student/deactivateFamilyHead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({practitioner:this.queries.practitioner,familyHead:this.currentHead.id})}).then((t=>{200===t.status?(this.getFamilyHead(),this.$store.commit("setMessage",{type:"success",text:"Family head deactivated"})):(this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed to deactivate family head."}))})).catch((()=>{this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed to deactivate family head."})}))},activate(){this.overlay=!0,this.activateDialog=!1,fetch("/site/student/activateFamilyHead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({practitioner:this.queries.practitioner,familyHead:this.currentHead.id})}).then((t=>{200===t.status?(this.getFamilyHead(),this.$store.commit("setMessage",{type:"success",text:"Family head activated"})):(this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed to activate family head."}))})).catch((()=>{this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed to activate family head."})}))},getFamilyHead(){this.overlay=!0,fetch("/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/itsf-family-head-profile&practitioner=Practitioner/"+this.queries.practitioner).then((t=>{t.json().then((t=>{if(this.overlay=!1,t&&t.entry&&t.entry.length>0){let e=t.entry[0].resource;this.currentHead.id=e.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/family-head"===t.url)).valueReference.reference,this.currentHead.name=e.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/full-name"===t.url)).valueString,this.currentHead.regNum=e.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/registration-number"===t.url))?.valueString,this.currentHead.status=e.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/active"===t.url)).valueCoding.display,this.currentHead.statusCode=e.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/active"===t.url)).valueCoding.code}}))}))}},created(){this.getFamilyHead(),fetch("/fhir/Practitioner/"+this.queries.practitioner).then((t=>{t.json().then((t=>{this.practitionername="",this.practitionerregnum=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/registration-number"===t.url))?.valueString;let e=t.name.find((t=>{t.use}));!e&&t.name&&t.name.length>0&&(e=t.name[0]),e&&(e.given&&(this.practitionername&&(this.practitionername+=" "),this.practitionername+=e.given.join(" ")),e.family&&(this.practitionername&&(this.practitionername+=" "),this.practitionername+=e.family))}))}))}},s=o,n=i(43736),c=i(43453),l=i.n(c),v=i(63150),d=i(32371),u=i(37118),m=i(82102),h=i(4228),p=i(4497),f=i(96428),y=i(16816),g=i(97620),_=i(65132),b=i(51058),x=i(90624),D=i(62877),H=i(99762),C=i(36656),w=(0,n.Z)(s,a,r,!1,null,null,null),k=w.exports;l()(w,{VBtn:v.Z,VCard:d.Z,VCardActions:u.h7,VCardText:u.ZB,VCardTitle:u.EB,VCol:m.Z,VContainer:h.Z,VDialog:p.Z,VIcon:f.Z,VList:y.Z,VListItem:g.Z,VNavigationDrawer:_.Z,VOverlay:b.Z,VProgressCircular:x.Z,VRow:D.Z,VSpacer:H.Z,VToolbar:C.Z})}}]);
//# sourceMappingURL=5527.9740f8b0.js.map