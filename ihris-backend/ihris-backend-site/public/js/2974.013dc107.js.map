{"version":3,"file":"js/2974.013dc107.js","mappings":"2KAUA,GAAeA,EAAAA,EAAAA,GACbC,EAAAA,GAEAC,OAAO,CACPC,KAAM,cAENC,MAAO,CACLC,MAAOC,SAGTC,OAAQC,GACN,OAAOA,EAAE,MAAO,CACdC,YAAa,cACbC,MAAO,CACL,qBAAsBC,KAAKN,SACxBM,KAAKC,cAEVC,MAAOF,KAAKG,OACZC,GAAIJ,KAAKK,YACRL,KAAKM,OAAOC,a,mEC7BnB,IAAIX,EAAS,WAAa,IAAIY,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACb,YAAY,QAAQ,CAACa,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIK,GAAG,2CAA2CF,EAAG,aAAa,GAAGA,EAAG,eAAe,CAACA,EAAG,WAAW,CAACb,YAAY,OAAOI,MAAM,CAAC,MAAQM,EAAIM,OAAO,MAAQ,0BAA0B,SAAW,GAAG,MAAQ,GAAG,eAAe,GAAG,UAAY,IAAIV,GAAG,CAAC,OAAS,SAASW,GAAQ,OAAOP,EAAIQ,cAAc,cAAc,SAASD,GAAQ,OAAOP,EAAIS,YAAY,mBAAmBC,MAAM,CAACC,MAAOX,EAAIY,OAAoB,cAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,OAAQ,gBAAiBE,IAAME,WAAW,0BAA0Bb,EAAG,WAAW,CAACb,YAAY,OAAOI,MAAM,CAAC,MAAQM,EAAIM,OAAO,MAAQ,yBAAyB,SAAW,GAAG,MAAQ,GAAG,eAAe,GAAG,UAAY,IAAIV,GAAG,CAAC,OAAS,SAASW,GAAQ,OAAOP,EAAIQ,cAAc,cAAc,SAASD,GAAQ,OAAOP,EAAIS,YAAY,kBAAkBC,MAAM,CAACC,MAAOX,EAAIY,OAAmB,aAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,OAAQ,eAAgBE,IAAME,WAAW,yBAAyBb,EAAG,eAAe,CAACb,YAAY,OAAOI,MAAM,CAAC,MAAQ,OAAO,MAAQ,GAAG,SAAW,GAAG,eAAe,GAAG,UAAY,IAAIE,GAAG,CAAC,OAAS,SAASW,GAAQ,OAAOP,EAAIQ,cAAc,cAAc,SAASD,GAAQ,OAAOP,EAAIS,YAAY,UAAUC,MAAM,CAACC,MAAOX,EAAIY,OAAW,KAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,OAAQ,OAAQE,IAAME,WAAW,kBAAkB,GAAIhB,EAAiB,cAAEG,EAAG,kBAAkB,CAACb,YAAY,qBAAqB,CAACU,EAAIK,GAAGL,EAAIiB,GAAGjB,EAAIkB,kBAAkBlB,EAAImB,KAAKhB,EAAG,cAAc,CAACA,EAAG,eAAe,CAACb,YAAY,cAAc8B,YAAY,CAAC,OAAS,WAAW1B,MAAM,CAAC,QAAUM,EAAIqB,QAAQ,MAAQrB,EAAIsB,QAAQ,WAAW,KAAK,QAAUtB,EAAIuB,QAAQ,sBAAsBvB,EAAIwB,MAAM,eAAe,CAAE,sBAAsBxB,EAAIyB,GAAG,iCAAkC,yBAA0B,CAAC,EAAE,GAAG,GAAG,KAAM,QAAUzB,EAAI0B,SAAS9B,GAAG,CAAC,iBAAiB,SAASW,GAAQP,EAAIuB,QAAQhB,GAAQ,YAAYP,EAAI2B,SAASC,YAAY5B,EAAI6B,GAAG,CAAC,CAACC,IAAI,qBAAqBC,GAAG,SAASC,GACtiE,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAC9B,EAAG,SAAS,CAACT,MAAM,CAAC,MAAQM,EAAIkC,SAASD,EAAKE,eAAe,KAAO,KAAK,CAACnC,EAAIK,GAAG,IAAIL,EAAIiB,GAAGgB,EAAKE,eAAe,UAAU,CAACL,IAAI,oBAAoBC,GAAG,SAASC,GACvK,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAC9B,EAAG,SAAS,CAACT,MAAM,CAAC,MAAQM,EAAIkC,SAASD,EAAKG,cAAc,KAAO,KAAK,CAACpC,EAAIK,GAAG,IAAIL,EAAIiB,GAAGgB,EAAKG,cAAc,eAAe,IAAI,IAAI,IACzIC,EAAkB,GCqEtB,GACAC,KAAAA,WACA,OACA1B,OAAAA,CACA5B,KAAAA,GACAuD,aAAAA,GACAC,cAAAA,IAEAC,MAAAA,GACAC,MAAAA,GACArB,QAAAA,CAAAA,CACAsB,KAAAA,OACAhC,MAAAA,QACA,CACAgC,KAAAA,gBACAhC,MAAAA,aACA,CACAgC,KAAAA,SACAhC,MAAAA,UACA,CACAgC,KAAAA,cACAhC,MAAAA,eACA,CACAgC,KAAAA,QACAhC,MAAAA,SACA,CACAgC,KAAAA,mBACAhC,MAAAA,iBACA,CACAgC,KAAAA,kBACAhC,MAAAA,iBAEAL,OAAAA,CAAAA,CACAqC,KAAAA,UACAhC,MAAAA,WACA,CACAgC,KAAAA,WACAhC,MAAAA,YACA,CACAgC,KAAAA,SACAhC,MAAAA,WAEAW,QAAAA,GACAC,QAAAA,CAAAqB,aAAAA,IACAlB,SAAAA,EACAF,MAAAA,EACAqB,UAAAA,EACAC,KAAAA,GACA5B,cAAAA,KACA6B,aAAAA,CAAAC,OAAAA,EAAAC,SAAAA,KAGAC,MAAAA,CACA3B,QAAAA,CACA4B,UACA,gBAEAC,MAAAA,IAGAC,QAAAA,WACA,kBAEAC,QAAAA,CACA7C,YAAAA,SAAAA,GACA,kBACA,mBAEAkB,QAAAA,SAAAA,GACA,wEAEA4B,cACA,wCACA,wCACA,mBAAAP,OAAAA,EAAAC,SAAAA,KAGA,mBACA,cACA,mBACA,qCAEA,4BACA,6DAEA,2BACA,2DAEA,kBAEAf,SAAAA,GACA,oBACA,UACA,eACA,QACA,eACA,UAEA,QAEAsB,QAAAA,GAEA,gBAGA,OAFA,gCACA,wDAGA,gBACA,wBACA,SACA,gCAoBA,GAnBA,yBACA,sBACA,oCACAC,EAAAA,KAAAA,KAAAA,MAAAA,GAAAA,aAAAA,EAAAA,WAAAA,IACA,sCACAA,EAAAA,KAAAA,KAAAA,MAAAA,GAAAA,SAAAA,EAAAA,WAAAA,KAIAA,EAAAA,EAAAA,QAAAA,SAAAA,8CACAA,EAAAA,EAAAA,UAAAA,EAAAA,QAAAA,+CAEA,uCACAA,GAAAA,yBAEA,mCACAA,GAAAA,qBAGA,QACA,SACA,iCACA,IACAC,GAAAA,KAEA,2BACAA,GAAAA,KAEAA,GAAAA,KAAAA,QAAAA,OAAAA,GAEAD,EACA,oDACAE,EACA,wHACA,aAEA,8BACA,eACA,6BACA,yBACAF,GAAAA,IAAAA,EAAAA,IAAAA,KAAAA,MAAAA,GAAAA,KAAAA,MAEA,gBACAA,GAAAA,IAAAA,EAAAA,IAAAA,KAAAA,MAAAA,IAIA,gCACAG,QAAAA,IAAAA,WAAAA,GACAC,MAAAA,GAAAA,MAAAA,IACAC,EAAAA,OAAAA,MAAAA,UACA,gBACA,YACA,iBACA,qBAEA,mBACA,gBACA,qBACAC,OAAAC,IACA,gBACA,6CACA,kBACAJ,QAAAA,IAAAA,SAEAG,OAAAC,IACA,gBACA,6CACA,kBACAJ,QAAAA,IAAAA,SC9P2T,I,sHCQvTK,GAAY,OACd,EACA7E,EACAiD,GACA,EACA,KACA,KACA,MAIF,EAAe4B,EAAiB,QAchC,IAAkBA,EAAW,CAACC,MAAK,kBAAc,eAAU,gBAAW,WAAM,eAAW,eAAW,YAAQ,YAAQ,eAAW","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/site/itsf/process_new_registration.vue?ab24","webpack://iHRIS-v5/src/site/itsf/process_new_registration.vue","webpack://iHRIS-v5/./src/site/itsf/process_new_registration.vue?46d9","webpack://iHRIS-v5/./src/site/itsf/process_new_registration.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"py-5\"},[_c('v-card',[_c('v-card-title',[_vm._v(\" Pending New Registration Applications \"),_c('v-spacer')],1),_c('v-card-title',[_c('v-select',{staticClass:\"ma-2\",attrs:{\"items\":_vm.status,\"label\":\"Finance Director Status\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('financestatus')}},model:{value:(_vm.search.financestatus),callback:function ($$v) {_vm.$set(_vm.search, \"financestatus\", $$v)},expression:\"search.financestatus\"}}),_c('v-select',{staticClass:\"ma-2\",attrs:{\"items\":_vm.status,\"label\":\"Taalim Director Status\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('taalimstatus')}},model:{value:(_vm.search.taalimstatus),callback:function ($$v) {_vm.$set(_vm.search, \"taalimstatus\", $$v)},expression:\"search.taalimstatus\"}}),_c('v-text-field',{staticClass:\"ma-2\",attrs:{\"label\":\"Name\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('name')}},model:{value:(_vm.search.name),callback:function ($$v) {_vm.$set(_vm.search, \"name\", $$v)},expression:\"search.name\"}})],1),(_vm.error_message)?_c('v-card-subtitle',{staticClass:\"white--text error\"},[_vm._v(_vm._s(_vm.error_message))]):_vm._e(),_c('v-card-text',[_c('v-data-table',{staticClass:\"elevation-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"headers\":_vm.headers,\"items\":_vm.results,\"item-key\":\"id\",\"options\":_vm.options,\"server-items-length\":_vm.total,\"footer-props\":{ 'items-per-page-text':_vm.$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] },\"loading\":_vm.loading},on:{\"update:options\":function($event){_vm.options=$event},\"click:row\":_vm.clickIt},scopedSlots:_vm._u([{key:\"item.financeStatus\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{attrs:{\"color\":_vm.getColor(item.financeStatus),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(item.financeStatus)+\" \")])]}},{key:\"item.taalimStatus\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{attrs:{\"color\":_vm.getColor(item.taalimStatus),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(item.taalimStatus)+\" \")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"py-5\">\n    <v-card>\n      <v-card-title>\n        Pending New Registration Applications\n        <v-spacer></v-spacer>\n      </v-card-title>\n      <v-card-title>\n        <v-select\n          :items=\"status\"\n          v-model=\"search.financestatus\"\n          label=\"Finance Director Status\"\n          outlined\n          dense\n          class=\"ma-2\"\n          hide-details\n          clearable\n          @change=\"buildTerms()\"\n          @click:clear=\"clearSearch('financestatus')\"\n        ></v-select>\n        <v-select\n          :items=\"status\"\n          v-model=\"search.taalimstatus\"\n          label=\"Taalim Director Status\"\n          outlined\n          dense\n          class=\"ma-2\"\n          hide-details\n          clearable\n          @change=\"buildTerms()\"\n          @click:clear=\"clearSearch('taalimstatus')\"\n        ></v-select>\n        <v-text-field label=\"Name\" class=\"ma-2\" v-model=\"search.name\" dense outlined hide-details clearable @change=\"buildTerms()\" @click:clear=\"clearSearch('name')\" />\n      </v-card-title>\n      <v-card-subtitle\n        v-if=\"error_message\"\n        class=\"white--text error\"\n      >{{ error_message }}</v-card-subtitle>\n      <v-card-text>\n        <v-data-table\n          style=\"cursor: pointer\"\n          :headers=\"headers\"\n          :items=\"results\"\n          item-key=\"id\"\n          :options.sync=\"options\"\n          :server-items-length=\"total\"\n          :footer-props=\"{ 'items-per-page-text':$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] }\"\n          :loading=\"loading\"\n          class=\"elevation-1\"\n          @click:row=\"clickIt\"\n        >\n          <template v-slot:item.financeStatus=\"{ item }\">\n            <v-chip\n              :color=\"getColor(item.financeStatus)\"\n              dark\n            >\n              {{ item.financeStatus }}\n            </v-chip>\n          </template>\n          <template v-slot:item.taalimStatus=\"{ item }\">\n            <v-chip\n              :color=\"getColor(item.taalimStatus)\"\n              dark\n            >\n              {{ item.taalimStatus }}\n            </v-chip>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: function() {\n    return {\n      search: {\n        name: '',\n        taalimstatus: \"\",\n        financestatus: \"\"\n      },\n      debug: \"\",\n      terms: {},\n      headers: [{\n        text: \"Name\",\n        value: \"name\"\n      }, {\n        text: \"Date of Birth\",\n        value: \"birthDate\"\n      }, {\n        text: \"Gender\",\n        value: \"gender\"\n      }, {\n        text: \"Nationality\",\n        value: \"nationality\"\n      }, {\n        text: \"Phone\",\n        value: \"phone\"\n      }, {\n        text: \"Finance Director\",\n        value: \"financeStatus\"\n      }, {\n        text: \"Taalim Director\",\n        value: \"taalimStatus\"\n      }],\n      status: [{\n        text: \"Pending\",\n        value: \"pending\"\n      }, {\n        text: \"Approved\",\n        value: \"approved\"\n      }, {\n        text: \"Reject\",\n        value: \"reject\"\n      }],\n      results: [],\n      options: { itemsPerPage: 10 },\n      loading: false,\n      total: 0,\n      prevPage: -1,\n      link: [],\n      error_message: null,\n      update_again: { rerun: false, restart: false }\n    };\n  },\n  watch: {\n    options: {\n      handler() {\n        this.getData();\n      },\n      deep: true\n    }\n  },\n  mounted: function() {\n    this.getData(true);\n  },\n  methods: {\n    clearSearch: function(field) {\n      this.search[field] = ''\n      this.buildTerms()\n    },\n    clickIt: function(record) {\n      this.$router.push(\"/custom/new_registration_view?path=/itsf&id=\" + record.id);\n    },\n    checkRerun() {\n      if ( !this.loading && this.update_again.rerun ) {\n        this.getData( this.update_again.restart )\n        this.update_again = { rerun: false, restart: false }\n      }\n    },\n    async buildTerms() {\n      this.terms = {}\n      if(this.search.name) {\n        this.terms[\"name\"] = this.search.name\n      }\n      if(this.search.financestatus) {\n        this.terms[\"newappfinancestatus\"] = this.search.financestatus\n      }\n      if(this.search.taalimstatus) {\n        this.terms[\"newapptaalimstatus\"] = this.search.taalimstatus\n      }\n      this.getData(true);\n    },\n    getColor(status) {\n      if(status === \"Pending\") {\n        return \"warning\"\n      } else if(status === \"Rejected\") {\n        return \"error\"\n      } else if(status === \"Approved\") {\n        return \"success\"\n      }\n      return \"grey\"\n    },\n    getData(restart) {\n      //console.log(\"getting data\",restart)\n      if ( this.loading ) {\n        this.update_again.rerun = true\n        this.update_again.restart = this.update_again.restart || restart\n        return\n      }\n      this.loading = true;\n      this.error_message = null;\n      let url = \"\";\n      let count = this.options.itemsPerPage || 10;\n      if (restart) this.options.page = 1;\n      if (this.options.page > 1) {\n        if (this.options.page === this.prevPage - 1) {\n          url = this.link.find(link => link.relation === \"previous\").url;\n        } else if (this.options.page === this.prevPage + 1) {\n          url = this.link.find(link => link.relation === \"next\").url;\n        }\n        // Should make this smarter to keep the _getpages parameter,\n        // but the issue is with tracking permissions on the resource\n        url = url.replace(\"/fhir?\",\"/site/student/getRegistrationApplications?\")\n        url = url.substring(url.indexOf(\"/site/student/getRegistrationApplications\"));\n        //some of the hapi instances requires _total=accurate to always be available for them to return total resources\n        if(url.indexOf('_sort=-_lastUpdated') === -1) {\n          url = url + '&_sort=-_lastUpdated'\n        }\n        if(url.indexOf('_total=accurate') === -1) {\n          url = url + '&_total=accurate'\n        }\n      }\n      if (url === \"\") {\n        let sort = \"\";\n        for (let idx in this.options.sortBy) {\n          if (sort) {\n            sort += \",\";\n          }\n          if (this.options.sortDesc[idx]) {\n            sort += \"-\";\n          }\n          sort += this.options.sortBy[idx];\n        }\n        url =\n          \"/site/student/getRegistrationApplications?_count=\" +\n          count +\n          \"&_profile=http://ihris.org/fhir/StructureDefinition/itsf-registration-application&_sort=-_lastUpdated&_total=accurate\"\n        this.debug = url;\n      }\n      let sTerms = Object.keys(this.terms);\n      for (let term of sTerms) {\n        if ( Array.isArray( this.terms[term] ) ) {\n          if ( this.terms[term].length > 0 ) {\n            url += \"&\" + term + \"=\" + this.terms[term].join(',')\n          }\n        } else if ( this.terms[term] ) {\n          url += \"&\" + term + \"=\" + this.terms[term];\n        }\n      }\n\n      this.prevPage = this.options.page;\n      console.log(\"fetching\",url)\n      fetch(url).then(response => {\n        response.json().then(async (data) => {\n          this.results = [];\n          if (data.total > 0) {\n            this.link = data.link;\n            this.results = data.data\n          }\n          this.total = data.total;\n          this.loading = false;\n          this.checkRerun()\n        }).catch(err => {\n          this.loading = false;\n          this.error_message = \"Unable to load results.\";\n          this.checkRerun()\n          console.log(err);\n        });\n      }).catch(err => {\n        this.loading = false;\n        this.error_message = \"Unable to load results.\";\n        this.checkRerun()\n        console.log(err);\n      });\n    }\n  }\n};\n</script>\n<style>\ntbody tr:nth-of-type(even) {\n  background-color: #E0F2F1;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./process_new_registration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./process_new_registration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./process_new_registration.vue?vue&type=template&id=5f567df4&\"\nimport script from \"./process_new_registration.vue?vue&type=script&lang=js&\"\nexport * from \"./process_new_registration.vue?vue&type=script&lang=js&\"\nimport style0 from \"./process_new_registration.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCard,VCardSubtitle,VCardText,VCardTitle,VChip,VContainer,VDataTable,VSelect,VSpacer,VTextField})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","_v","status","$event","buildTerms","clearSearch","model","value","search","callback","$$v","$set","expression","_s","error_message","_e","staticStyle","headers","results","options","total","$t","loading","clickIt","scopedSlots","_u","key","fn","ref","item","getColor","financeStatus","taalimStatus","staticRenderFns","data","taalimstatus","financestatus","debug","terms","text","itemsPerPage","prevPage","link","update_again","rerun","restart","watch","handler","deep","mounted","methods","checkRerun","getData","url","sort","count","console","fetch","response","catch","err","component","VCard"],"sourceRoot":""}