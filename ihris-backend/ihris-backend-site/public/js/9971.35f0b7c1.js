"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[9971],{3778:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"grid-list-xs":""}},[i("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"700"},model:{value:e.messageDialog.enable,callback:function(t){e.$set(e.messageDialog,"enable",t)},expression:"messageDialog.enable"}},[i("v-card",[i("v-toolbar",{staticClass:"text-h5",attrs:{color:e.messageDialog.color,dark:""}},[e._v(e._s(e.messageDialog.title))]),i("v-card-text",[i("v-row",[i("v-col",{attrs:{cols:"1"}},[i("v-icon",{staticClass:"pa-12",attrs:{"x-large":""}},[e._v("mdi-information-outline")])],1),i("v-col",{attrs:{cols:"11"}},[i("div",{staticClass:"text-h5 pa-12"},[e._v(e._s(e.messageDialog.message))])])],1)],1),i("v-card-actions",{staticClass:"justify-end"},[i("v-btn",{attrs:{text:""},on:{click:function(t){e.messageDialog.enable=!1}}},[e._v("Close")]),e.signedup?i("v-btn",{attrs:{text:""},on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("Login")]):e._e()],1)],1)],1),i("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[i("v-stepper-header",[i("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v(" Registration Checking ")]),i("v-divider"),i("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v(" Account Creation ")])],1),i("v-stepper-items",[i("v-stepper-content",{attrs:{step:"1"}},[i("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:"",elevation:"0"}},[i("v-card-title",{attrs:{"primary-title":""}},[e._v(" Provide below information to proceed ")]),i("v-card-text",{staticClass:"px-12 pt-6"},[i("v-autocomplete",{attrs:{label:"ID Type*",items:e.idTypes,"item-text":"display","item-value":"name","return-object":"",outlined:"","hide-details":"auto",dense:"",rules:e.idtyperules},on:{change:function(t){e.errors.idtype=[]}},model:{value:e.idType,callback:function(t){e.idType=t},expression:"idType"}}),e.idType?i("br"):e._e(),e.idType?i("v-text-field",{attrs:{label:e.idType.display+" Number*",outlined:"","hide-details":"auto",rules:e.idnumrules,dense:""},model:{value:e.idNum,callback:function(t){e.idNum=t},expression:"idNum"}}):e._e(),i("br"),i("v-text-field",{attrs:{label:"License Number*",outlined:"","hide-details":"auto",rules:e.licensenumrules,dense:""},model:{value:e.licenseNum,callback:function(t){e.licenseNum=t},expression:"licenseNum"}}),i("br"),i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{label:"Birth Date*","prepend-inner-icon":"mdi-calendar",readonly:"",rules:e.birthdaterules,outlined:"","hide-details":"auto",dense:""},model:{value:e.birthDateFormatted,callback:function(t){e.birthDateFormatted=t},expression:"birthDateFormatted"}},s))]}}]),model:{value:e.birthDateMenu,callback:function(t){e.birthDateMenu=t},expression:"birthDateMenu"}},[i("v-date-picker",{attrs:{"active-picker":e.activePicker,max:e.maxDOBDate,min:e.minDOBDate,color:"secondary"},on:{"update:activePicker":function(t){e.activePicker=t},"update:active-picker":function(t){e.activePicker=t},change:function(t){e.birthDateFormatted=e.formatDate(e.birthDate)},input:function(t){e.birthDateMenu=!1}},model:{value:e.birthDate,callback:function(t){e.birthDate=t},expression:"birthDate"}})],1)],1)],1)],1),i("br"),i("v-spacer"),i("v-row",[i("v-spacer"),i("v-col",{attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.checkRecord}},[i("v-icon",{attrs:{left:""}},[e._v(" mdi-account-plus ")]),e._v(" Submit ")],1),e._v("   "),i("v-btn",{staticClass:"align-right",attrs:{color:"error",rounded:""},on:{click:function(t){return e.$router.push({path:"/"})}}},[i("v-icon",{attrs:{left:""}},[e._v(" mdi-cancel ")]),e._v(" Cancel ")],1)],1)],1)],1),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:"",elevation:"0"}},[i("v-card-text",{staticClass:"px-12 pt-6"},[i("v-text-field",{attrs:{label:"Email*",outlined:"","hide-details":"auto",rules:e.emailrules,dense:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),i("br"),i("v-spacer"),i("v-row",[i("v-spacer"),i("v-col",{attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"primary",disabled:e.errors.emails.length>0},on:{click:e.createAccount}},[i("v-icon",{attrs:{left:""}},[e._v(" mdi-account-plus ")]),e._v(" Create ")],1),e._v("   "),i("v-btn",{staticClass:"align-right",attrs:{color:"error"},on:{click:function(t){return e.$router.push({path:"/"})}}},[i("v-icon",{attrs:{left:""}},[e._v(" mdi-cancel ")]),e._v(" Cancel ")],1)],1)],1)],1)],1)],1)],1)},a=[],r={data(){return{messageDialog:{enable:!1,color:"error",title:"",message:""},step:1,errors:{emails:[],birthdate:[],idtype:[],idnum:[],licensenum:[]},idTypes:[{name:"omang",display:"OMANG"},{name:"passport",display:"Passport"}],idType:"",idNum:"",licenseNum:"",email:"",birthDate:"",birthDateFormatted:"",birthDateMenu:!1,activePicker:null,signedup:!1,valid:!0}},watch:{birthDateMenu(e){e&&setTimeout((()=>this.activePicker="YEAR"))}},computed:{maxDOBDate(){return this.$moment().subtract(18,"YEARS").format("YYYY-MM-DD")},minDOBDate(){return this.$moment().subtract(100,"YEARS").format("YYYY-MM-DD")},idtyperules(){return[e=>!!e||(this.errors.idtype=["ID Type is required"],"ID Type is required")]},idnumrules(){return[e=>!!e||(this.errors.idnum=["ID Number is required"],"ID Number is required")]},licensenumrules(){return[e=>!!e||(this.errors.licensenum=["License Number is required"],"License Number is required")]},emailrules(){return[e=>(this.errors.emails=[],e?2===e.split("@").length&&(2!==e.split("@").length||e.split("@")[0]&&e.split("@")[1])&&!(e.split(".").length<=1||e.split(".").length>1&&!e.split(".")[1])||(this.errors.emails=["Invalid Email"],"Invalid Email"):(this.errors.emails=["Email is required"],"Email is required"))]},birthdaterules(){return[e=>(this.errors.birthdate=[],!!e||(this.errors.birthdate=["Birth date is required"],"Birth date is required"))]}},methods:{createAccount(){let e={method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual",body:JSON.stringify({idType:this.idType.name,idNum:this.idNum,licenseNum:this.licenseNum,email:this.email,birthDate:this.birthDate})};fetch("/site/unAuthenticated/signup",e).then((e=>{200!==e.status&&201!==e.status?e.text().then((e=>{this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title="Error",this.messageDialog.message=e})):e.json().then((e=>{"failed"===e.type?(this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title=e.title,this.messageDialog.message=e.message):(this.signedup=!0,this.messageDialog.color="success",this.messageDialog.enable=!0,this.messageDialog.title="Signed Up",this.messageDialog.message="You have been successfully signed up")})).catch((()=>{this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title="Error",this.messageDialog.message="Unexpected error has occured"}))})).catch((()=>{this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title="Error",this.messageDialog.message="Unexpected error has occured"}))},checkRecord(){if(this.$refs.form.validate(),!this.valid)return;let e={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual",body:JSON.stringify({idType:this.idType.name,idNum:this.idNum,licenseNum:this.licenseNum,birthDate:this.birthDate})};fetch("/site/unAuthenticated/validateSignup",e).then((e=>{e.json().then((e=>{"failed"===e.type?(this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title=e.title,this.messageDialog.message=e.message):(this.messageDialog.color="success",this.step=2)})).catch((()=>{this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title="Error",this.messageDialog.message="Unexpected error has occured"}))})).catch((()=>{this.messageDialog.color="error",this.messageDialog.enable=!0,this.messageDialog.title="Error",this.messageDialog.message="Unexpected error has occured"}))},formatDate(e){if(!e)return null;const[t,i,s]=e.split("-");return`${s}-${i}-${t}`}}},l=r,o=i(3736),n=i(3453),c=i.n(n),u=i(1835),d=i(3150),m=i(2371),h=i(7118),p=i(2102),g=i(4228),v=i(9771),b=i(4497),D=i(1418),f=i(6232),x=i(6428),y=i(1152),k=i(2877),_=i(9762),C=i(3446),N=i(8937),T=i(6189),V=i(8975),Z=i(5978),S=i(6656),E=(0,o.Z)(l,s,a,!1,null,null,null),w=E.exports;c()(E,{VAutocomplete:u.Z,VBtn:d.Z,VCard:m.Z,VCardActions:h.h7,VCardText:h.ZB,VCardTitle:h.EB,VCol:p.Z,VContainer:g.Z,VDatePicker:v.Z,VDialog:b.Z,VDivider:D.Z,VForm:f.Z,VIcon:x.Z,VMenu:y.Z,VRow:k.Z,VSpacer:_.Z,VStepper:C.Z,VStepperContent:N.Z,VStepperHeader:T.Rp,VStepperItems:T.gd,VStepperStep:V.Z,VTextField:Z.Z,VToolbar:S.Z})}}]);
//# sourceMappingURL=9971.35f0b7c1.js.map