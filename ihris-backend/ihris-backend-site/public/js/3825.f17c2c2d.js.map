{"version":3,"file":"js/3825.f17c2c2d.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/site/namibia/components/advertised-positions.vue?b036","webpack://iHRIS-v5/src/site/namibia/components/advertised-positions.vue","webpack://iHRIS-v5/./src/site/namibia/components/advertised-positions.vue?1921","webpack://iHRIS-v5/./src/site/namibia/components/advertised-positions.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"grid-list-xs\":\"\"}},[_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}}),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.overlay = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card',[_c('v-card-title',[_vm._v(\"Select Family Head Name\")]),_c('v-card-text',[_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Search Job\",\"outlined\":\"\",\"dense\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_c('v-col',{attrs:{\"cols\":\"2\"}},[_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.search}},[_vm._v(\"Search\")])],1)],1),_c('v-data-table',{staticClass:\"elevation-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"headers\":_vm.headers,\"items\":_vm.results,\"item-key\":\"id\",\"options\":_vm.options,\"server-items-length\":_vm.total,\"footer-props\":{ 'items-per-page-text':_vm.$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] },\"loading\":_vm.loading},on:{\"update:options\":function($event){_vm.options=$event},\"click:row\":_vm.selected}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container grid-list-xs>\n    <v-overlay :value=\"overlay\">\n      <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n      ></v-progress-circular>\n      <v-btn icon @click=\"overlay = false\">\n        <v-icon>mdi-close</v-icon>\n      </v-btn>\n    </v-overlay>\n    <v-card>\n      <v-card-title>Select Family Head Name</v-card-title>\n      <v-card-text>\n        <v-row>\n          <v-col>\n            <v-text-field\n              label=\"Search Job\"\n              v-model=\"name\" \n              outlined \n              dense\n              @keyup.enter = \"search\"\n            >\n            </v-text-field>\n          </v-col>\n          <v-col cols=\"2\">\n            <v-btn color=\"success\" @click=\"search\">Search</v-btn>\n          </v-col>\n        </v-row>\n        <v-data-table\n          style=\"cursor: pointer\"\n          :headers=\"headers\"\n          :items=\"results\"\n          item-key=\"id\"\n          :options.sync=\"options\"\n          :server-items-length=\"total\"\n          :footer-props=\"{ 'items-per-page-text':$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] }\"\n          :loading=\"loading\"\n          class=\"elevation-1\"\n          @click:row=\"selected\"\n        ></v-data-table>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n<script>\nexport default {\n  props: [\"queries\"],\n  data() {\n    return {\n      date: '',\n      menu: false,\n      overlay: false,\n      confirmDialog: false,\n      practitionername: '',\n      practitionerregnum: '',\n      familyHead: {},\n      total: 0,\n      name: '',\n      regNum: '',\n      headers: [{\n        \"text\": \"Job\",\n        \"value\": \"Basic.extension.where(url='http://ihris.org/fhir/StructureDefinition/position-advertisement').extension.where(url='designation').valueReference\"\n      }, {\n        \"text\": \"Closing Date\",\n        \"value\": \"Basic.extension.where(url='http://ihris.org/fhir/StructureDefinition/position-advertisement').extension.where(url='closing-date').valueDate\"\n      }],\n      fields: [\n        [\"Job\", \"Basic.extension.where(url='http://ihris.org/fhir/StructureDefinition/position-advertisement').extension.where(url='designation').valueReference\", null],\n        [\"Closing Date\", \"Basic.extension.where(url='http://ihris.org/fhir/StructureDefinition/position-advertisement').extension.where(url='closing-date').valueDate\", null]\n      ],\n      results: [],\n      loading: false,\n      update_again: { rerun: false, restart: false },\n      options: { itemsPerPage: 10 }\n    }\n  },\n  watch: {\n    options: {\n      handler() {\n        this.search();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    selected: function(record) {\n      this.$router.push(\"/questionnaire/position-application/applicant?advert=Basic/\" + record.id)\n    },\n    checkRerun() {\n      if ( !this.loading && this.update_again.rerun ) {\n        this.search( this.update_again.restart )\n        this.update_again = { rerun: false, restart: false }\n      }\n    },\n    search(restart) {\n      let query = \"\"\n      if(this.name) {\n        query += \"&name:contains=\" + this.name\n      }\n      if ( this.loading ) {\n        this.update_again.rerun = true\n        this.update_again.restart = this.update_again.restart || restart\n        return\n      }\n      this.loading = true;\n      this.error_message = null;\n      let url = \"\";\n      if (restart) this.options.page = 1;\n      if (this.options.page > 1) {\n        if (this.options.page === this.prevPage - 1) {\n          url = this.link.find(link => link.relation === \"previous\").url;\n        } else if (this.options.page === this.prevPage + 1) {\n          url = this.link.find(link => link.relation === \"next\").url;\n        }\n        // Should make this smarter to keep the _getpages parameter,\n        // but the issue is with tracking permissions on the resource\n        url = url.replace(/_getpages=[^&]*&*/, \"\").replace(\"/fhir?\",\"/fhir/Basic?\")\n        url = url.substring(url.indexOf(\"/fhir/\"));\n\n        //some of the hapi instances requires _total=accurate to always be available for them to return total resources\n        if(url.indexOf('_total=accurate') === -1) {\n          url = url + '&_total=accurate'\n        }\n        url += \"&_profile=http://ihris.org/fhir/StructureDefinition/position-advertisement-profile\"\n      }\n      if (url === \"\") {\n        let count = this.options.itemsPerPage || 10;\n        let sort = \"\";\n        for (let idx in this.options.sortBy) {\n          if (sort) {\n            sort += \",\";\n          }\n          if (this.options.sortDesc[idx]) {\n            sort += \"-\";\n          }\n          sort += this.options.sortBy[idx];\n        }\n        url =\n          \"/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/position-advertisement-profile&_count=\" + count + \"&_total=accurate\"\n          url += query\n      }\n      this.prevPage = this.options.page;\n      fetch(url).then(response => {\n        response.json().then(async (data) => {\n          this.results = [];\n          if (data.total > 0) {\n            this.link = data.link;\n            for (let entry of data.entry) {\n              let result = { id: entry.resource.id };\n              for (let field of this.fields) {\n                let fieldDisplay = this.$fhirpath.evaluate( entry.resource, field[1] );\n                result[field[1]] = await this.$fhirutils.lookup( fieldDisplay[0], field[2] )\n              }\n              this.results.push(result);\n            }\n          }\n          this.total = data.total;\n          this.loading = false;\n          this.checkRerun()\n        }).catch(err => {\n          this.loading = false;\n          this.error_message = \"Unable to load results.\";\n          this.checkRerun()\n          console.log(err);\n        });\n      }).catch(err => {\n        this.loading = false;\n        this.error_message = \"Unable to load results.\";\n        this.checkRerun()\n        console.log(err);\n      });\n    }\n  }\n}\n</script>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./advertised-positions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./advertised-positions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./advertised-positions.vue?vue&type=template&id=30159ac2&\"\nimport script from \"./advertised-positions.vue?vue&type=script&lang=js&\"\nexport * from \"./advertised-positions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VContainer,VDataTable,VIcon,VOverlay,VProgressCircular,VRow,VTextField})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","overlay","$event","_v","type","indexOf","_k","keyCode","key","search","apply","arguments","model","value","callback","$$v","expression","staticStyle","headers","results","options","total","$t","loading","selected","staticRenderFns","data","date","menu","confirmDialog","practitionername","practitionerregnum","familyHead","regNum","fields","update_again","rerun","restart","itemsPerPage","watch","handler","deep","methods","checkRerun","query","url","sort","fetch","response","id","result","catch","err","console","component","VBtn"],"sourceRoot":""}