(function(){"use strict";var e={4972:function(e,t,a){a.d(t,{Y:function(){return lt}});var s=a(538),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"top"}},[a("the-header",{attrs:{app:"",header:e.header},on:{loggedin:e.updateConfig,loggedout:e.updateConfig}}),a("the-navigation",{attrs:{app:"",nav:e.nav},on:{loggedin:e.updateConfig}}),a("v-content",[a("v-snackbar",{staticClass:"mt-12",attrs:{app:"",color:e.$store.state.message.type,timeout:e.$store.state.message.timeout,top:"","multi-line":""},model:{value:e.$store.state.message.active,callback:function(t){e.$set(e.$store.state.message,"active",t)},expression:"$store.state.message.active"}},[e._v(" "+e._s(e.$store.state.message.text)+" "),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$store.commit("closeMessage")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.progress.enabled,callback:function(t){e.$set(e.$store.state.progress,"enabled",t)},expression:"$store.state.progress.enabled"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.$store.state.progress.title)+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("router-view",{key:e.$route.path}),e.$store.state.user.loggedin?a("router-view",{attrs:{name:"homeNav",nav:e.nav}}):e._e()],1),a("the-footer",{attrs:{footer:e.footer}})],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-app-bar",{attrs:{color:"white",app:"","clipped-left":"","clipped-right":""}},[a("router-link",{attrs:{to:"/"}},[a("v-img",{attrs:{src:"/images/"+e.header.logo,contain:"","max-height":"36","max-width":"106"}})],1),a("v-toolbar-title",{staticClass:"headline ml-2",attrs:{bottom:"true"}},[e.header.title?a("span",{staticClass:"primary--text"},[e._v(e._s(e.$t("App.title")))]):e._e(),e.header.site?a("span",{staticClass:"secondary--text"},[e._v(" | "+e._s(e.$t("App.site")))]):e._e()]),e.$store.state.security_off?a("v-spacer"):e._e(),e.$store.state.security_off?a("div",{staticClass:"error font-weight-bold white--text",attrs:{dark:""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Security has been disabled for remote configuration and modules!"))+" "),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.This should only be done during development."))+" ")]):e._e(),a("v-spacer"),a("v-spacer"),e.header.title?e._e():a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),a("v-btn",{attrs:{icon:"",to:"/",title:"Home"}},[a("v-icon",[e._v("mdi-home")])],1),a("v-btn",{attrs:{icon:"",title:"Help"}},[a("v-icon",[e._v("mdi-help")])],1),a("div",[a("language-switcher")],1),e.$store.state.user.loggedin?[a("v-btn",{attrs:{small:"",fab:"",dark:"",title:"Logout",loading:e.loading,disabled:e.loading},on:{click:e.logout}},[a("v-icon",[e._v("mdi-logout")])],1)]:e._e()],2),a("v-overlay",{attrs:{value:e.idle_countdown}},[a("v-card",{staticClass:"secondary lighten-1"},[a("v-card-title",{staticClass:"headline warning white--text",attrs:{"primary-title":""}},[e._v(e._s(e.$t("App.hardcoded-texts.Idle - Auto Logout")))]),a("v-card-text",{staticClass:"black--text"},[e._v(e._s(e.$t("App.hardcoded-texts.You have been idle too long and will be logged out in"))+" "+e._s(e.idle_logout)+" "+e._s(e.$t("App.hardcoded-texts.seconds.")))])],1)],1)],1)},o=[],l=a(6123),c=a.n(l),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{staticClass:"ma-8",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"text-capitalize",attrs:{text:""}},"v-btn",n,!1),s),[a("v-list-item-avatar",{attrs:{size:"24"}},[a("v-img",{attrs:{src:"/flag_"+e.activeFlag+".svg"}})],1),e._v(" "+e._s(e.activeLang)+" "),a("v-icon",{attrs:{small:"",right:""}},[e._v("mdi-menu-down")])],1)]}}]),model:{value:e.languageMenu,callback:function(t){e.languageMenu=t},expression:"languageMenu"}},[a("v-list",{attrs:{dense:""}},e._l(e.languages,(function(t,s){return a("v-list-item",{key:s,on:{click:function(a){return e.handleMenuItemClick(t)}}},[a("v-list-item-avatar",{attrs:{size:"24"}},[a("v-img",{attrs:{src:"/flag_"+t.flag+".svg"}})],1),a("v-list-item-title",[e._v(e._s(t.language))])],1)})),1)],1)},u=[],h=a(7152),p=a(9669),m=a.n(p),g=a(629);s["default"].use(g.ZP);var f=new g.ZP.Store({state:{user:{loggedin:!1,name:""},allowSelfSignup:"",idp:"ihris",security_off:!1,message:{type:"info",text:null,timeout:5e3,active:!1},cols:{header:4,content:8},progress:{enabled:!1,title:""}},mutations:{login(e,t){e.user.loggedin=!0,e.user.name=t.name,e.user.location=t.location,e.user.role=t.role,e.user.userId=t.userId,e.user.reference=t.reference,e.user.facilityId=t.facilityId,e.user.physicalLocation=t.physicalLocation},logout(e){e.user.loggedin=!1,e.user.name="",e.user.name="",e.user.location="",e.user.role="",e.user.reference="",e.user.facilityId="",e.user.physicalLocation=""},securityOff(e,t){e.security_off=t},setAllowSelfSignup(e,t){e.allowSelfSignup=t},closeMessage(e){e.message.active=!1},setMessage(e,t){"string"===typeof t?(e.message.type="info",e.message.timeout=5e3,e.message.text=t,e.message.active=!0):(e.message.type=t.type||"info",e.message.timeout=t.timeout||5e3,e.message.text=t.text,e.message.active=!0)}},actions:{},modules:{}});s["default"].use(h.Z);const v=new h.Z({locale:"en",fallbackLocale:"en",messages:{}});function b(e){f.state.initializingApp=!0,m().get(`/translator/getLocale/${e}`).then((t=>{f.state.initializingApp=!1,v.setLocaleMessage(e,t.data),v.locale=e}))}var y={data(){return{languages:[],activeLang:"English",activeFlag:"en",dialog:!1,languageMenu:!1}},created(){this.getLanguageList()},methods:{handleMenuItemClick(e){b(e.locale),localStorage.setItem("activeLang",e.language),localStorage.setItem("activeFlag",e.flag),localStorage.setItem("activeLocale",e.locale),this.activeLang=e.language,this.activeFlag=e.flag},getLanguageList(){m().get("/translator/getTranslatedLanguages").then((e=>{this.languages=e.data,this.languages.sort(((e,t)=>e.language<t.language?-1:e.language>t.language?1:0));let t=localStorage.getItem("activeLocale")||this.$i18n.locale||"en",a=this.languages.find((e=>e.locale===t));this.$i18n.locale=a.locale,this.activeLang=a.language,b(a.locale||"en")}))}}},w=y,_=a(3736),k=a(3453),x=a.n(k),C=a(3150),$=a(6428),Z=a(7047),V=a(6816),A=a(7620),L=a(6421),P=a(4562),S=a(1152),I=(0,_.Z)(w,d,u,!1,null,null,null),O=I.exports;x()(I,{VBtn:C.Z,VIcon:$.Z,VImg:Z.Z,VList:V.Z,VListItem:A.Z,VListItemAvatar:L.Z,VListItemTitle:P.V9,VMenu:S.Z});var T={name:"the-header",props:["header"],data:function(){return{loading:!1,idle_countdown:!1,idle_logout:30}},components:{LanguageSwitcher:O},onIdle(){this.$store.state.user.loggedin&&this.idleDialog()},onActive(){this.idle_countdown=!1},methods:{idleDialog(){this.idle_logout=30,this.idle_countdown=!0;let e=setInterval((()=>{if(!this.isAppIdle)return clearInterval(e);this.idle_logout-=1,this.idle_logout<1&&(clearInterval(e),this.logout(null,!0))}),1e3)},logout(e,t){"keycloak"===this.$store.state.idp?(c().remove("userObj"),this.$keycloak.logout()):(this.loading=!0,fetch("/auth/logout").then((()=>{this.loading=!1,this.$emit("loggedout"),t?this.$store.commit("setMessage",{type:"warning",text:this.$t("App.hardcoded-texts.You have been logged out due to inactivity."),timeout:36e5}):this.$store.commit("setMessage",{type:"success",text:this.$t("App.hardcoded-texts.You have logged out.")}),this.$router.push({path:"/"})})))}}},E=T,j=a(8320),R=a(2371),D=a(7118),M=a(1058),N=a(624),B=a(9762),H=a(7921),q=(0,_.Z)(E,r,o,!1,null,null,null),F=q.exports;x()(q,{VAppBar:j.Z,VBtn:C.Z,VCard:R.Z,VCardText:D.ZB,VCardTitle:D.EB,VIcon:$.Z,VImg:Z.Z,VOverlay:M.Z,VProgressCircular:N.Z,VSpacer:B.Z,VToolbarTitle:H.qW});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$store.state.user.loggedin?a("v-navigation-drawer",{staticClass:"primary darken-1 white--text font-weight-bold",staticStyle:{"z-index":"3"},attrs:{"mini-variant":e.mini,app:"",clipped:"",permanent:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list-item",{staticClass:"px-2 py-2"},[a("v-list-item-avatar",[a("v-icon",{staticClass:"white--text",attrs:{size:"48"}},[e._v("mdi-account-circle")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text"},[e._v(e._s(e.$store.state.user.name))]),a("v-list-item-subtitle",{staticClass:"white--text"},[e._v(e._s(e.$store.state.user.role))])],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[a("v-icon",{staticClass:"white--text"},[e._v("mdi-chevron-left")])],1)],1),a("v-divider",{staticClass:"grey"}),e.$store.state.user.loggedin?a("v-list",{attrs:{nav:"",dark:"",dense:""}},[e._l(e.menu,(function(t){return[t.menu?[a("v-list-group",{key:t.id,class:t.active&&!e.mini?"primary pa-3":t.active&&e.mini?"primary":"",staticStyle:{"border-radius":"20px"},attrs:{"prepend-icon":t.icon,color:"white--text",value:t.active,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(e.$t("App.menu."+t.text)))])]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"item.active"}},e._l(t.menu,(function(t){return a("v-list-item",{key:t.id,staticClass:"text-right",attrs:{to:t.url,"active-class":"primary darken-2",dense:""}},[a("v-list-item-title",[e._v(e._s(e.$t("App.menu."+t.text)))]),a("v-icon",[e._v("mdi-chevron-right")])],1)})),1)]:[a("v-list-item",{key:t.id,attrs:{to:t.url}},[a("v-list-item-icon",{staticClass:"mr-3"},[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(e.$t("App.menu."+t.text)))])],1)]]}))],2):a("v-list",{staticClass:"primary lighten-1",attrs:{nav:"",dark:"",dense:""}},e._l(e.nav.auths,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-title",[a("auth-button",{attrs:{big:!0,data:t},on:{loggedin:function(t){return e.$emit("loggedin",t)}}})],1)],1)})),1)],1):e._e()},z=[],Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-xs-center"},["get"==e.data.method?a("a",{attrs:{href:e.data.link}},[e.image?a("img",{attrs:{src:"/images/"+e.image,alt:e.data.btn.text,width:"191",height:"46"}}):e._e()]):e._e(),"post"==e.data.method?a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("a",e._g({},s),[e.image?a("img",{attrs:{src:"/images/"+e.image,alt:e.data.btn.text,width:"191",height:"46"}}):e._e()])]}}],null,!1,4006777567),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",[a("v-card",[a("v-card-title",{staticClass:"headline info white--text",attrs:{dark:"","primary-title":""}},[e._v(e._s(e.$t("App.hardcoded-texts.Login")))]),a("v-card-text",[a("v-text-field",{attrs:{label:"Email Address",required:"","prepend-icon":"mdi-email"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password",required:"","append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",type:e.show_pass?"text":"password","prepend-icon":"mdi-form-textbox-password"},on:{"click:append":function(t){e.show_pass=!e.show_pass}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-divider"),a("v-card-actions",[a("v-snackbar",{attrs:{absolute:e.absolute,color:"secondary"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" "),a("v-btn",{attrs:{color:"warning",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Close")))])],1),a("v-spacer"),a("v-btn",{attrs:{color:"success",loading:e.loggingin,disabled:e.loggingin},on:{click:e.submit}},[e._v(e._s(e.$t("App.hardcoded-texts.Login")))])],1)],1)],1)],1):e._e()],1)},W=[],J={name:"auth-button",props:["data","big"],data:function(){return{dialog:!1,username:"",password:"",show_pass:!1,loggingin:!1,message:"",snackbar:!1,absolute:!0}},computed:{image:function(){return this.big?this.data.btn.image2x:this.data.btn.image}},methods:{submit(){this.loggingin=!0;var e=new URLSearchParams;e.append("username",this.username),e.append("password",this.password),fetch(this.data.link,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((e=>{this.loggingin=!1,e.ok?e.json().then((e=>{this.dialog=!1,this.snackbar=!0,this.message=this.$t("App.hardcoded-texts.Login successfull"),this.$emit("loggedin",e.name)})).catch((e=>{this.loggingin=!1,this.snackbar=!0,this.message=e.message})):(this.message=this.$t("App.hardcoded-texts.Username or password is incorrect!"),this.snackbar=!0,this.loggingin=!1)})).catch((e=>{console.log(e),this.loggingin=!1,this.snackbar=!0,this.message=this.$t("App.hardcoded-texts.Login failed: ")+e.message}))}}},K=J,G=a(4497),Q=a(1418),X=a(6232),ee=a(3202),te=a(5978),ae=(0,_.Z)(K,Y,W,!1,null,null,null),se=ae.exports;x()(ae,{VBtn:C.Z,VCard:R.Z,VCardActions:D.h7,VCardText:D.ZB,VCardTitle:D.EB,VDialog:G.Z,VDivider:Q.Z,VForm:X.Z,VSnackbar:ee.Z,VSpacer:B.Z,VTextField:te.Z});var ne={name:"the-navigation",props:["nav"],components:{AuthButton:se},mounted:function(){this.updateMenu()},watch:{nav:{handler(){this.updateMenu()},deep:!0}},data:function(){return{menu:[],mini:!1,drawer:!0}},methods:{updateMenu:function(){this.menu=[];for(let e of Object.keys(this.nav.menu)){let t={};if(t={id:e,text:this.nav.menu[e].text,icon:this.nav.menu[e].icon,order:this.nav.menu[e].order},this.nav.active===e?t.active=!0:t.active=!1,this.nav.menu[e].menu){t.menu=[];for(let a of Object.keys(this.nav.menu[e].menu)){let s={id:a,text:this.nav.menu[e].menu[a].text,url:this.nav.menu[e].menu[a].url,order:this.nav.menu[e].menu[a].order};t.menu.push(s),t.menu.sort(((e,t)=>e.text===t.text?0:e.text<t.text?-1:1))}}else this.nav.menu[e].url&&(t.url=this.nav.menu[e].url);this.menu.push(t)}this.menu.sort(((e,t)=>Number(e.order)===Number(t.order)?0:Number(e.order)<Number(t.order)?-1:1))}}},ie=ne,re=a(9443),oe=a(459),le=a(5132),ce=(0,_.Z)(ie,U,z,!1,null,"5ae75e62",null),de=ce.exports;x()(ce,{VBtn:C.Z,VDivider:Q.Z,VIcon:$.Z,VList:V.Z,VListGroup:re.Z,VListItem:A.Z,VListItemAvatar:L.Z,VListItemContent:P.km,VListItemIcon:oe.Z,VListItemSubtitle:P.oZ,VListItemTitle:P.V9,VNavigationDrawer:le.Z});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{color:"white",app:""}},[a("v-row",{attrs:{justify:"end"}},e._l(e.footer.links,(function(t){return a("v-btn",{key:t.id,staticClass:"text-none",attrs:{text:"",to:t.to,href:t.href,target:t.href?"_blank":""}},[e._v(" "+e._s(e.$t("App.footer."+t.text))+" ")])})),1)],1)},he=[],pe={name:"the-footer",props:["footer"],data:function(){return{}}},me=pe,ge=a(899),fe=a(2877),ve=(0,_.Z)(me,ue,he,!1,null,null,null),be=ve.exports;x()(ve,{VBtn:C.Z,VFooter:ge.Z,VRow:fe.Z});var ye={name:"App",data:()=>({header:{title:!1,site:null,logo:"iHRIS5Logo.png",auths:[]},footer:{links:[]},nav:{active:null,menu:{},auths:[]}}),components:{TheHeader:F,TheNavigation:de,TheFooter:be},methods:{updateConfig:function(){fetch("/auth").then((()=>{fetch("/config/site").then((e=>{e.json().then((e=>{if(e.hasOwnProperty("security")&&e.security.hasOwnProperty("disabled")&&this.$store.commit("securityOff",e.security.disabled),e.hasOwnProperty("title")&&(this.header.title=e.title),e.hasOwnProperty("site")&&(this.header.site=e.site),e.hasOwnProperty("logo")&&(this.header.logo=e.logo),e.hasOwnProperty("auth")){this.header.auths=[],this.nav.auths=[];for(let t of Object.keys(e.auth))e.auth[t].id=t,this.header.auths.push(e.auth[t]),this.nav.auths.push(e.auth[t])}if(e.hasOwnProperty("user"))if(e.user.loggedin){let t={name:e.user.name,location:e.user.location,role:e.user.role,reference:e.user.reference,facilityId:e.user.facilityId,physicalLocation:e.user.physicalLocation};this.$store.commit("login",t)}else this.$store.commit("logout");e.hasOwnProperty("nav")&&(e.nav.hasOwnProperty("active")&&(this.nav.active=e.nav.active),e.nav.hasOwnProperty("menu")&&(this.nav.menu=e.nav.menu),e.nav.hasOwnProperty("home")&&(this.nav.home=e.nav.home))}))}))}))}},created:function(){localStorage.getItem("activeLang")||(localStorage.setItem("activeLang","English"),localStorage.setItem("activeFlag","en"),localStorage.setItem("activeCode","en")),this.updateConfig(),fetch("/auth").then((()=>{fetch("/config/site").then((e=>{e.json().then((e=>{if(e.hasOwnProperty("footer")&&e.footer.hasOwnProperty("links"))for(let t of Object.keys(e.footer.links))e.footer.links[t].id=t,this.footer.links.push(e.footer.links[t])}))}))}))}},we=ye,_e=a(7524),ke=a(4946),xe=a(7003),Ce=(0,_.Z)(we,n,i,!1,null,null,null),$e=Ce.exports;x()(Ce,{VApp:_e.Z,VBtn:C.Z,VCard:R.Z,VCardText:D.ZB,VContent:ke.Z,VDialog:G.Z,VIcon:$.Z,VProgressLinear:xe.Z,VSnackbar:ee.Z});var Ze=a(8345),Ve=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"home"},[s("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-form",[s("v-card",[s("v-card-title",{staticClass:"white--text justify-center primary darken-1"},[s("v-icon",{attrs:{color:"white",left:""}},[t._v(" mdi-account-plus ")]),t._v(" "+t._s(t.$t("App.hardcoded-texts.Register"))+" ")],1),s("v-card-text",{staticClass:"px-12 pt-6"},[s("v-text-field",{attrs:{outlined:"",dense:"",type:"email",label:t.$t("App.hardcoded-texts.Email Address"),required:"","prepend-icon":"mdi-email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[s("v-text-field",t._g(t._b({attrs:{outlined:"",dense:"",label:t.$t("App.hardcoded-texts.Birth Date"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-date-picker",{attrs:{max:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),min:"1910-01-01"},on:{change:t.saveDate},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}})],1),s("v-text-field",{attrs:{outlined:"",dense:"",label:t.$t("App.hardcoded-texts.Employee Number"),required:"","prepend-icon":"mdi-account-key"},model:{value:t.employeeNumber,callback:function(e){t.employeeNumber=e},expression:"employeeNumber"}})],1),s("v-card-actions",[s("v-snackbar",{attrs:{absolute:t.absolute,color:"secondary"},model:{value:t.snackbarRegister,callback:function(e){t.snackbarRegister=e},expression:"snackbarRegister"}},[t._v(" "+t._s(t.message)+" "),s("v-btn",{attrs:{color:"warning",text:""},on:{click:function(e){t.snackbarRegister=!1}}},[t._v(t._s(t.$t("App.hardcoded-texts.Close")))])],1),s("v-spacer"),s("v-btn",{staticClass:"mr-8 mb-6 primary",attrs:{loading:t.registering,disabled:t.registering},on:{click:t.register}},[s("v-icon",{attrs:{left:""}},[t._v(" mdi-account-plus ")]),t._v(" "+t._s(t.$t("App.hardcoded-texts.Sign Up"))+" ")],1)],1)],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:t.resetPasswordDialog,callback:function(e){t.resetPasswordDialog=e},expression:"resetPasswordDialog"}},[s("v-form",[s("v-card",[s("v-card-title",{staticClass:"white--text justify-center primary darken-1"},[s("v-icon",{attrs:{color:"white",left:""}},[t._v(" mdi-lock-reset ")]),t._v(" "+t._s(t.$t("App.hardcoded-texts.Reset Password"))+" ")],1),s("v-card-text",{staticClass:"px-12 pt-12"},[s("v-text-field",{attrs:{outlined:"",dense:"",type:"email",label:t.$t("App.hardcoded-texts.Email Address"),required:"","prepend-icon":"mdi-email"},model:{value:t.resetPasswordEmail,callback:function(e){t.resetPasswordEmail=e},expression:"resetPasswordEmail"}})],1),s("v-card-actions",[s("v-snackbar",{attrs:{absolute:t.absolute,color:"secondary"},model:{value:t.snackbarRegister,callback:function(e){t.snackbarRegister=e},expression:"snackbarRegister"}},[t._v(" "+t._s(t.message)+" "),s("v-btn",{attrs:{color:"warning",text:""},on:{click:function(e){t.snackbarRegister=!1}}},[t._v(t._s(t.$t("App.hardcoded-texts.Close")))])],1),s("v-spacer"),s("v-btn",{staticClass:"mr-8 mb-6 primary",attrs:{loading:t.registering,disabled:t.registering},on:{click:t.resetPassword}},[s("v-icon",{attrs:{left:""}},[t._v(" mdi-lock-reset ")]),t._v(" "+t._s(t.$t("App.hardcoded-texts.Reset Password"))+" ")],1)],1)],1)],1)],1),s("v-container",{staticClass:"lighten-1",attrs:{"fill-height":""}},[t.$store.state.user.loggedin?t._e():s("v-card-text",[s("v-row",{staticClass:"ma-0 pa-0 pt-12"},[s("v-col",{staticClass:"pt-12 pr-0",attrs:{md:t.$store.state.user.loggedin?12:6,align:"right",cols:"12"}},[s("v-card",{staticClass:"pa-4 pt-12",attrs:{"max-width":"600","min-height":"600"}},[s("v-card-title",{staticClass:"justify-center"},[s("v-img",{attrs:{src:"/images/iHRIS5LogoBig.png",align:"center",contain:"",justify:"center","max-height":"132","max-width":"150"}})],1),s("v-card-text",{attrs:{align:"center",justify:"center"}},[s("br"),s("h1",{staticClass:"mt-8 text--primary font-weight-bold text-lg-center"},[t._v(" "+t._s(t.$t("App.hardcoded-texts.Welcome to iHRIS!"))),s("br")]),s("br"),s("p",{staticClass:"pt-8 subtitle-1 text--primary font-weight-medium text-lg-justify"},[t._v(" "+t._s(t.$t("App.hardcoded-texts.iHRIS is IntraHealth International's free, open source software that helps countries around the world track and manage their health workforce data to improve access to services. Countries use it to capture and maintain high-quality information for health workforce planning, management, regulation, and training."))+" ")])])],1)],1),s("v-col",{staticClass:"pt-12 pl-0  ",attrs:{cols:"12",md:"6"}},[s("v-card",{staticClass:"primary  darken-1 white--text pa-10",attrs:{dark:"","max-width":"600","min-height":"600",raised:""}},[s("v-card-title",{staticClass:"justify-center mb-4"},[s("div",{staticClass:"white--text display-1"},[s("v-icon",{staticClass:"mr-2",attrs:{size:"48"}},[t._v("mdi-account-circle")]),t._v(t._s(t.$t("App.hardcoded-texts.Sign in"))),s("br")],1)]),s("v-card-text",{staticClass:"pt-8"},[s("v-form",[s("h4",{staticClass:"white--text"},[t._v(t._s(t.$t("App.hardcoded-texts.Username/Email")))]),s("v-text-field",{staticClass:"pt-1 white--text",attrs:{"background-color":"#0d3552",placeholder:t.$t("App.hardcoded-texts.Username/Email"),required:"",solo:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("h4",{staticClass:"white--text pt-2"},[t._v(t._s(t.$t("App.hardcoded-texts.Password")))]),s("v-text-field",{staticClass:"pt-1 white--text",attrs:{"append-icon":t.show_pass?"mdi-eye":"mdi-eye-off",type:t.show_pass?"text":"password","background-color":"#0d3552",placeholder:"****************",required:"",solo:""},on:{"click:append":function(e){t.show_pass=!t.show_pass}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-card-actions",[s("v-snackbar",{staticClass:"mb-8",attrs:{color:"secondary"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" "),s("v-btn",{attrs:{disabled:t.loggingin,loading:t.loggingin,color:"warning",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v(t._s(t.$t("App.hardcoded-texts.Close"))+" ")])],1),s("v-spacer"),s("v-btn",{attrs:{disabled:t.loggingin,loading:t.loggingin,light:""},on:{click:t.submit}},[t._v(t._s(t.$t("App.hardcoded-texts.Sign in")))])],1),s("v-card-actions",{staticClass:"mt-12"},[s("v-btn",{staticClass:"mx-2 text--white",staticStyle:{"text-transform":"none"},attrs:{outlined:"",color:"primary",text:""},on:{click:function(){e.resetPasswordDialog=!0}}},[t._v(" "+t._s(t.$t("App.hardcoded-texts.Forgot Password")))]),s("v-spacer"),"true"===this.$store.state.allowSelfSignup?s("v-btn",{staticClass:"mx-2 text--white",staticStyle:{"text-transform":"none"},attrs:{outlined:"",color:"primary",text:""},on:{click:function(){e.dialog=!0}}},[t._v(" "+t._s(t.$t("App.hardcoded-texts.No account? Sign Up"))+" ")]):t._e()],1)],1)],1)],1)],1)],1)],1)},Ae=[],Le={name:"Home",data(){return{username:"",password:"",show_pass:!1,loggingin:!1,message:"",snackbar:!1,snackbarRegister:!1,absolute:!0,auth:{},dialog:!1,email:"",birthDate:null,menu:!1,employeeNumber:"",registering:!1,resetPasswordDialog:!1,resetPasswordEmail:""}},created:function(){fetch("/config/site").then((e=>{e.json().then((e=>{e.hasOwnProperty("canSelfSignup")&&this.$store.commit("setAllowSelfSignup",e.canSelfSignup)}))}))},methods:{saveDate(e){this.$refs.menu.save(e)},submit(){this.loggingin=!0;let e=new URLSearchParams;e.append("username",this.username),e.append("password",this.password),0===this.username.length||0===this.password.length?(this.message=this.$t("App.hardcoded-texts.Both Username and password are required"),this.snackbar=!0,this.loggingin=!1):fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((e=>{this.loggingin=!1,e.ok?e.json().then((e=>{this.snackbar=!0,this.message=this.$t("App.hardcoded-texts.Login successfull"),this.$emit("loggedin",e.user),location.reload()})).catch((e=>{this.loggingin=!1,this.snackbar=!0,this.message=e.message})):(this.message=this.$t("App.hardcoded-texts.Username or password is incorrect!"),this.snackbar=!0,this.loggingin=!1)})).catch((e=>{console.log(e),this.loggingin=!1,this.snackbar=!0,this.message=this.$t("App.hardcoded-texts.Login failed: ")+e.message}))},resetPassword(){this.loggingin=!0;let e=new URLSearchParams;e.append("email",this.resetPasswordEmail);let t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;""===this.resetPasswordEmail?(this.message=this.$t("App.hardcoded-texts.Email Field is required!"),this.snackbarRegister=!0,this.signingin=!1):this.resetPasswordEmail.match(t)?fetch("/auth/password-reset-request",{method:"POST",body:e}).then((e=>e.json())).then((e=>{this.loggingin=!1,e.ok?(console.log(e),this.message=e.message,this.snackbar=!0,setTimeout((()=>{this.resetPasswordDialog=!1,this.$router.push("/")}),1e3)):(this.message=e.message,this.snackbar=!0)})).catch((e=>{this.loggingin=!1,this.message=e,this.snackbar=!0})):(this.message=this.$t("App.hardcoded-texts.Please enter a valid email"),this.snackbarRegister=!0,this.signingin=!1)},register(){this.signingin=!0;let e=new URLSearchParams;if(e.append("username",this.email),e.append("employeeNumber",this.employeeNumber),e.append("birthDate",this.birthDate),""===this.email||""===this.employeeNumber||""===this.birthDate)this.message=this.$t("App.hardcoded-texts.Please fill in all fields"),this.snackbarRegister=!0,this.signingin=!1;else{let e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;this.email.match(e)||(this.message=this.$t("App.hardcoded-texts.Please enter a valid email"),this.snackbarRegister=!0,this.signingin=!1)}!1!==this.signingin&&(console.log("this is the data",e),fetch("/auth/signup/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then((e=>{this.signingin=!1,e.ok?e.json().then((e=>{console.log("data",e),this.snackbarRegister=!0,this.message=this.$t("App.hardcoded-texts.Sign up successful! Please login to continue"),setTimeout((()=>{this.dialog=!1,this.$router.push("/")}),1e3)})).catch((e=>{this.signingin=!1,this.snackbarRegister=!0,this.message=e.message})):(409===e.status&&(this.message=this.$t("App.hardcoded-texts.User already exists with this email address!"),this.snackbarRegister=!0,this.signingin=!1),404===e.status&&(this.message=this.$t("App.hardcoded-texts.No practitioner found with given information"),this.snackbarRegister=!0,this.signingin=!1),402===e.status&&(this.message=this.$t("App.hardcoded-texts.Email does not match with registered practitioner email"),this.snackbarRegister=!0,this.signingin=!1),403===e.status&&(this.message=this.$t("App.hardcoded-texts.No Email found for this practitioner. please add your email first!"),this.snackbarRegister=!0,this.signingin=!1))})).catch((e=>{this.signingin=!1,this.snackbarRegister=!0,this.message=this.$t("App.hardcoded-texts.Sign Up failed: ")+e.message})))}}},Pe=Le,Se=a(2102),Ie=a(4228),Oe=a(9771),Te=(0,_.Z)(Pe,Ve,Ae,!1,null,"7ac35e8b",null),Ee=Te.exports;x()(Te,{VBtn:C.Z,VCard:R.Z,VCardActions:D.h7,VCardText:D.ZB,VCardTitle:D.EB,VCol:Se.Z,VContainer:Ie.Z,VDatePicker:Oe.Z,VDialog:G.Z,VForm:X.Z,VIcon:$.Z,VImg:Z.Z,VMenu:S.Z,VRow:fe.Z,VSnackbar:ee.Z,VSpacer:B.Z,VTextField:te.Z});var je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[e.rawHTML?a("v-card",[e.title?a("v-card-title",{staticClass:"primary white--text",attrs:{dark:"","primary-title":""}},[a("h2",[e._v(e._s(e.title))])]):e._e(),a("v-card-text",{staticClass:"pa-5"},[a("div",{domProps:{innerHTML:e._s(e.rawHTML)}})])],1):e._e()],1)},Re=[],De={name:"static-page",props:["id","blank-on-err"],data:function(){return{rawHTML:null,title:"Loading..."}},created:function(){this.blankOnErr||(this.rawHTML="Loading..."),fetch("/fhir/DocumentReference/"+(this.id||this.$route.params.id)+"/$html").then((e=>{e.ok?e.json().then((e=>{this.rawHTML=e.html,this.title=e.title})).catch((e=>{console.log(e),this.blankOnErr?this.rawHTML=null:(this.title="Error",this.rawHTML="<p>Failed to access requested resource.</p>")})):this.blankOnErr?this.rawHTML=null:(this.title="Error",this.rawHTML="<p>Failed to access requested resource.</p>")})).catch((e=>{console.log(e),this.blankOnErr?this.rawHTML=null:(this.title="Error",this.rawHTML="<p>Failed to access requested resource.</p>")}))}},Me=De,Ne=(0,_.Z)(Me,je,Re,!1,null,null,null),Be=Ne.exports;x()(Ne,{VCard:R.Z,VCardText:D.ZB,VCardTitle:D.EB,VContainer:Ie.Z});var He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e.$store.state.user.loggedin?a("v-container",[a("v-row",[e._l(e.menu,(function(t,s){return[a("v-col",{key:t.id,attrs:{cols:"4"}},[a("v-card",{staticClass:"md ma-2",attrs:{shaped:""}},[a("v-card-title",{staticClass:"primary white--text subtitle font-weight-bold text-uppercase",class:e.colors[s%e.colors.length],attrs:{"prepend-icon":t.icon,dark:""}},[a("v-icon",{attrs:{dark:""}},[e._v(e._s(t.icon))]),e._v(" "+e._s(e.$t("App.menu."+t.text))+" ")],1),a("v-card-text",[t.menu?a("v-list",e._l(t.menu,(function(t){return a("v-list-item",{key:t.id,attrs:{to:t.url}},[a("v-list-item-title",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("App.menu."+t.text)))])],1)})),1):a("v-list",[a("v-list-item",{key:t.id,attrs:{to:t.url}},[a("v-list-item-title",{staticClass:"font-weight-bold"},[e._v(e._s(e.$t("App.menu."+t.text)))])],1)],1)],1)],1)],1)]}))],2)],1):e._e()],1)},qe=[],Fe={name:"HomeNav",props:["nav"],mounted:function(){this.updateMenu()},watch:{nav:{handler(){this.updateMenu()},deep:!0}},data:function(){return{menu:[],colors:["accent","success","warning","info","error","secondary","primary darken-1","primary darken-2","secondary darken-1"]}},methods:{updateMenu:function(){this.menu=[];for(let e of Object.keys(this.nav.menu)){let t={};if(t={id:e,text:this.nav.menu[e].text,icon:this.nav.menu[e].icon,order:this.nav.menu[e].order},this.nav.active===e?t.active=!0:t.active=!1,this.nav.menu[e].menu){t.menu=[];for(let a of Object.keys(this.nav.menu[e].menu)){let s={id:a,text:this.nav.menu[e].menu[a].text,url:this.nav.menu[e].menu[a].url,order:this.nav.menu[e].menu[a].order};t.menu.push(s),t.menu.sort(((e,t)=>e.text===t.text?0:e.text<t.text?-1:1))}}else this.nav.menu[e].url&&(t.url=this.nav.menu[e].url);this.menu.push(t)}this.menu.sort(((e,t)=>Number(e.order)===Number(t.order)?0:Number(e.order)<Number(t.order)?-1:1))}}},Ue=Fe,ze=(0,_.Z)(Ue,He,qe,!1,null,null,null),Ye=ze.exports;x()(ze,{VCard:R.Z,VCardText:D.ZB,VCardTitle:D.EB,VCol:Se.Z,VContainer:Ie.Z,VIcon:$.Z,VList:V.Z,VListItem:A.Z,VListItemTitle:P.V9,VRow:fe.Z}),s["default"].use(Ze.Z);const We=[{path:"/",name:"home",components:{default:Ee,homeNav:Ye},props:{default:{id:"page-home",blankOnErr:!0}}},{path:"/reset-password",name:"reset-password",component:()=>a.e(564).then(a.bind(a,794))},{path:"/change-password",name:"change-password",component:()=>a.e(21).then(a.bind(a,8917))},{path:"/page/blockContacts",name:"mhero",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,6525))},{path:"/page/unblockContacts",name:"mhero",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,9264))},{path:"/page/mhero",name:"mhero",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,2618))},{path:"/page/mhero-scheduled-message",name:"mhero-scheduled-message",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,4284))},{path:"/page/contact-groups",name:"contact-groups",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,2322))},{path:"/page/mhero-reports",name:"mhero-reports-base",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,582))},{path:"/report/:report",name:"mhero-reports",component:()=>Promise.all([a.e(986),a.e(724),a.e(410)]).then(a.bind(a,2060))},{path:"/static/:id",name:"static",component:Be},{path:"/resource/view/:page/:id",name:"resource_view",component:()=>a.e(105).then(a.bind(a,6997))},{path:"/resource/search/:page",name:"resource_search",component:()=>a.e(105).then(a.bind(a,1654))},{path:"/resource/report/:report",name:"resource_report",component:()=>a.e(983).then(a.bind(a,8275))},{path:"/resource/add/:page",name:"resource_add",component:()=>a.e(857).then(a.bind(a,121))},{path:"/questionnaire/:questionnaire/:page",name:"questionnaire",component:()=>a.e(620).then(a.bind(a,4176))},{path:"/custom/:path/:component",name:"custom_components",component:()=>a.e(289).then(a.bind(a,4770))},{path:"/apps",name:"apps",component:()=>a.e(55).then(a.bind(a,7955))},{path:"/install-app",name:"install-app",component:()=>a.e(123).then(a.bind(a,3981))},{path:"/uninstall-app",name:"uninstall-app",component:()=>a.e(757).then(a.bind(a,6441))},{path:"/dashboard/:id",name:"dashboard",component:()=>a.e(966).then(a.bind(a,2562))},{path:"/bulk-registration",name:"bulk_registration",component:()=>a.e(620).then(a.bind(a,9276))}],Je=new Ze.Z({mode:"history",base:"/",routes:We});var Ke=Je,Ge=a(2385),Qe=a(3431),Xe=a.n(Qe),et=a(9132);s["default"].use(et.Z);var tt=new et.Z({theme:{options:{customProperties:!0},themes:{light:{primary:{base:"#569fd3",darken1:"0d3552",darken2:"011b2d",lighten1:"ddecf6",lighten2:"f4f7f9"},secondary:{base:"#5f6062",darken1:"04070e",lighten1:"e5e5e5"},accent:"#78496a",error:"#b32317",info:"#005595",success:"#8a8d35",warning:"#d06f1a"}}}}),at=(a(7147),a(9887)),st=a.n(at);a(6699),a(1703);const nt=a(9887),it={_code_cache:{},_code_loading:{},_setCache:(e,t)=>(it._code_cache[e]=t,it._code_loading[e]=!1,t),checkConstraints:(e,t,a,s,n)=>(console.log(e),new Promise(((i,r)=>{let o=e.split(","),l=[];for(let e of o)if(t[e]){let i=nt.evaluate(a,t[e].expression);if(e.startsWith("ihris-search")){let a=i.shift(),r=["_elements=id"];while(i.length)r.push(i.shift()+"="+encodeURI(i.shift()));l.push(new Promise(((i,o)=>{fetch("/fhir/"+a+"?"+r.join("&")).then((a=>{200===a.status?a.json().then((a=>{if(0===a.total)i(!0);else if(n){let r=nt.evaluate(a.entry,"resource.id");r.includes(n)?i(!0):(s.push(t[e].human),i(!1))}else s.push(t[e].human),i(!1)})).catch((e=>{o(e)})):o("Failed to search: "+a.status)})).catch((e=>{o(e)}))})))}else i.every(Boolean)?l.push(!0):(s.push(t[e].human),l.push(!1))}Promise.all(l).then((e=>{e.every(Boolean)?i(!0):i(!1)})).catch((e=>{r(e)}))}))),lookup:(e,t)=>e?t?it.codeLookup(t,e):e.system&&e.code?it.codeLookup(e.system,e.code):e.reference?it.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?it.resourceLookup(e):new Promise((t=>t(e))):new Promise((t=>t(e))),resourceLookup:e=>new Promise((t=>{let a=e;it._code_loading[a]?setTimeout((()=>{t(it.resourceLookup(e))}),200):it._code_cache[a]?t(it._code_cache[a]):(it._code_loading[a]=!0,fetch("/fhir/$short-name?reference="+e).then((s=>{200===s.status?s.json().then((s=>{s.display?t(it._setCache(a,s.display)):(console.log("No display data from reference found ",a,s),t(it._setCache(a,e)))})).catch((s=>{console.log(s),t(it._setCache(a,e))})):(console.log("Invalid status from reference $short-name for ",a),t(it._setCache(a,e)))})).catch((s=>{console.log(s),t(it._setCache(a,e))})))})),codeLookup:(e,t,a)=>new Promise((s=>{let n=e+"#"+t;it._code_loading[n]?setTimeout((()=>{s(it.codeLookup(e,t,a))}),200):it._code_cache[n]?s(it._code_cache[n]):(it._code_loading[n]=!0,fetch("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+a).then((e=>{200===e.status?e.json().then((e=>{e.display?s(it._setCache(n,e.display)):(console.log("No display data from codesystem found ",n,e),s(it._setCache(n,t)))})).catch((e=>{console.log(e),s(it._setCache(n,t))})):(console.log("Invalid status from codesystem $short-name for ",n),s(it._setCache(n,t)))})).catch((e=>{console.log(e),s(it._setCache(n,t))})))})),pathFieldExpression:e=>{let t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:e=>{const t=(e,t)=>e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1,a=(e,t)=>{if(e.compose.include)for(let a of e.compose.include)if(a.concept)for(let e of a.concept)e.system=a.system,t.push(e)};return new Promise(((s,n)=>{let i=e.lastIndexOf("/"),r=e.lastIndexOf("|"),o=e.slice(i+1,-1!==r?r:e.length),l=[];fetch("/fhir/ValueSet/"+o+"/$expand").then((e=>{e.ok?e.json().then((e=>{try{e.expansion&&0!==e.expansion.total||!e.compose.include?l=e.expansion.contains:a(e,l),l.sort(t),s(l)}catch(i){console.log(i),n(new Error("Invalid response from server."))}})).catch((e=>{n(e)})):fetch("/fhir/ValueSet/"+o).then((e=>{e.ok?e.json().then((e=>{a(e,l),l.sort(t),s(l)})).catch((e=>{n(e)})):n(new Error("Invalid response from server."))})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}};var rt=it;const ot=a(4230);s["default"].config.productionTip=!1,Object.defineProperty(s["default"].prototype,"$fhirpath",{value:st()}),Object.defineProperty(s["default"].prototype,"$fhirutils",{value:rt}),s["default"].use(a(2513));const lt=new s["default"];s["default"].use(Xe(),{eventEmitter:lt,store:f,idleTime:9e5,startAtIdle:!1}),fetch("/config/app").then((e=>{e.json().then((e=>{if(f.state.idp=e.idp,"keycloak"===f.state.idp){let t={realm:e.keycloak.realm,clientId:e.keycloak.UIClientId,url:e.keycloak.baseURL,onLoad:"login-required"},a=Ge(t);const n={install(e){e.$keycloak=a}};n.install=e=>{e.$keycloak=a,Object.defineProperties(e.prototype,{$keycloak:{get(){return a}}})},s["default"].use(n),a.init({onLoad:t.onLoad}).then((e=>{e?(window.fetch=ot(fetch,{headers:{Authorization:`Bearer ${a.token}`}}),a.loadUserInfo().then((e=>{let t={resourceType:"Person",id:e.sub,meta:{profile:["http://ihris.org/fhir/StructureDefinition/ihris-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(t.telecom=[{system:"email",value:e.email}]),fetch("/auth",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((e=>{e.json().then((e=>{c().set("userObj",JSON.stringify(e),"infinity"),new s["default"]({router:Ke,store:f,i18n:v,vuetify:tt,render:e=>e($e)}).$mount("#app")}))})).catch((e=>{console.error(e)}))})),setInterval((()=>{a.updateToken(70)}),6e4)):window.location.reload()})).catch((e=>{console.log(e),alert("Keycloak access failed")}))}else s["default"].prototype.$keycloak=null,new s["default"]({router:Ke,store:f,vuetify:tt,i18n:v,render:e=>e($e)}).$mount("#app")}))}))}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,s,n,i){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],i=e[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+({21:"change-password",55:"apps",105:"resource",123:"install-app",242:"fhir-search",251:"fhir-main",269:"fhir-outcome",276:"ihris-es-search-term",289:"custom",305:"fhir-decimal",364:"fhir-name",384:"fhir-secondary",410:"mhero",564:"reset-password",620:"questionnaire",657:"fhir-primary",757:"uninstall-app",844:"ihris-es-report",857:"resource-add",902:"fhir-codesystem",926:"fhir-questionnaire",966:"dashboard",983:"report"}[e]||e)+"."+{21:"543c28b4",55:"79f94f66",105:"bbaa3b1f",123:"46b4bb1d",242:"a9d95eae",251:"4b375286",269:"70fff917",276:"9e03ca0a",289:"13be64ab",305:"7389f1fc",364:"b2a4cb76",384:"233f1fa9",410:"ca6e25dc",482:"d09033c5",564:"470cdd44",620:"26e81216",657:"458ffa2a",721:"6b2126ce",724:"c799bc33",757:"71b2a0db",844:"26703ecc",857:"59fa571f",902:"b9557b89",926:"36aa2fa6",966:"aa8bad93",983:"1cbbb3d0",986:"5b644035"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+({55:"apps",123:"install-app",242:"fhir-search",251:"fhir-main",384:"fhir-secondary",410:"mhero",620:"questionnaire",657:"fhir-primary",757:"uninstall-app",844:"ihris-es-report",902:"fhir-codesystem",926:"fhir-questionnaire"}[e]||e)+"."+{55:"08808948",123:"1fb00c23",242:"0e189b93",251:"bfd68946",384:"3505d4d9",410:"26a1d6e6",482:"1e6b27e7",620:"f1210498",657:"31640ad8",724:"8269b7bb",757:"08808948",844:"baafd5fd",902:"023803bb",926:"30e669a2"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="iHRIS-v5:";a.l=function(s,n,i,r){if(e[s])e[s].push(n);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+i){o=u;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+i),o.src=s),e[s]=[n];var h=function(t,a){o.onerror=o.onload=null,clearTimeout(p);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e=function(e,t,a,s){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var i=function(i){if(n.onerror=n.onload=null,"load"===i.type)a();else{var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,n.parentNode.removeChild(n),s(l)}};return n.onerror=n.onload=i,n.href=t,document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var n=a[s],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===e||i===t))return n}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){n=r[s],i=n.getAttribute("data-href");if(i===e||i===t)return n}},s=function(s){return new Promise((function(n,i){var r=a.miniCssF(s),o=a.p+r;if(t(r,o))return n();e(s,o,n,i)}))},n={143:0};a.f.miniCss=function(e,t){var a={55:1,123:1,242:1,251:1,384:1,410:1,482:1,620:1,657:1,724:1,757:1,844:1,902:1,926:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=s(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}(),function(){var e={143:0};a.f.j=function(t,s){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(a,s){n=e[t]=[a,s]}));s.push(n[2]=i);var r=a.p+a.u(t),o=new Error,l=function(s){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,n[1](o)}};a.l(r,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(4972)}));s=a.O(s)})();
//# sourceMappingURL=app.6553a289.js.map