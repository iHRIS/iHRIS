"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[9872],{2245:function(){},83702:function(t,e,i){i.d(e,{Z:function(){return r}});i(2245);var a=i(70172),n=i(58230),s=i(7764),r=s.Z.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...n.Z.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(a.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},89155:function(t,e,i){var a=i(46286),n=i(70538);e["Z"]=n["default"].extend({name:"rippleable",directives:{ripple:a.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},7764:function(t,e,i){i.d(e,{X:function(){return o}});var a=i(58230),n=i(89155),s=i(34419),r=i(73325);function o(t){t.preventDefault()}e["Z"]=(0,r.Z)(a.Z,n.Z,s.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=a.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:o},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:o},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}})},19872:function(t,e,i){i.r(e),i.d(e,{default:function(){return A}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"grid-list-xs":""}},[i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.push("/resource/view/bwpractitioner/"+t.queries.practitioner)}}},[i("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-eye")]),i("span",[t._v("View Health Profession")])],1)],1)],1),i("v-list",{staticClass:"white--text"},[i("v-list-item",[i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(-1)}}},[i("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-eye")]),i("span",[t._v("Go back")])],1)],1)],1)],1),i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:" justify-center darken-1 primary white--text text-uppercase font-weight-bold"},[t._v(" License Renewal Application ")]),i("v-card-text",{staticClass:"my-3"},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-text-field",t._g({attrs:{disabled:t.hasPendingApplication,label:"Application Date*","prepend-inner-icon":"mdi-calendar",readonly:"",rules:t.applicationdaterules,outlined:"","hide-details":"auto",dense:""},model:{value:t.applicationDateFormatted,callback:function(e){t.applicationDateFormatted=e},expression:"applicationDateFormatted"}},a))]}}]),model:{value:t.applicationDateMenu,callback:function(e){t.applicationDateMenu=e},expression:"applicationDateMenu"}},[i("v-date-picker",{attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp},on:{change:function(e){t.applicationDateFormatted=t.formatDate(t.applicationDate)},input:function(e){t.applicationDateMenu=!1}},model:{value:t.applicationDate,callback:function(e){t.applicationDate=e},expression:"applicationDate"}})],1),t._v(" Select registration numbers to renew "),t._l(t.registrations,(function(e){return i("v-checkbox",{key:e.id,attrs:{disabled:t.hasPendingApplication,dense:"",label:e.text,value:e.id},model:{value:t.selectedRegs,callback:function(e){t.selectedRegs=e},expression:"selectedRegs"}})}))],2),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"success",disabled:!t.canSubmit},on:{click:t.apply}},[t._v("Apply")])],1)],1)],1)},n=[];const s=i(17673);var r={props:["queries"],data(){return{overlay:!1,registrations:[],selectedRegs:[],applicationDate:"",applicationDateFormatted:"",applicationDateMenu:!1,errors:{applicationdate:[]},hasPendingApplication:!1}},computed:{applicationdaterules(){return[t=>(this.errors.applicationdate=[],!!t||(this.errors.applicationdate=["Application date is required"],"Application date is required"))]},canSubmit(){return!!(this.selectedRegs.length>0&&this.applicationDate)}},methods:{formatDate(t){if(!t)return null;const[e,i,a]=t.split("-");return`${a}-${i}-${e}`},checkPendingApplication(){let t={_profile:"http://ihris.org/fhir/StructureDefinition/nmcb-license-renewal-application-profile",practitioner:"Practitioner/"+this.queries.practitioner,"nmcbrenewalstatus:not":"renewalapproved,renewalrejected"};fetch("/fhir/Basic?"+s.stringify(t)).then((t=>{t.json().then((t=>{t.entry&&t.entry.length>0&&(this.$store.commit("setMessage",{type:"error",text:"You have a pending license renewal application."}),this.hasPendingApplication=!0)}))}))},getRegistrations(){let t={_profile:"http://ihris.org/fhir/StructureDefinition/nmcb-registration-profile",practitioner:"Practitioner/"+this.queries.practitioner};fetch("/fhir/Basic?"+s.stringify(t)).then((t=>{t.json().then((t=>{if(t.entry&&0!==t.entry.length)for(let e of t.entry){let t=e.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/registration-number"===t.url));t&&this.registrations.push({text:t.valueString,id:e.resource.id})}}))}))},apply(){let t={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual",body:JSON.stringify({registrations:this.selectedRegs,applicationDate:this.applicationDate,practitioner:this.queries.practitioner})};this.overlay=!0,fetch("/site/nmcb/licenseRenewal",t).then((t=>{this.overlay=!1,201===t.status?this.$store.commit("setMessage",{type:"success",text:"License Renewal Application Submitted"}):this.$store.commit("setMessage",{type:"error",text:"Failed To Submit License Renewal."}),this.$router.go(-1)})).catch((()=>{this.overlay=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Submit License Renewal."})}))}},created(){this.checkPendingApplication(),this.getRegistrations()}},o=r,l=i(43736),c=i(43453),u=i.n(c),p=i(63150),h=i(32371),d=i(37118),m=i(83702),v=i(4228),f=i(89771),g=i(96428),y=i(16816),b=i(97620),k=i(41152),x=i(65132),C=i(51058),V=i(90624),D=i(99762),S=i(55978),w=(0,l.Z)(o,a,n,!1,null,null,null),A=w.exports;u()(w,{VBtn:p.Z,VCard:h.Z,VCardActions:d.h7,VCardText:d.ZB,VCardTitle:d.EB,VCheckbox:m.Z,VContainer:v.Z,VDatePicker:f.Z,VIcon:g.Z,VList:y.Z,VListItem:b.Z,VMenu:k.Z,VNavigationDrawer:x.Z,VOverlay:C.Z,VProgressCircular:V.Z,VSpacer:D.Z,VTextField:S.Z})}}]);
//# sourceMappingURL=9872.84f5d1f6.js.map