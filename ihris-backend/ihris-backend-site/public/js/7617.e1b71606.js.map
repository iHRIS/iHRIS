{"version":3,"file":"js/7617.e1b71606.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/site/itsf/print_id.vue?5787","webpack://iHRIS-v5/src/site/itsf/print_id.vue","webpack://iHRIS-v5/./src/site/itsf/print_id.vue?67d8","webpack://iHRIS-v5/./src/site/itsf/print_id.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"py-5\"},[_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}})],1),_c('v-card',[_c('v-card-title',[_vm._v(\" Registrations For Year \"+_vm._s(_vm.academicYear)+\" \"),_c('v-spacer')],1),_c('v-card-title',[_c('v-select',{staticClass:\"ma-2\",attrs:{\"items\":_vm.status,\"label\":\"Status\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('status')}},model:{value:(_vm.search.status),callback:function ($$v) {_vm.$set(_vm.search, \"status\", $$v)},expression:\"search.status\"}}),_c('v-text-field',{staticClass:\"ma-2\",attrs:{\"label\":\"Name\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('name')}},model:{value:(_vm.search.name),callback:function ($$v) {_vm.$set(_vm.search, \"name\", $$v)},expression:\"search.name\"}}),_c('v-text-field',{staticClass:\"ma-2\",attrs:{\"label\":\"Registration Number\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('regnum')}},model:{value:(_vm.search.regnum),callback:function ($$v) {_vm.$set(_vm.search, \"regnum\", $$v)},expression:\"search.regnum\"}}),_c('v-select',{staticClass:\"ma-2\",attrs:{\"items\":_vm.streams,\"label\":\"Stream\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"item-text\":\"display\",\"item-value\":\"code\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.buildTerms()},\"click:clear\":function($event){return _vm.clearSearch('stream')}},model:{value:(_vm.search.stream),callback:function ($$v) {_vm.$set(_vm.search, \"stream\", $$v)},expression:\"search.stream\"}})],1),(_vm.error_message)?_c('v-card-subtitle',{staticClass:\"white--text error\"},[_vm._v(_vm._s(_vm.error_message))]):_vm._e(),_c('v-card-text',[_c('v-data-table',{staticClass:\"elevation-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"headers\":_vm.headers,\"items\":_vm.results,\"item-key\":\"id\",\"options\":_vm.options,\"server-items-length\":_vm.total,\"footer-props\":{ 'items-per-page-text':_vm.$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] },\"loading\":_vm.loading},on:{\"update:options\":function($event){_vm.options=$event}},scopedSlots:_vm._u([{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{attrs:{\"color\":_vm.getColor(item.status),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(item.status)+\" \")])]}},{key:\"item.action\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.role == 'itsf-id-card-manager')?_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.printid(item.practitioner)}}},[_vm._v(\"Print ID\")]):_vm._e(),_vm._v(\" \"),(_vm.role == 'itsf-id-card-manager')?[_vm._v(\"|\")]:_vm._e(),_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.clickIt(item)}}},[_vm._v(\"View\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"py-5\">\n    <v-overlay :value=\"overlay\">\n      <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n      ></v-progress-circular>\n    </v-overlay>\n    <v-card>\n      <v-card-title>\n        Registrations For Year {{ academicYear }}\n        <v-spacer></v-spacer>\n      </v-card-title>\n      <v-card-title>\n        <v-select\n          :items=\"status\"\n          v-model=\"search.status\"\n          label=\"Status\"\n          outlined\n          dense\n          class=\"ma-2\"\n          hide-details\n          clearable\n          @change=\"buildTerms()\"\n          @click:clear=\"clearSearch('status')\"\n        ></v-select>\n        <v-text-field label=\"Name\" class=\"ma-2\" v-model=\"search.name\" dense outlined hide-details clearable @change=\"buildTerms()\" @click:clear=\"clearSearch('name')\" />\n        <v-text-field label=\"Registration Number\" class=\"ma-2\" v-model=\"search.regnum\" dense outlined hide-details clearable @change=\"buildTerms()\" @click:clear=\"clearSearch('regnum')\" />\n        <v-select\n          :items=\"streams\"\n          v-model=\"search.stream\"\n          label=\"Stream\"\n          outlined\n          dense\n          class=\"ma-2\"\n          hide-details\n          item-text=\"display\"\n          item-value=\"code\"\n          clearable\n          @change=\"buildTerms()\"\n          @click:clear=\"clearSearch('stream')\"\n        ></v-select>\n      </v-card-title>\n      <v-card-subtitle\n        v-if=\"error_message\"\n        class=\"white--text error\"\n      >{{ error_message }}</v-card-subtitle>\n      <v-card-text>\n        <v-data-table\n          style=\"cursor: pointer\"\n          :headers=\"headers\"\n          :items=\"results\"\n          item-key=\"id\"\n          :options.sync=\"options\"\n          :server-items-length=\"total\"\n          :footer-props=\"{ 'items-per-page-text':$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] }\"\n          :loading=\"loading\"\n          class=\"elevation-1\"\n        >\n          <template v-slot:item.status=\"{ item }\">\n            <v-chip\n              :color=\"getColor(item.status)\"\n              dark\n            >\n              {{ item.status }}\n            </v-chip>\n          </template>\n          <template v-slot:item.action=\"{ item }\">\n            <v-btn color=\"primary\" v-if=\"role == 'itsf-id-card-manager'\" small @click=\"printid(item.practitioner)\">Print ID</v-btn> <template v-if=\"role == 'itsf-id-card-manager'\">|</template> \n            <v-btn color=\"primary\" small @click=\"clickIt(item)\">View</v-btn>\n          </template>\n        </v-data-table>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: function() {\n    return {\n      streams: [],\n      status: [{\n        text: \"Not Printed\",\n        value: false\n      }, {\n        text: \"Printed\",\n        value: true\n      }],\n      search: {\n        status: '',\n        name: '',\n        regnum: '',\n        stream: \"\"\n      },\n      debug: \"\",\n      terms: {},\n      headers: [{\n        text: \"Registration Number\",\n        value: \"regnum\"\n      }, {\n        text: \"Surname\",\n        value: \"surname\"\n      }, {\n        text: \"Given Name(s)\",\n        value: \"given\"\n      }, {\n        text: \"Stream\",\n        value: \"stream\"\n      }, {\n        text: \"Accomodation\",\n        value: \"accomodation\"\n      }, {\n        text: \"Paid\",\n        value: \"paid\"\n      }, {\n        text: \"Status\",\n        value: \"status\"\n      }, {\n        text: \"Action\",\n        value: \"action\"\n      }],\n      results: [],\n      options: { itemsPerPage: 10 },\n      loading: false,\n      total: 0,\n      prevPage: -1,\n      link: [],\n      error_message: null,\n      update_again: { rerun: false, restart: false },\n      startDate: \"\",\n      endDate: \"\",\n      academicYear: \"\",\n      overlay: false,\n    };\n  },\n  watch: {\n    options: {\n      handler() {\n        this.getData();\n      },\n      deep: true\n    }\n  },\n  mounted: function() {\n    this.getData(true);\n  },\n  computed: {\n    role() {\n      let role = this.$store.state.user.obj.resource.extension.find((ext) => {\n        return ext.url === 'http://ihris.org/fhir/StructureDefinition/ihris-assign-role'\n      }).valueReference.reference\n      return role.split(\"/\")[1]\n    }\n  },\n  methods: {\n    printid(id) {\n      this.overlay = true\n      fetch(\"/site/student/printId/\" + id).then((response) =>{\n        response.blob().then((blob) => {\n          fetch(\"/fhir/Practitioner/\" + id).then((response) => {\n            response.json().then((pract) => {\n              this.overlay = false\n              let fullname = \"\"\n              let name = pract.name.find((nm) => {\n                nm.use === \"official\"\n              })\n              if(!name && pract.name && pract.name.length > 0) {\n                name = pract.name[0]\n              }\n              if(name) {\n                if(name.given) {\n                  if(fullname) {\n                    fullname += \" \"\n                  }\n                  fullname += name.given.join(\" \")\n                }\n                if(name.family) {\n                  if(fullname) {\n                    fullname += \" \"\n                  }\n                  fullname += name.family\n                }\n              }\n              let link = document.createElement(\"a\");\n              link.href = window.URL.createObjectURL(blob);\n              link.download = `${fullname}.pdf`;\n              link.click();\n            }).catch(() => {\n              this.overlay = false\n            })\n          }).catch(() => {\n              this.overlay = false\n            })\n        }).catch(() => {\n          this.overlay = false\n        })\n      }).catch(() => {\n        this.overlay = false\n      })\n    },\n    getColor(status) {\n      if(status === \"Not Printed\") {\n        return \"warning\"\n      } else if(status === \"Printed\") {\n        return \"success\"\n      }\n      return \"grey\"\n    },\n    clearSearch: function(field) {\n      this.search[field] = ''\n      this.buildTerms()\n    },\n    clickIt: function(record) {\n      this.$router.push(\"/custom/registration_view?path=/itsf&role=\" + record.id + '&practitioner=' + record.practitioner);\n    },\n    checkRerun() {\n      if ( !this.loading && this.update_again.rerun ) {\n        this.getData( this.update_again.restart )\n        this.update_again = { rerun: false, restart: false }\n      }\n    },\n    async buildTerms() {\n      this.terms = {}\n      if(this.search.name || this.search.regnum) {\n        await this.searchPractitioner()\n      }\n      if(this.search.status || this.search.status === false) {\n        if(!this.search.status) {\n          this.terms[\"idprinted:not\"] = true\n        } else {\n          this.terms[\"idprinted\"] = this.search.status\n        }\n      }\n      if(this.search.stream) {\n        this.terms[\"stream\"] = this.search.stream\n      }\n      this.getData(true);\n    },\n    searchPractitioner() {\n      return new Promise((resolve, reject) => {\n        let search = \"\"\n        if(this.search.regnum) {\n          search = \"regnum=\" + this.search.regnum\n        }\n        if(this.search.name) {\n          if(search) {\n            search += \"&name:contains=\" + this.search.name\n          } else {\n            search = \"name:contains=\" + this.search.name\n          }\n        }\n        let url = \"/fhir/Practitioner?\" + search\n        fetch(url).then(response => {\n          response.json().then(async (data) => {\n            if(data.entry) {\n              for (let entry of data.entry) {\n                this.terms[\"practitioner\"] = \"Practitioner/\" + entry.resource.id\n              }\n            } else {\n              this.terms[\"practitioner\"] = \"Practitioner\"\n            }\n            resolve()\n          }).catch(() => {\n            reject()\n          })\n        }).catch(() => {\n          reject()\n        })\n      })\n    },\n    getData(restart) {\n      //console.log(\"getting data\",restart)\n      if ( this.loading ) {\n        this.update_again.rerun = true\n        this.update_again.restart = this.update_again.restart || restart\n        return\n      }\n      this.loading = true;\n      this.error_message = null;\n      let url = \"\";\n      if (restart) this.options.page = 1;\n      if (this.options.page > 1) {\n        if (this.options.page === this.prevPage - 1) {\n          url = this.link.find(link => link.relation === \"previous\").url;\n        } else if (this.options.page === this.prevPage + 1) {\n          url = this.link.find(link => link.relation === \"next\").url;\n        }\n\n        url = url.replace(\"/fhir?\",\"/fhir/PractitionerRole?\")\n        url = url.substring(url.indexOf(\"/fhir/\"));\n        //some of the hapi instances requires _total=accurate to always be available for them to return total resources\n        if(url.indexOf('_sort=_lastUpdated') === -1) {\n          url = url + '&_sort=_lastUpdated'\n        }\n        if(url.indexOf('_total=accurate') === -1) {\n          url = url + '&_total=accurate'\n        }\n        // url += \"&date=\" + this.endDate\n      }\n      if (url === \"\") {\n        let count = this.options.itemsPerPage || 10;\n        let sort = \"\";\n        for (let idx in this.options.sortBy) {\n          if (sort) {\n            sort += \",\";\n          }\n          if (this.options.sortDesc[idx]) {\n            sort += \"-\";\n          }\n          sort += this.options.sortBy[idx];\n        }\n        url =\n          \"/fhir/PractitionerRole?regstatus=approved&_count=\" +\n          count +\n          \"&_elements=practitioner,name,birthDate,gender,extension,identifier&date=ge\" + this.endDate +\n          \"&_include=PractitionerRole:practitioner&_sort=_lastUpdated&_total=accurate\"\n        this.debug = url;\n      }\n      let sTerms = Object.keys(this.terms);\n      for (let term of sTerms) {\n        if ( Array.isArray( this.terms[term] ) ) {\n          if ( this.terms[term].length > 0 ) {\n            url += \"&\" + term + \"=\" + this.terms[term].join(',')\n          }\n        } else if ( this.terms[term] ) {\n          url += \"&\" + term + \"=\" + this.terms[term];\n        }\n      }\n\n      this.prevPage = this.options.page;\n      // console.log(\"fetching\",url)\n      fetch(url).then(response => {\n        response.json().then(async (data) => {\n          this.results = [];\n          if (data.total > 0) {\n            this.link = data.link;\n            for (let entry of data.entry) {\n              if(entry.resource.resourceType !== 'PractitionerRole') {\n                continue\n              }\n              let result = { id: entry.resource.id };\n              result.status = entry.resource.extension.find((ext) => {\n                return ext.url === \"http://ihris.org/fhir/StructureDefinition/id-print-status\"\n              })?.valueBoolean\n              result.status = result.status ? \"Printed\" : \"Not Printed\"\n              result.stream = entry.resource.extension.find((ext) => {\n                return ext.url === \"http://ihris.org/fhir/StructureDefinition/itsf-maahad-stream\"\n              })?.valueCoding?.display\n              result.accomodation = entry.resource.extension.find((ext) => {\n                return ext.url === \"http://ihris.org/fhir/StructureDefinition/itsf-acommodation\"\n              })?.valueCoding?.display\n              result.paid = entry.resource.extension.find((ext) => {\n                return ext.url === \"http://ihris.org/fhir/StructureDefinition/itsf-paid-fee\"\n              })?.valueInteger\n              if(result.paid) {\n                result.paid = result.paid.toLocaleString()\n              }\n              let practitioner = data.entry.find((other) => {\n                return other.resource.resourceType === \"Practitioner\" && other.resource.id === entry.resource.practitioner.reference.split(\"/\")[1]\n              })\n              if(practitioner) {\n                result.practitioner = practitioner.resource.id\n                result.regnum = practitioner.resource.extension.find((ext) => {\n                  return ext.url === \"http://ihris.org/fhir/StructureDefinition/registration-number\"\n                })?.valueString\n                result.surname = practitioner.resource.name[0].family\n                result.given = practitioner.resource.name[0].given.join(\", \")\n                result.birthDate = practitioner.resource.birthDate\n                result.gender = await this.$fhirutils.lookup( practitioner.resource.gender, 'http://hl7.org/fhir/administrative-gender' )\n              }\n              this.results.push(result);\n            }\n          }\n          this.total = data.total;\n          this.loading = false;\n          this.checkRerun()\n        }).catch(err => {\n          this.loading = false;\n          this.error_message = \"Unable to load results.\";\n          this.checkRerun()\n          console.log(err);\n        });\n      }).catch(err => {\n        this.loading = false;\n        this.error_message = \"Unable to load results.\";\n        this.checkRerun()\n        console.log(err);\n      });\n    }\n  },\n  created() {\n    this.$fhirutils.expand( \"http://ihris.org/fhir/ValueSet/itsf-maahad-stream-valueset\" ).then( items => {\n      this.streams = items\n    })\n    fetch(\"/site/student/getAcademicYear\").then((response) => {\n      response.json().then((response) => {\n        this.academicYear = response.academicYear\n        let end = response.end.split(\"-\")\n        let year = parseInt(end[0]) - 1\n        this.startDate = year + \"-\" + end[1] + \"-\" + end[2]\n        this.endDate = response.end\n      })\n    })\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./print_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./print_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./print_id.vue?vue&type=template&id=29a9f16a&\"\nimport script from \"./print_id.vue?vue&type=script&lang=js&\"\nexport * from \"./print_id.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardSubtitle,VCardText,VCardTitle,VChip,VContainer,VDataTable,VOverlay,VProgressCircular,VSelect,VSpacer,VTextField})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","overlay","_v","_s","academicYear","status","$event","buildTerms","clearSearch","model","value","search","callback","$$v","$set","expression","streams","error_message","_e","staticStyle","headers","results","options","total","$t","loading","scopedSlots","_u","key","fn","ref","item","getColor","role","printid","practitioner","clickIt","staticRenderFns","data","text","regnum","stream","debug","terms","itemsPerPage","prevPage","link","update_again","rerun","restart","startDate","endDate","watch","handler","deep","mounted","computed","valueReference","reference","methods","fetch","response","nm","fullname","catch","checkRerun","searchPractitioner","resolve","reject","getData","url","sort","count","id","result","valueBoolean","valueCoding","display","valueInteger","valueString","err","console","created","component","VBtn"],"sourceRoot":""}