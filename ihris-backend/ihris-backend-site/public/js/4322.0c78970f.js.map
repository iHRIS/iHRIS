{"version":3,"file":"js/4322.0c78970f.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/site/itsf/new_registration_view.vue?8c9d","webpack://iHRIS-v5/src/site/itsf/new_registration_view.vue","webpack://iHRIS-v5/./src/site/itsf/new_registration_view.vue?8b23","webpack://iHRIS-v5/./src/site/itsf/new_registration_view.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"mt-4\"},[_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}})],1),_c('v-navigation-drawer',{staticClass:\"primary darken-1 white--text\",staticStyle:{\"z-index\":\"3\"},attrs:{\"app\":\"\",\"clipped\":\"\",\"permanent\":\"\",\"right\":\"\"}},[_c('v-list',{staticClass:\"white--text\"},[(_vm.practitioner)?_c('v-list-item',[_c('v-btn',{staticClass:\"primary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/resource/view/student/' + _vm.practitioner)}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-eye\")]),_c('span',[_vm._v(\"View Student\")])],1)],1):_vm._e(),_c('v-list-item',[_c('v-btn',{staticClass:\"success\",attrs:{\"disabled\":!_vm.canFinanceReview,\"dark\":\"\"},on:{\"click\":function($event){_vm.approvalDialog = true}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-check-decagram\")]),_c('span',[_vm._v(\"Finance Director Review\")])],1)],1),_c('v-list-item',[_c('v-btn',{staticClass:\"success\",attrs:{\"disabled\":!_vm.canTaalimReview,\"dark\":\"\"},on:{\"click\":function($event){_vm.approvalDialog = true}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-check-decagram\")]),_c('span',[_vm._v(\"Taalim Director Review\")])],1)],1)],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"500px\",\"transition\":\"dialog-transition\"},model:{value:(_vm.approvalDialog),callback:function ($$v) {_vm.approvalDialog=$$v},expression:\"approvalDialog\"}},[_c('v-card',[_c('v-toolbar',{staticClass:\"darken-1 white--text text-uppercase font-weight-bold\",attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_vm._v(\" Approve/Reject Registration \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":function($event){_vm.approvalDialog = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',[_c('v-select',{staticClass:\"ma-2\",attrs:{\"items\":_vm.statuses,\"label\":\"Status\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"success\",\"disabled\":!_vm.status},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)],1),_c('fhir-page-view',{key:_vm.key,attrs:{\"id\":_vm.queries.id,\"page\":\"itsf-registration-application\",\"showDrawer\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"mt-4\">\n    <v-overlay :value=\"overlay\">\n      <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n      ></v-progress-circular>\n    </v-overlay>\n    <v-navigation-drawer\n      app\n      class=\"primary darken-1 white--text\"\n      clipped\n      permanent\n      right\n      style=\"z-index: 3;\"\n    >\n      <v-list class=\"white--text\">\n        <v-list-item v-if=\"practitioner\">\n          <v-btn class=\"primary\" dark @click=\"$router.push('/resource/view/student/' + practitioner)\">\n            <v-icon light left>mdi-eye</v-icon>\n            <span>View Student</span>\n          </v-btn>\n        </v-list-item>\n        <v-list-item>\n          <v-btn :disabled=\"!canFinanceReview\" class=\"success\" dark @click=\"approvalDialog = true\">\n            <!-- <v-btn class=\"success\" dark @click=\"approvalDialog = true\"> -->\n            <v-icon light left>mdi-check-decagram</v-icon>\n            <span>Finance Director Review</span>\n          </v-btn>\n        </v-list-item>\n        <v-list-item>\n          <v-btn :disabled=\"!canTaalimReview\" class=\"success\" dark @click=\"approvalDialog = true\">\n            <!-- <v-btn class=\"success\" dark @click=\"approvalDialog = true\"> -->\n            <v-icon light left>mdi-check-decagram</v-icon>\n            <span>Taalim Director Review</span>\n          </v-btn>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n    <v-dialog\n      v-model=\"approvalDialog\"\n      persistent\n      max-width=\"500px\"\n      transition=\"dialog-transition\"\n    >\n      <v-card>\n        <v-toolbar color=\"primary\" class=\"darken-1 white--text text-uppercase font-weight-bold\" dark>\n          Approve/Reject Registration\n          <v-spacer></v-spacer>\n          <v-btn icon color=\"white\" @click=\"approvalDialog = false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card-text>\n          <v-select\n            :items=\"statuses\"\n            v-model=\"status\"\n            label=\"Status\"\n            outlined\n            dense\n            class=\"ma-2\"\n            hide-details\n            clearable\n          ></v-select>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"success\" :disabled=\"!status\" @click=\"save\">Save</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <fhir-page-view :id=\"queries.id\" page=\"itsf-registration-application\" :key=\"key\" :showDrawer=\"false\" />\n  </v-container>\n</template>\n\n<script>\nexport default {\n  props: [\"queries\"],\n  data: function() {\n    return {\n      key: 0,\n      financeReview: {},\n      taalimReview: {},\n      taalimReviewId: \"\",\n      financeReviewId: \"\",\n      statusText: \"\",\n      status: \"\",\n      regStatus: \"\",\n      statuses: [{\n        text: \"Approve\",\n        value: \"approved\"\n      }, {\n        text: \"Reject\",\n        value: \"rejected\"\n      }, {\n        text: \"Pending\",\n        value: \"pending\"\n      }],\n      payments: [],\n      approvalDialog: false,\n      rows: {\n        fake: false\n      },\n      overlay: false\n    }\n  },\n  computed: {\n    role() {\n      let role = this.$store.state.user.obj.resource.extension.find((ext) => {\n        return ext.url === 'http://ihris.org/fhir/StructureDefinition/ihris-assign-role'\n      }).valueReference.reference\n      return role.split(\"/\")[1]\n    },\n    canFinanceReview() {\n      if(this.financeReview.code != 'approved' && this.role === 'itsf-admin-finance-role') {\n        return true\n      }\n      return false\n    },\n    canTaalimReview() {\n      if(this.financeReview.code == 'approved' && this.taalimReview.code !== 'approved' && this.role === 'itsf-taalim-role') {\n        return true\n      }\n      return false\n    },\n  },\n  methods: {\n    getReviewStatuses() {\n      return new Promise((resolve) => {\n        fetch(\"/fhir/Basic/\" + this.queries.id).then((response) => {\n          response.json().then((response) => {\n            this.taalimReview = response.extension.find((ext) => {\n              return ext.url === \"http://ihris.org/fhir/StructureDefinition/taalim-status\"\n            })?.valueCoding\n            this.financeReview = response.extension.find((ext) => {\n              return ext.url === \"http://ihris.org/fhir/StructureDefinition/finance-status\"\n            })?.valueCoding\n            this.practitioner = response.extension.find((ext) => {\n              return ext.url === \"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference\"\n            })?.valueReference?.reference\n            if(this.practitioner) {\n              this.practitioner = this.practitioner.split(\"/\")[1]\n            }\n            if(!this.financeReview) {\n              this.financeReview = {\n                code: 'pending'\n              }\n            }\n            if(!this.taalimReview) {\n              this.taalimReview = {\n                code: 'pending'\n              }\n            }\n            if(this.financeReview && this.financeReview?.code != 'approved') {\n              this.status = this.financeReview.code\n            } else if(this.financeReview && this.financeReview?.code === 'pending') {\n              this.statusText = \"Waiting Finance Director Approval\"\n            }\n            if(this.financeReview?.code == 'approved' && this.taalimReview?.code !== 'approved') {\n              this.status = this.taalimReview.code\n            } else if(this.taalimReview?.code === 'pending') {\n              this.statusText = \"Waiting Finance Director Approval\"\n            }\n            this.regStatus = this.status\n            resolve()\n          }).catch(() => {\n            resolve()\n          })\n        }).catch(() => {\n          resolve()\n        })\n      })\n    },\n    save() {\n      this.overlay = true\n      this.approvalDialog = false\n      let body = {\n        status: this.status,\n        id: this.queries.id,\n        practitioner: this.queries.practitioner,\n        role: this.role\n      }\n      fetch(\"/site/student/new_registration_approval\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        redirect: \"manual\",\n        body: JSON.stringify(body),\n      }).then((response) => {\n        if(response.ok) {\n          this.key += 1\n          this.getReviewStatuses().then(() => {\n            this.overlay = false\n          })\n          this.$store.commit(\"setMessage\", {\n            type: \"success\",\n            text: \"Registration Processed Successfully\",\n          });\n        } else {\n          this.$store.commit(\"setMessage\", {\n            type: \"error\",\n            text: \"Failed to process registration\",\n          });\n        }\n      })\n    },\n    hasTask(task) {\n      return this.$store.state.user.obj.permissions && this.$store.state.user.obj.permissions.special && this.$store.state.user.obj.permissions.special.special && this.$store.state.user.obj.permissions.special.special.id && this.$store.state.user.obj.permissions.special.special.id[task]\n    }\n  },\n  created() {\n    this.overlay = true\n    this.getReviewStatuses().then(() => {\n      this.overlay = false\n    })\n  },\n  components: {\n    \"fhir-page-view\": () => import(\"@/views/fhir-page-view\")\n  },\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./new_registration_view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./new_registration_view.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./new_registration_view.vue?vue&type=template&id=3cea2e16&\"\nimport script from \"./new_registration_view.vue?vue&type=script&lang=js&\"\nexport * from \"./new_registration_view.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VContainer,VDialog,VIcon,VList,VListItem,VNavigationDrawer,VOverlay,VProgressCircular,VSelect,VSpacer,VToolbar})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","overlay","staticStyle","$event","$router","push","practitioner","_v","_e","canFinanceReview","approvalDialog","canTaalimReview","model","value","callback","$$v","expression","statuses","status","save","key","queries","id","staticRenderFns","data","financeReview","taalimReview","taalimReviewId","financeReviewId","statusText","regStatus","text","payments","rows","fake","computed","role","valueReference","reference","methods","getReviewStatuses","fetch","response","valueCoding","code","resolve","catch","method","headers","redirect","body","then","type","hasTask","created","components","component","VBtn"],"sourceRoot":""}