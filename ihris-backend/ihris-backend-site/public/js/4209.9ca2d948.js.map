{"version":3,"file":"js/4209.9ca2d948.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/site/components/add-family-head.vue?5a71","webpack://iHRIS-v5/src/site/components/add-family-head.vue","webpack://iHRIS-v5/./src/site/components/add-family-head.vue?7e23","webpack://iHRIS-v5/./src/site/components/add-family-head.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"grid-list-xs\":\"\"}},[_c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"return-value\":_vm.date,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},on:{\"update:returnValue\":function($event){_vm.date=$event},\"update:return-value\":function($event){_vm.date=$event}},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"Picker in menu\",\"prepend-icon\":\"mdi-calendar\",\"readonly\":\"\"},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}}),_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}}),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.overlay = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-navigation-drawer',{staticClass:\"primary darken-1 white--text\",staticStyle:{\"z-index\":\"3\"},attrs:{\"app\":\"\",\"clipped\":\"\",\"permanent\":\"\",\"right\":\"\"}},[_c('v-list',{staticClass:\"white--text\"},[_c('v-list-item',[_c('v-btn',{staticClass:\"secondary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.push('/resource/view/student/' + _vm.queries.practitioner)}}},[_c('v-icon',{attrs:{\"light\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-eye\")]),_c('span',[_vm._v(\"View Student\")])],1)],1)],1)],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"500px\",\"transition\":\"dialog-transition\"},model:{value:(_vm.confirmDialog),callback:function ($$v) {_vm.confirmDialog=$$v},expression:\"confirmDialog\"}},[_c('v-card',[_c('v-toolbar',{staticClass:\"darken-1 white--text text-uppercase font-weight-bold\",attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_vm._v(\" Confirm \"),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"white\"},on:{\"click\":function($event){_vm.confirmDialog = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',[_vm._v(\" Are you sure you want to add \"),_c('b',[_vm._v(_vm._s(_vm.practitionername)+\" \")]),_c('br'),_vm._v(\" as a family member of \"),_c('b',[_vm._v(_vm._s(_vm.familyHead[\"Practitioner.name.where(use='official').given\"])+\" \"+_vm._s(_vm.familyHead[\"Practitioner.name.where(use='official').family\"]))])]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.addMember}},[_vm._v(\"Yes, Proceed\")])],1)],1)],1),_c('b',[_vm._v(\"Student: \"+_vm._s(_vm.practitionername)+\" - \"+_vm._s(_vm.practitionerregnum))]),_c('v-card',[_c('v-card-title',[_vm._v(\" Current Family Head \")]),_c('v-card-text',[_c('v-row',[_c('v-col',[_vm._v(\" Name: \"),_c('b',[_vm._v(_vm._s(_vm.currentHead.name))])]),_c('v-col',[_vm._v(\" Registration Number: \"),_c('b',[_vm._v(_vm._s(_vm.currentHead.regNum))])])],1)],1)],1),_c('v-card',[_c('v-card-title',[_vm._v(\"Select Family Head Name\")]),_c('v-card-text',[_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Search Name\",\"outlined\":\"\",\"dense\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Search Registration Number\",\"outlined\":\"\",\"dense\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search.apply(null, arguments)}},model:{value:(_vm.regNum),callback:function ($$v) {_vm.regNum=$$v},expression:\"regNum\"}})],1),_c('v-col',{attrs:{\"cols\":\"2\"}},[_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.search}},[_vm._v(\"Search\")])],1)],1),_c('v-data-table',{staticClass:\"elevation-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"headers\":_vm.headers,\"items\":_vm.results,\"item-key\":\"id\",\"options\":_vm.options,\"server-items-length\":_vm.total,\"footer-props\":{ 'items-per-page-text':_vm.$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] },\"loading\":_vm.loading},on:{\"update:options\":function($event){_vm.options=$event},\"click:row\":_vm.selected}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container grid-list-xs>\n    <v-menu\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        :return-value.sync=\"date\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"auto\"\n      >\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-text-field\n            v-model=\"date\"\n            label=\"Picker in menu\"\n            prepend-icon=\"mdi-calendar\"\n            readonly\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          ></v-text-field>\n        </template>\n      </v-menu>\n    <v-overlay :value=\"overlay\">\n      <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n      ></v-progress-circular>\n      <v-btn icon @click=\"overlay = false\">\n        <v-icon>mdi-close</v-icon>\n      </v-btn>\n    </v-overlay>\n    <v-navigation-drawer\n      app\n      class=\"primary darken-1 white--text\"\n      clipped\n      permanent\n      right\n      style=\"z-index: 3;\"\n    >\n      <v-list class=\"white--text\">\n        <v-list-item>\n          <v-btn class=\"secondary\" dark @click=\"$router.push('/resource/view/student/' + queries.practitioner)\">\n            <v-icon light left>mdi-eye</v-icon>\n            <span>View Student</span>\n          </v-btn>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n    <v-dialog\n      v-model=\"confirmDialog\"\n      persistent\n      max-width=\"500px\"\n      transition=\"dialog-transition\"\n    >\n      <v-card>\n        <v-toolbar color=\"primary\" class=\"darken-1 white--text text-uppercase font-weight-bold\" dark>\n          Confirm\n          <v-spacer></v-spacer>\n          <v-btn icon color=\"white\" @click=\"confirmDialog = false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card-text>\n          Are you sure you want to add  <b>{{ practitionername }} </b><br>\n          as a family member of <b>{{ familyHead[\"Practitioner.name.where(use='official').given\"] }} {{ familyHead[\"Practitioner.name.where(use='official').family\"] }}</b>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"success\" @click=\"addMember\">Yes, Proceed</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <b>Student: {{ practitionername }} - {{ practitionerregnum }}</b>\n    <v-card>\n      <v-card-title>\n        Current Family Head\n      </v-card-title>\n      <v-card-text>\n        <v-row>\n          <v-col>\n            Name: <b>{{ currentHead.name }}</b>\n          </v-col>\n          <v-col>\n            Registration Number: <b>{{ currentHead.regNum }}</b>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n    <v-card>\n      <v-card-title>Select Family Head Name</v-card-title>\n      <v-card-text>\n        <v-row>\n          <v-col>\n            <v-text-field\n              label=\"Search Name\"\n              v-model=\"name\" \n              outlined \n              dense\n              @keyup.enter = \"search\"\n            >\n            </v-text-field>\n          </v-col>\n          <v-col>\n            <v-text-field\n              label=\"Search Registration Number\"\n              v-model=\"regNum\" \n              outlined \n              dense\n              @keyup.enter = \"search\"\n            >\n            </v-text-field>\n          </v-col>\n          <v-col cols=\"2\">\n            <v-btn color=\"success\" @click=\"search\">Search</v-btn>\n          </v-col>\n        </v-row>\n        <v-data-table\n          style=\"cursor: pointer\"\n          :headers=\"headers\"\n          :items=\"results\"\n          item-key=\"id\"\n          :options.sync=\"options\"\n          :server-items-length=\"total\"\n          :footer-props=\"{ 'items-per-page-text':$t('App.hardcoded-texts.tableText'), 'items-per-page-options': [5,10,20,50] }\"\n          :loading=\"loading\"\n          class=\"elevation-1\"\n          @click:row=\"selected\"\n        ></v-data-table>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n<script>\nexport default {\n  props: [\"queries\"],\n  data() {\n    return {\n      date: '',\n      menu: false,\n      overlay: false,\n      confirmDialog: false,\n      practitionername: '',\n      practitionerregnum: '',\n      familyHead: {},\n      total: 0,\n      name: '',\n      regNum: '',\n      headers: [{\n        \"text\": \"Surname\",\n        \"value\": \"Practitioner.name.where(use='official').family\"\n      }, {\n        \"text\": \"First Name(s)\",\n        \"value\": \"Practitioner.name.where(use='official').given\"\n      }, {\n        \"text\": \"Date of Birth\",\n        \"value\": \"Practitioner.birthDate\"\n      }, {\n        \"text\": \"Gender\",\n        \"value\": \"Practitioner.gender\"\n      }, {\n        \"text\": \"Registration Number\",\n        \"value\": \"Practitioner.extension.where(url='http://ihris.org/fhir/StructureDefinition/registration-number').valueString\"\n      }],\n      fields: [\n        [\"Surname\", \"Practitioner.name.where(use='official').family\", null],\n        [\"First Name(s)\", \"Practitioner.name.where(use='official').given\", null],\n        [\"Date of Birth\", \"Practitioner.birthDate\", null],\n        [\"Gender\", \"Practitioner.gender\", \"http://ihris.org/fhir/CodeSystem/itsf-gender-codesystem\"],\n        [\"Registration Number\", \"Practitioner.extension.where(url='http://ihris.org/fhir/StructureDefinition/registration-number').valueString\", null]\n      ],\n      results: [],\n      loading: false,\n      update_again: { rerun: false, restart: false },\n      options: { itemsPerPage: 10 },\n      currentHead: {\n        name: '',\n        regNum: ''\n      }\n    }\n  },\n  watch: {\n    options: {\n      handler() {\n        this.search();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    selected: function(record) {\n      this.familyHead = record\n      this.confirmDialog = true\n    },\n    addMember() {\n      this.overlay = true\n      this.confirmDialog = false\n      fetch(\"/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/itsf-family-head-profile&practitioner=Practitioner/\" + this.queries.practitioner).then((response) => {\n        response.json().then((entry) => {\n          let head = {}\n          let extension = [{\n            url: \"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference\",\n            valueReference: {\n              reference: \"Practitioner/\" + this.queries.practitioner\n            }\n          }, {\n            url: \"http://ihris.org/fhir/StructureDefinition/family-head\",\n            valueReference: {\n              reference: \"Practitioner/\" + this.familyHead.id\n            }\n          }, {\n            url: \"http://ihris.org/fhir/StructureDefinition/full-name\",\n            valueString: this.familyHead[\"Practitioner.name.where(use='official').given\"] + \" \" + this.familyHead[\"Practitioner.name.where(use='official').family\"]\n          }, {\n            url: \"http://ihris.org/fhir/StructureDefinition/registration-number\",\n            valueString: this.familyHead[\"Practitioner.extension.where(url='http://ihris.org/fhir/StructureDefinition/registration-number').valueString\"]\n          }]\n          let method = \"\"\n          let id = \"\"\n          if(entry && entry.entry && entry.entry.length > 0) {\n            method = \"PUT\"\n            head = entry.entry[0].resource\n            head.extension = extension\n            id = \"/\" + head.id\n          } else {\n            method = \"POST\"\n            head = {\n              resourceType: \"Basic\",\n              meta: {\n                profile: [\"http://ihris.org/fhir/StructureDefinition/itsf-family-head-profile\"]\n              },\n              extension: extension\n            }\n          }\n          let opts = {\n            method,\n            headers: {\n              \"Content-Type\": \"application/fhir+json\"\n            },\n            redirect: 'manual',\n            body: JSON.stringify(head)\n          }\n          fetch(\"/fhir/Basic\" + id, opts).then((response) => {\n            this.overlay = false;\n            if(response.status == 201 || response.status == 200) {\n              this.getFamilyHead()\n              this.$store.commit(\"setMessage\", {\n                type: \"success\",\n                text: \"Family member added\",\n              });\n            } else {\n              this.$store.commit(\"setMessage\", {\n                type: \"error\",\n                text: \"Failed to add family member.\"\n              });\n            }\n          }).catch(() => {\n            this.overlay = false;\n            this.$store.commit(\"setMessage\", {\n              type: \"error\",\n              text: \"Failed to add family member.\"\n            });\n          })\n        }).catch(() => {\n          this.$store.commit(\"setMessage\", {\n            type: \"error\",\n            text: \"An error has occured.\"\n          });\n        })\n      }).catch(() => {\n        this.$store.commit(\"setMessage\", {\n          type: \"error\",\n          text: \"An error has occured.\"\n        });\n      })\n    },\n    getFamilyHead() {\n      fetch(\"/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/itsf-family-head-profile&practitioner=Practitioner/\" + this.queries.practitioner).then((response) => {\n        response.json().then((entry) => {\n          if(entry && entry.entry && entry.entry.length > 0) {\n            let head = entry.entry[0].resource\n            console.error(JSON.stringify(head, 0, 2));\n            this.currentHead.name = head.extension.find((ext) => {\n              return ext.url === 'http://ihris.org/fhir/StructureDefinition/full-name'\n            }).valueString\n            this.currentHead.regNum = head.extension.find((ext) => {\n              return ext.url === 'http://ihris.org/fhir/StructureDefinition/registration-number'\n            })?.valueString\n          }\n        })\n      })\n    },\n    checkRerun() {\n      if ( !this.loading && this.update_again.rerun ) {\n        this.search( this.update_again.restart )\n        this.update_again = { rerun: false, restart: false }\n      }\n    },\n    search(restart) {\n      let query = \"\"\n      if(this.name) {\n        query += \"&name:contains=\" + this.name\n      }\n      if(this.regNum) {\n        query += \"&regnum:contains=\" + this.regNum\n      }\n      if ( this.loading ) {\n        this.update_again.rerun = true\n        this.update_again.restart = this.update_again.restart || restart\n        return\n      }\n      this.loading = true;\n      this.error_message = null;\n      let url = \"\";\n      if (restart) this.options.page = 1;\n      if (this.options.page > 1) {\n        if (this.options.page === this.prevPage - 1) {\n          url = this.link.find(link => link.relation === \"previous\").url;\n        } else if (this.options.page === this.prevPage + 1) {\n          url = this.link.find(link => link.relation === \"next\").url;\n        }\n        // Should make this smarter to keep the _getpages parameter,\n        // but the issue is with tracking permissions on the resource\n        url = url.replace(/_getpages=[^&]*&*/, \"\").replace(\"/fhir?\",\"/fhir/Practitioner?\")\n        url = url.substring(url.indexOf(\"/fhir/\"));\n\n        //some of the hapi instances requires _total=accurate to always be available for them to return total resources\n        if(url.indexOf('_total=accurate') === -1) {\n          url = url + '&_total=accurate'\n        }\n      }\n      if (url === \"\") {\n        let count = this.options.itemsPerPage || 10;\n        let sort = \"\";\n        for (let idx in this.options.sortBy) {\n          if (sort) {\n            sort += \",\";\n          }\n          if (this.options.sortDesc[idx]) {\n            sort += \"-\";\n          }\n          sort += this.options.sortBy[idx];\n        }\n        url =\n          \"/fhir/Practitioner?_count=\" + count + \"&_total=accurate\"\n          url += query\n      }\n      this.prevPage = this.options.page;\n      fetch(url).then(response => {\n        response.json().then(async (data) => {\n          this.results = [];\n          if (data.total > 0) {\n            this.link = data.link;\n            for (let entry of data.entry) {\n              let result = { id: entry.resource.id };\n              let ignore = false\n              for (let field of this.fields) {\n                let fieldDisplay = this.$fhirpath.evaluate( entry.resource, field[1] );\n                result[field[1]] = await this.$fhirutils.lookup( fieldDisplay[0], field[2] )\n                if(field[1] === \"Practitioner.extension.where(url='http://ihris.org/fhir/StructureDefinition/registration-number').valueString\" && result[field[1]] === this.practitionerregnum) {\n                  ignore = true\n                  break\n                }\n              }\n              if(ignore) {\n                continue\n              }\n              this.results.push(result);\n            }\n          }\n          this.total = data.total;\n          this.loading = false;\n          this.checkRerun()\n        }).catch(err => {\n          this.loading = false;\n          this.error_message = \"Unable to load results.\";\n          this.checkRerun()\n          console.log(err);\n        });\n      }).catch(err => {\n        this.loading = false;\n        this.error_message = \"Unable to load results.\";\n        this.checkRerun()\n        console.log(err);\n      });\n    }\n  },\n  created() {\n    this.getFamilyHead()\n    fetch(\"/fhir/Practitioner/\" + this.queries.practitioner).then((response) => {\n      response.json().then((pract) => {\n        this.practitionername = \"\"\n        this.practitionerregnum = pract.extension.find((ext) => {\n          return ext.url === 'http://ihris.org/fhir/StructureDefinition/registration-number'\n        })?.valueString\n        let name = pract.name.find((nm) => {\n          nm.use === \"official\"\n        })\n        if(!name && pract.name && pract.name.length > 0) {\n          name = pract.name[0]\n        }\n        if(name) {\n          if(name.given) {\n            if(this.practitionername) {\n              this.practitionername += \" \"\n            }\n            this.practitionername += name.given.join(\" \")\n          }\n          if(name.family) {\n            if(this.practitionername) {\n              this.practitionername += \" \"\n            }\n            this.practitionername += name.family\n          }\n        }\n      })\n    })\n  }\n}\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./add-family-head.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./add-family-head.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add-family-head.vue?vue&type=template&id=3eae6f6a&\"\nimport script from \"./add-family-head.vue?vue&type=script&lang=js&\"\nexport * from \"./add-family-head.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDataTable,VDialog,VIcon,VList,VListItem,VMenu,VNavigationDrawer,VOverlay,VProgressCircular,VRow,VSpacer,VTextField,VToolbar})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","ref","date","$event","scopedSlots","_u","key","fn","_g","_b","model","value","callback","$$v","expression","menu","overlay","_v","staticStyle","$router","push","queries","practitioner","confirmDialog","_s","practitionername","familyHead","addMember","practitionerregnum","currentHead","regNum","type","indexOf","_k","keyCode","search","apply","arguments","headers","results","options","total","$t","loading","selected","staticRenderFns","data","fields","update_again","rerun","restart","itemsPerPage","watch","handler","deep","methods","fetch","response","url","valueReference","reference","valueString","method","head","id","resourceType","meta","profile","extension","redirect","body","text","catch","getFamilyHead","console","checkRerun","query","sort","result","ignore","err","created","nm","component","VBtn"],"sourceRoot":""}