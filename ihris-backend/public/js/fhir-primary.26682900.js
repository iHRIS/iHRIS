(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-primary"],{1131:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.err_messages,error:t.error,"item-text":"display","item-value":"code",disabled:t.readOnlyIfSet&&t.value,dense:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],a=(i("7db0"),i("b287")),n={name:"fhir-code",props:["field","min","max","base-min","base-max","label","binding","slotProps","path","edit","sliceName","readOnlyIfSet"],components:{IhrisElement:a["a"]},data:function(){return{value:"",loading:!0,err_messages:null,error:!1,items:[],source:{path:"",data:{},binding:this.binding}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0])}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.error=!0,t.err_messages=e.message,t.loading=!1}))}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},displayValue:function(){var t=this,e=this.items.find((function(e){return e.code===t.value}));return e?e.display:""}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),h=i("b974"),d=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=d.exports;c()(d,{VSelect:h["a"]})},"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("d3b7"),i("e6cf");function r(t,e,i,r,s,a,n){try{var o=t[a](n),l=o.value}catch(u){return void i(u)}o.done?e(l):Promise.resolve(l).then(r,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,a){var n=t.apply(e,i);function o(t){r(n,s,a,o,l,"next",t)}function l(t){r(n,s,a,o,l,"throw",t)}o(void 0)}))}}},"309c":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],a={name:"fhir-codeable-concept",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","binding","edit"],data:function(){return{source:{path:"",data:{},binding:this.binding}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=a,o=i("2877"),l=Object(o["a"])(n,r,s,!1,null,null,null);e["default"]=l.exports},"39e1":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit?t._e():i("v-container",{staticClass:"my-3"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.columns,items:t.items,"item-key":"id","items-per-page":5,loading:t.loading,dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]),i("v-spacer"),t._l(t.topActions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,{}),color:e.class,small:""}},[t._v(" "+t._s(e.text)+" ")])}))],2)]},proxy:!0},{key:"item._action",fn:function(e){var r=e.item;return t._l(r.actions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,r),color:e.class,small:"",rounded:""}},[t._v(" "+t._s(e.text)+" ")])}))}}],null,!1,3813068814)})],1)},s=[],a=(i("a623"),i("4de4"),i("7db0"),i("c975"),i("a15b"),i("d81d"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("9911"),i("ddb0"),i("b85c")),n=(i("96cf"),i("1da1")),o=function(t){return!!t&&t.constructor===Object},l={name:"ihris-secondary",props:["title","field","profile","slotProps","link-id","link-field","search-field","edit","columns","actions"],data:function(){return{source:{data:{},path:this.field},empty:!0,items:[],loading:!0,topActions:[]}},mounted:function(){this.setupData()},watch:{},methods:{setupData:function(){var t="/fhir/"+this.field,e=[];this.profile&&e.push("_profile="+this.profile),this.searchField?e.push(this.searchField+"="+this.linkId):e.push(this.linkField.substring(this.linkField.indexOf(".")+1)+"="+this.linkId),t+="?"+e.join("&"),this.items=[],this.loading=!0,this.addItems(t)},addItems:function(t){var e=this;fetch(t).then((function(i){200===i.status?i.json().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i){var r,s,n,o,l,u,c,h,d,p,f,v,m,y,b,g,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(i.entry&&i.entry.length>0)){t.next=50;break}r=Object(a["a"])(i.entry),t.prev=2,r.s();case 4:if((s=r.n()).done){t.next=40;break}n=s.value,o={id:n.resource.id},l=Object(a["a"])(e.columns),t.prev=8,l.s();case 10:if((u=l.n()).done){t.next=26;break}if(c=u.value,"_action"!==c.value){t.next=14;break}return t.abrupt("continue",24);case 14:return t.prev=14,h=e.$fhirpath.evaluate(n.resource,c.value),t.next=18,e.processContent(h);case 18:o[c.value]=t.sent,t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](14),console.log(t.t0);case 24:t.next=10;break;case 26:t.next=31;break;case 28:t.prev=28,t.t1=t["catch"](8),l.e(t.t1);case 31:return t.prev=31,l.f(),t.finish(31);case 34:o.actions||(o.actions=[]),d=Object(a["a"])(e.actions);try{for(d.s();!(p=d.n()).done;)f=p.value,f.row?f.condition?(v=e.$fhirpath.evaluate(n.resource,f.condition),v.every((function(t){return t}))&&o.actions.push(f)):o.actions.push(f):f.condition?(m=e.$fhirpath.evaluate(n.resource,f.condition),f.hasOwnProperty("meets")?f.meets=f.meets&&m.every((function(t){return t})):f.meets=m.every((function(t){return t}))):f.meets=!0}catch(_){d.e(_)}finally{d.f()}e.items.push(o);case 38:t.next=4;break;case 40:t.next=45;break;case 42:t.prev=42,t.t2=t["catch"](2),r.e(t.t2);case 45:return t.prev=45,r.f(),t.finish(45);case 48:t.next=52;break;case 50:y=Object(a["a"])(e.actions);try{for(y.s();!(b=y.n()).done;)g=b.value,g.row||(g.meets=g.emptyDisplay)}catch(_){y.e(_)}finally{y.f()}case 52:e.topActions=e.actions.filter((function(t){return!t.row&&t.meets})),i.link?(x=i.link.find((function(t){return"next"===t.relation})),x?e.addItems(x.url):e.loading=!1):e.loading=!1;case 54:case"end":return t.stop()}}),t,null,[[2,42,45,48],[8,28,31,34],[14,21]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,console.log(t)})):(e.loading=!1,console.log("Unable to fetch",t,i.status))})).catch((function(t){e.loading=!1,console.log(t)}))},processContent:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=7;break}return t.next=3,Promise.all(e.map(this.processContent));case 3:return i=t.sent,t.abrupt("return",i.join(" "));case 7:if(!o(e)){t.next=26;break}if(!e.code||!e.system){t.next=14;break}return t.next=11,this.$fhirutils.codeLookup(e.system,e.code);case 11:return t.abrupt("return",t.sent);case 14:if(!e.display){t.next=18;break}return t.abrupt("return",e.display);case 18:if(!e.code){t.next=22;break}return t.abrupt("return",e.code);case 22:return console.log("Unable to process content:",e),t.abrupt("return","Unknown");case 24:t.next=27;break;case 26:return t.abrupt("return",e);case 27:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setupLink:function(t,e){return t.replace("ITEMID",e.id).replace("FHIRID",this.linkId)}}},u=l,c=i("2877"),h=i("6544"),d=i.n(h),p=i("8336"),f=i("a523"),v=i("8fea"),m=i("2fa4"),y=i("71d9"),b=i("2a7f"),g=Object(c["a"])(u,r,s,!1,null,null,null);e["default"]=g.exports;d()(g,{VBtn:p["a"],VContainer:f["a"],VDataTable:v["a"],VSpacer:m["a"],VToolbar:y["a"],VToolbarTitle:b["a"]})},"45dd":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return["year"===t.pickerType?i("v-text-field",{attrs:{type:"number",disabled:t.readOnlyIfSet&&t.value,label:t.label,min:t.minYear,max:t.maxYear},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",dense:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueDateTime,min:t.minValueDateTime,type:t.pickerType,disabled:t.readOnlyIfSet&&t.value},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],a=i("b287"),n={name:"fhir-date-time",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDateTime","maxValueDateTime","displayType","readOnlyIfSet"],components:{IhrisElement:a["a"]},data:function(){return{value:null,menu:!1,source:{path:"",data:{}},qField:"valueDateTime",pickerType:"date"}},created:function(){this.setupData()},computed:{minYear:function(){return this.minValueDateTime.substring(0,4)},maxYear:function(){return this.maxValueDateTime.substring(0,4)}},watch:{menu:function(t){var e=this;t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0])}},save:function(t){this.$refs.menu.save(t)}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),h=i("2e4b"),d=i("e449"),p=i("8654"),f=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=f.exports;c()(f,{VDatePicker:h["a"],VMenu:d["a"],VTextField:p["a"]})},"6b10":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],a=(i("ac1f"),i("5319"),{name:"fhir-extension",props:["field","sliceName","min","max","base-min","base-max","profile","slotProps","path","edit"],data:function(){return{source:{path:"",data:[]}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t;t=this.profile?this.profile:this.sliceName;var e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+t+"')");this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}}}}),n=a,o=i("2877"),l=Object(o["a"])(n,r,s,!1,null,null,null);e["default"]=l.exports},7372:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[t._t("default",null,{source:t.source}),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}})],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",right:"",permanent:"",clipped:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[t.edit?i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(0)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil-off")]),i("span",[t._v("Cancel")])],1):i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$emit("set-edit",!t.edit)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil")]),i("span",[t._v("Edit")])],1),i("v-spacer"),t.edit?i("v-btn",{staticClass:"success darken-1",attrs:{dark:""},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1):t._e()],1),i("v-divider",{attrs:{color:"white"}}),!t.edit&&t.links&&t.links.length?i("v-list-item",t._l(t.links,(function(e,r){return i("v-btn",{key:e.url,staticClass:"primary",attrs:{text:!e.button,to:t.getLinkUrl(e)}},[e.icon?i("v-icon",{attrs:{light:""}},[t._v(t._s(e.icon))]):t._e(),t._v(" "+t._s(t.linktext[r])+" ")],1)})),1):t._e(),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.name,attrs:{href:"#section-"+e.name}},[t.edit&&e.secondary?t._e():i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(e.title))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)},s=[],a=(i("4160"),i("caad"),i("fb6a"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("5319"),i("1276"),i("2ca0"),i("159b"),i("b85c")),n={name:"ihris-resource",props:["title","field","fhir-id","page","profile","section-menu","edit","links"],data:function(){return{fhir:{},source:{data:{},path:""},loading:!1,overlay:!1,isEdit:!1,linktext:[]}},created:function(){var t=this;if(this.fhirId)this.loading=!0,fetch("/fhir/"+this.field+"/"+this.fhirId).then((function(e){e.json().then((function(e){t.source={data:e,path:t.field},t.setLinkText(),t.loading=!1})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)}));else if(this.$route.query){console.log(this.$route.query);for(var e={resourceType:this.field},i=!1,r=0,s=Object.keys(this.$route.query);r<s.length;r++){var n=s[r];if(n.startsWith(this.field+".")){i=!0;var o,l=n.substring(this.field.length+1).split("."),u=l.pop(),c=e,h=Object(a["a"])(l);try{for(h.s();!(o=h.n()).done;){var d=o.value;if(d.includes("["))try{var p=d.split("["),f=p[0],v=p[1].slice(0,-1);if(c.hasOwnProperty(f)||(c[f]=[]),v){var m={};c[f][parseInt(v)]=m,c=m}else{var y={};c[f].push(y),c=y}}catch(_){console.log("Unable to process",n);continue}else c.hasOwnProperty(d)||(c[d]={},c=c[d])}}catch(_){h.e(_)}finally{h.f()}if(u.includes("["))try{var b=u.split("["),g=b[0],x=b[1].slice(0,-1);c.hasOwnProperty(g)||(c[g]=[]),x?c[g][parseInt(x)]=this.$route.query[n]:c[g].push(this.$route.query[n])}catch(_){console.log("Unable to process",n);continue}else c[u]=this.$route.query[n]}}i&&(this.source={data:e,path:this.field})}},computed:{hasFhirId:function(){return""!=this.fhirId&&!!this.fhirId}},methods:{getLinkField:function(t){var e=this.$fhirpath.evaluate(this.source.data,t);return!!e&&e[0]},getLinkUrl:function(t){var e;if(t.field&&(e=this.getLinkField(t.field)),e){if(e.includes("/")){var i=e.split("/");e=i[1]}return t.url.replace("FIELD",e)}return t.url},setLinkText:function(){var t=this,e=function(e){var i=t.links[e];if(i.text)t.linktext[e]=i.text;else if(i.field){var r=t.getLinkField(i.field);r&&t.$fhirutils.lookup(r).then((function(i){t.$set(t.linktext,e,i)}))}};for(var i in this.links)e(i)},processFHIR:function(){var t=this;this.overlay=!0,this.loading=!0,this.fhir={resourceType:this.field,meta:{profile:[this.profile]}},o(this.field,this.fhir,this.$children);var e="/fhir/"+this.field,i={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual"};this.fhirId&&(this.fhir.id=this.fhirId,e+="/"+this.fhirId,i.method="PUT"),i.body=JSON.stringify(this.fhir),console.log("SAVE",e,this.fhir),fetch(e,i).then((function(e){201!==e.status&&200!==e.status||e.json().then((function(e){t.overlay=!1,t.loading=!1,t.fhirId?t.$router.go(0):t.$router.push({name:"resource_view",params:{page:t.page,id:e.id}})}))}))}}},o=function t(e,i,r){r.forEach((function(r){var s,a=e,n=i;if(r.field&&!r.fieldType)if(r.sliceName?r.field.startsWith("value[x]")?(s=r.field.substring(9),a+="."+s):(s=r.field.replace(":"+r.sliceName,""),a+="."+s):(s=r.field,a+="."+s),"1"!==r.max||"1"!==r.baseMax?i.hasOwnProperty(s)||(n[s]=[]):n[s]={},r.hasOwnProperty("value"))Array.isArray(n[s])?n[s].push(r.value):n[s]=r.value,n=n[s];else if(Array.isArray(n[s])){var o={};r.profile?o.url=r.profile:"extension"===s&&r.sliceName&&(o.url=r.sliceName),n[s].push(o),n=o}else n=n[s];r.$children&&t(a,n,r.$children)}))},l=n,u=i("2877"),c=i("6544"),h=i.n(c),d=i("8336"),p=i("a523"),f=i("ce7e"),v=i("132d"),m=i("8860"),y=i("da13"),b=i("5d23"),g=i("f774"),x=i("a797"),_=i("490a"),k=i("2fa4"),w=i("e0c7"),P=Object(u["a"])(l,r,s,!1,null,null,null);e["default"]=P.exports;h()(P,{VBtn:d["a"],VContainer:p["a"],VDivider:f["a"],VIcon:v["a"],VList:m["a"],VListItem:y["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VNavigationDrawer:g["a"],VOverlay:x["a"],VProgressCircular:_["a"],VSpacer:k["a"],VSubheader:w["a"]})},"7fb0":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return["year"===t.pickerType?i("v-text-field",{attrs:{type:"number",disabled:t.readOnlyIfSet&&t.value,label:t.label,min:t.minYear,max:t.maxYear},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[i("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",dense:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueDate,min:t.minValueDate,type:t.pickerType,disabled:t.readOnlyIfSet&&t.value},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],a=i("b287"),n={name:"fhir-date",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDate","maxValueDate","displayType","readOnlyIfSet"],components:{IhrisElement:a["a"]},data:function(){return{value:null,menu:!1,source:{path:"",data:{}},qField:"valueDate",pickerType:"date"}},created:function(){this.setupData()},computed:{minYear:function(){return this.minValueDate.substring(0,4)},maxYear:function(){return this.maxValueDate.substring(0,4)}},watch:{menu:function(t){var e=this;t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0])}},save:function(t){this.$refs.menu.save(t)}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),h=i("2e4b"),d=i("e449"),p=i("8654"),f=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=f.exports;c()(f,{VDatePicker:h["a"],VMenu:d["a"],VTextField:p["a"]})},8308:function(t,e,i){},"96cf":function(t,e,i){var r=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(t,e,i,r){var s=e&&e.prototype instanceof v?e:v,a=Object.create(s.prototype),n=new I(r||[]);return a._invoke=P(t,i,n),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(r){return{type:"throw",arg:r}}}t.wrap=l;var c="suspendedStart",h="suspendedYield",d="executing",p="completed",f={};function v(){}function m(){}function y(){}var b={};b[a]=function(){return this};var g=Object.getPrototypeOf,x=g&&g(g(D([])));x&&x!==i&&r.call(x,a)&&(b=x);var _=y.prototype=v.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function w(t,e){function i(s,a,n,o){var l=u(t[s],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,n,o)}),(function(t){i("throw",t,n,o)})):e.resolve(h).then((function(t){c.value=t,n(c)}),(function(t){return i("throw",t,n,o)}))}o(l.arg)}var s;function a(t,r){function a(){return new e((function(e,s){i(t,r,e,s)}))}return s=s?s.then(a,a):a()}this._invoke=a}function P(t,e,i){var r=c;return function(s,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===s)throw a;return E()}i.method=s,i.arg=a;while(1){var n=i.delegate;if(n){var o=$(n,i);if(o){if(o===f)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===c)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var l=u(t,e,i);if("normal"===l.type){if(r=i.done?p:h,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=p,i.method="throw",i.arg=l.arg)}}}function $(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,$(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=u(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,f;var a=s.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function V(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(V,this),this.reset(!0)}function D(t){if(t){var i=t[a];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var s=-1,n=function i(){while(++s<t.length)if(r.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return n.next=n}}return{next:E}}function E(){return{value:e,done:!0}}return m.prototype=_.constructor=y,y.constructor=m,y[o]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},k(w.prototype),w.prototype[n]=function(){return this},t.AsyncIterator=w,t.async=function(e,i,r,s,a){void 0===a&&(a=Promise);var n=new w(l(e,i,r,s),a);return t.isGeneratorFunction(i)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},k(_),_[o]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=D,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(r,s){return o.type="throw",o.arg=t,i.next=r,s&&(i.method="next",i.arg=e),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],o=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var l=r.call(n,"catchLoc"),u=r.call(n,"finallyLoc");if(l&&u){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=t,n.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;O(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:D(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=r}catch(s){Function("r","regeneratorRuntime = r")(r)}},b287:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.edit?i("v-container",[t._t("form")],2):i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._t("header")],2),t.loading?i("v-col",{attrs:{cols:t.$store.state.cols.content}},[i("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):i("v-col",{attrs:{cols:t.$store.state.cols.content}},[t._t("value")],2)],1),i("v-divider")],1)],1)},s=[],a={name:"ihris-element",props:["edit","loading"]},n=a,o=i("2877"),l=i("6544"),u=i.n(l),c=i("62ad"),h=i("a523"),d=i("ce7e"),p=i("8e36"),f=i("0fd9"),v=Object(o["a"])(n,r,s,!1,null,null,null);e["a"]=v.exports;u()(v,{VCol:c["a"],VContainer:h["a"],VDivider:d["a"],VProgressLinear:p["a"],VRow:f["a"]})},b78c:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-text-field",{attrs:{disabled:t.readOnlyIfSet&&t.value,label:t.display,outlined:"","hide-details":"auto",dense:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],a=i("b287"),n={name:"fhir-string",props:["field","label","min","max","id","path","slotProps","sliceName","base-min","base-max","edit","readOnlyIfSet"],components:{IhrisElement:a["a"]},data:function(){return{source:{path:"",data:{}},value:"",qField:"valueString"}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0])}}},computed:{index:function(){return this.slotProps?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),h=i("8654"),d=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=d.exports;c()(d,{VTextField:h["a"]})},bb1d:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.simpleDisplay?i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.label))]),i("v-col",{attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.simpleValue))])],1),i("v-divider")],1):i("div",[i("v-card",[t.edit?i("v-system-bar",{attrs:{color:"secondary",dark:""}},[t._v(" "+t._s(t.label)+" "),i("v-spacer"),t.subAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.removeRow()}}},[i("v-icon",[t._v("mdi-minus")])],1):t._e(),t.addAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addRow()}}},[i("v-icon",[t._v("mdi-plus")])],1):t._e()],1):t._e(),t._l(t.inputs,(function(e){return t._t("default",null,{input:e,source:e.source})}))],2)],1)])},s=[],a=(i("caad"),i("a15b"),i("a434"),i("ac1f"),i("5319"),{name:"ihris-array",props:["label","min","max","id","path","slotProps","field","fieldType","profile","targetProfile","sliceName","edit"],data:function(){return{inputs:[],source:{path:"",data:[]},isArray:!0}},created:function(){this.setupInputs()},watch:{slotProps:{handler:function(){this.setupInputs()},deep:!0}},methods:{setupInputs:function(){this.inputs=[],this.source={path:this.path,data:{}};var t=this.path;if(this.slotProps&&this.slotProps.source){var e=this.field;this.sliceName&&(e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+this.profile+"')")),this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}for(var i=0;i<this.actualMin;i++){var r=this.label;this.displayIndex&&(r+=" ("+(i+1)+")");var s={label:r,index:i,data:void 0};this.source.data[i]&&(s.source={data:this.source.data[i],path:t+"["+i+"]",fromArray:!0}),this.inputs.push(s)}},addRow:function(){if(this.addAvailable){var t=this.label;this.displayIndex&&(t+=" ("+(this.inputs.length+1)+")"),this.inputs.push({label:t,index:this.baseIndex+this.inputs.length})}},removeRow:function(){this.subAvailable&&this.inputs.splice(-1)},getField:function(){return this.field}},computed:{actualMin:function(){return Math.max(this.min,this.source.data.length>0?this.source.data.length:1)},addAvailable:function(){return"*"===this.max||this.inputs.length<this.max},displayIndex:function(){return"*"===this.max||this.max>1},subAvailable:function(){return this.actualMin<this.inputs.length},simpleDisplay:function(){return!this.edit&&["string"].includes(this.fieldType)},simpleValue:function(){return this.source.data.join(" ")}}}),n=a,o=i("2877"),l=i("6544"),u=i.n(l),c=i("8336"),h=i("b0af"),d=i("62ad"),p=i("ce7e"),f=i("132d"),v=i("0fd9"),m=i("2fa4"),y=(i("a9e3"),i("c7cd"),i("5530")),b=(i("8308"),i("3a66")),g=i("a9ad"),x=i("7560"),_=i("58df"),k=i("80d2"),w=Object(_["a"])(Object(b["a"])("bar",["height","window"]),g["a"],x["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(y["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(k["g"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(t){var e={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),Object(k["r"])(this))}}),P=Object(o["a"])(n,r,s,!1,null,null,null);e["default"]=P.exports;u()(P,{VBtn:c["a"],VCard:h["a"],VCol:d["a"],VDivider:p["a"],VIcon:f["a"],VRow:v["a"],VSpacer:m["a"],VSystemBar:w})},c408:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{field:t.field,slotProps:t.slotProps,sliceName:t.sliceName,min:t.min,max:t.max,"base-min":t.baseMin,"base-max":t.baseMax,label:t.label,path:t.path,edit:t.edit},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],a=i("fa57"),n={name:"fhir-identifier",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit"],data:function(){return{}},components:{IhrisComplexCard:a["a"]}},o=n,l=i("2877"),u=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=u.exports},e07f:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit&&t.secondary?t._e():i("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.name}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.title)+" ")]),i("v-card-text",{staticClass:"my-3"},[t._t("default",null,{source:t.slotProps.source})],2)],1)],1)},s=[],a={name:"ihris-section",props:["name","slotProps","title","description","edit","secondary"],data:function(){return{}},created:function(){},watch:{},methods:{}},n=a,o=i("2877"),l=i("6544"),u=i.n(l),c=i("b0af"),h=i("99d9"),d=Object(o["a"])(n,r,s,!1,null,null,null);e["default"]=d.exports;u()(d,{VCard:c["a"],VCardText:h["c"],VCardTitle:h["d"]})},eee9:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.err_messages,error:t.error,"item-text":"display","item-value":"code",disabled:t.readOnlyIfSet&&(t.valueDisplay||t.value.display),dense:""},model:{value:t.valueCode,callback:function(e){t.valueCode=e},expression:"valueCode"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.valueDisplay||t.value.display||"")+" ")]},proxy:!0}])})},s=[],a=(i("7db0"),i("b287")),n={name:"fhir-coding",props:["field","label","sliceName","targetprofile","min","max","base-min","base-max","slotProps","path","binding","edit","readOnlyIfSet"],components:{IhrisElement:a["a"]},data:function(){return{value:{system:"",code:"",display:""},valueCode:"",valueDisplay:"",loading:!0,err_messages:null,error:!1,items:[],source:{path:"",data:{},binding:this.binding}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0},valueCode:function(t){var e=this;if(this.items){var i=this.items.find((function(e){return e.code===t}));i&&(this.value=i)}this.value.system&&this.value.code&&this.$fhirutils.codeLookup(this.value.system,this.value.code,this.binding||this.source.binding).then((function(t){e.valueDisplay=t}))}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.source.data&&(this.value=this.source.data,this.valueCode=this.value.code);else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data[0]&&(this.value=this.source.data[0],this.valueCode=this.value.code)}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.error=!0,t.err_messages=e.message,t.loading=!1}))}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),h=i("b974"),d=Object(l["a"])(o,r,s,!1,null,null,null);e["default"]=d.exports;c()(d,{VSelect:h["a"]})},fa57:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-subtitle",{staticClass:"primary--text text-uppercase font-weight-bold"},[t._v(t._s(t.display))]),i("v-card-text",[t._t("default",null,{source:t.source})],2)],1)},s=[],a={name:"ihris-complex-card",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit"],data:function(){return{source:{path:"",data:{}}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=a,o=i("2877"),l=i("6544"),u=i.n(l),c=i("b0af"),h=i("99d9"),d=Object(o["a"])(n,r,s,!1,null,null,null);e["a"]=d.exports;u()(d,{VCard:c["a"],VCardSubtitle:h["b"],VCardText:h["c"]})}}]);
//# sourceMappingURL=fhir-primary.26682900.js.map