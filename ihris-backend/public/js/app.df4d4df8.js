(function(e){function t(t){for(var r,n,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var i=a[n];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({fhir:"fhir","fhir-main":"fhir-main","fhir-search":"fhir-search",static:"static","fhir-questionnaire":"fhir-questionnaire"}[e]||e)+"."+{fhir:"256f8606","fhir-main":"91d33806","fhir-search":"ed4e85ca",static:"b0c2b3b9","fhir-questionnaire":"197834e1"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"fhir-main":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({fhir:"fhir","fhir-main":"fhir-main","fhir-search":"fhir-search",static:"static","fhir-questionnaire":"fhir-questionnaire"}[e]||e)+"."+{fhir:"31d6cfe0","fhir-main":"be8f722f","fhir-search":"31d6cfe0",static:"31d6cfe0","fhir-questionnaire":"31d6cfe0"}[e]+".css",o=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===r||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete n[e],p.parentNode.removeChild(p),a(s)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}o[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("8a23"),n=a.n(r);n.a},1281:function(e,t,a){e.exports=a.p+"img/mHero.3fb599b1.png"},"2fc5":function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ihris-template",{key:e.$route.path},[e._v(" Loading... ")])},o=[],s=(a("d3b7"),a("a026")),i={name:"fhir-report",props:["report"],data:function(){return{}},created:function(){this.$route.params&&this.$route.params.report?r=this.$route.params.report:this.report&&(r=this.report),this.getTemplate()},methods:{getTemplate:function(){var e=this;fetch("/config/report/"+r).then((function(t){t.json().then((function(t){s["a"].component("ihris-template",{name:"ihris-template",data:function(){return{reportData:t.reportData,dataURL:t.dataURL,terms:{}}},components:{"ihris-report":function(){return a.e("fhir-search").then(a.bind(null,"2e2c"))},"ihris-search-term":function(){return a.e("fhir-search").then(a.bind(null,"d604"))}},template:t.reportTemplate,methods:{searchData:function(e,t){this.$set(this.terms,e,t)}}}),e.$forceUpdate(),console.log("updated template")})).catch((function(t){console.log(t),s["a"].component("ihris-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this report</p>.</div>"}),e.$forceUpdate()}))})).catch((function(t){console.log(t),s["a"].component("ihris-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this report</p>.</div>"}),e.$forceUpdate()}))}},components:{},beforeCreate:function(){s["a"].component("ihris-template",{template:"<div>Loading...</div>"})}},c=i,l=a("2877"),u=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=u.exports},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return bt}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("a026"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"top"}},[a("the-header",{attrs:{app:"",header:e.header}}),a("the-navigation",{attrs:{app:"",nav:e.nav}}),a("v-content",[a("v-snackbar",{staticClass:"mt-12",attrs:{app:"",color:e.$store.state.message.type,top:"","multi-line":""},model:{value:e.$store.state.message.active,callback:function(t){e.$set(e.$store.state.message,"active",t)},expression:"$store.state.message.active"}},[e._v(" "+e._s(e.$store.state.message.text)+" "),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$store.commit("closeMessage")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("router-view",{key:e.$route.path})],1),a("the-footer",{attrs:{footer:e.footer}})],1)},o=[],s=(a("b0c0"),a("b64b"),a("d3b7"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{color:"white",app:"","clipped-left":"","clipped-right":""}},[a("router-link",{attrs:{to:"/"}},[a("v-img",{attrs:{src:"/images/"+e.header.logo,contain:"","max-height":"36","max-width":"106"}})],1),a("v-toolbar-title",{staticClass:"headline ml-2",attrs:{bottom:"true"}},[e.header.title?a("span",{staticClass:"primary--text"},[e._v(e._s(e.header.title))]):e._e(),e.header.site?a("span",{staticClass:"secondary--text"},[e._v(" | "+e._s(e.header.site))]):e._e()]),a("v-spacer"),a("div",[e._v("Welcome "),e.header.user.loggedin?a("span",[e._v(", "+e._s(e.header.user.name))]):e._e()]),a("v-spacer"),e.header.title?e._e():a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),a("v-btn",{attrs:{icon:"",to:"/",title:"Home"}},[a("v-icon",[e._v("mdi-home")])],1),a("v-btn",{attrs:{icon:"",title:"Help"}},[a("v-icon",[e._v("mdi-help")])],1),e.header.user.loggedin?e._e():a("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-2",attrs:{color:"success",small:"",fab:"",dark:"",title:"Login"}},r),[a("v-icon",[e._v("mdi-login")])],1)]}}],null,!1,2916909854)},[a("v-list",e._l(e.header.auths,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-title",[a("auth-button",{attrs:{data:t},on:{loggedin:function(t){e.header.user.loggedin=!0,e.header.user.name=t}}})],1)],1)})),1)],1),e.header.user.loggedin?[a("v-btn",{attrs:{color:"warning",small:"",fab:"",dark:"",title:"Logout",loading:e.loading,disabled:e.loading},on:{click:e.logout}},[a("v-icon",[e._v("mdi-logout")])],1)]:e._e()],2)}),i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-xs-center"},["get"==e.data.method?a("a",{attrs:{href:e.data.link}},[e.data.btn.image?a("img",{attrs:{src:"/images/"+e.data.btn.image,alt:e.data.btn.text,width:"191",height:"46"}}):e._e()]):e._e(),"post"==e.data.method?a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("a",e._g({},r),[e.data.btn.image?a("img",{attrs:{src:"/images/"+e.data.btn.image,alt:e.data.btn.text,width:"191",height:"46"}}):e._e()])]}}],null,!1,2878004031),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",[a("v-card",[a("v-card-title",{staticClass:"headline info",attrs:{dark:"","primary-title":""}},[e._v("Login")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Email Address",required:"","prepend-icon":"mdi-email"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password",required:"","append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",type:e.show_pass?"text":"password","prepend-icon":"mdi-form-textbox-password"},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-divider"),a("v-card-actions",[a("v-snackbar",{attrs:{absolute:e.absolute,color:"secondary"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" "),a("v-btn",{attrs:{color:"warning",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1),a("v-spacer"),a("v-btn",{attrs:{color:"success",loading:e.loggingin,disabled:e.loggingin},on:{click:e.submit}},[e._v("Login")])],1)],1)],1)],1):e._e()],1)},l=[],u=(a("3ca3"),a("9911"),a("ddb0"),a("2b3d"),{name:"auth-button",props:["data"],data:function(){return{dialog:!1,username:"",password:"",show_pass:!1,loggingin:!1,message:"",snackbar:!1,absolute:!0}},methods:{submit:function(){var e=this;this.loggingin=!0;var t=new URLSearchParams;t.append("username",this.username),t.append("password",this.password),fetch(this.data.link,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((function(t){t.json().then((function(a){e.loggingin=!1,200==t.status?(e.dialog=!1,e.snackbar=!0,e.message="Login successful",e.$emit("loggedin",a.name)):(e.message="Login failed",e.snackbar=!0)}))})).catch((function(t){e.loggingin=!1,e.snackbar=!0,e.message=t.message}))}}}),d=u,p=a("2877"),h=a("6544"),f=a.n(h),m=a("8336"),v=a("b0af"),g=a("99d9"),b=a("169a"),_=a("ce7e"),y=a("4bd4"),w=a("2db4"),k=a("2fa4"),x=a("8654"),D=Object(p["a"])(d,c,l,!1,null,null,null),S=D.exports;f()(D,{VBtn:m["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VDialog:b["a"],VDivider:_["a"],VForm:y["a"],VSnackbar:w["a"],VSpacer:k["a"],VTextField:x["a"]});var V={name:"the-header",props:["header"],data:function(){return{loading:!1}},components:{AuthButton:S},methods:{logout:function(){var e=this;this.loading=!0,fetch("/auth/logout").then((function(t){e.loading=!1,200==t.status&&(e.header.user.loggedin=!1,e.header.user.name=""),e.$router.push({path:"/"})}))}}},C=V,O=a("40dc"),T=a("132d"),P=a("adda"),j=a("8860"),$=a("da13"),E=a("5d23"),G=a("e449"),L=a("490a"),U=a("2a7f"),R=Object(p["a"])(C,s,i,!1,null,null,null),I=R.exports;f()(R,{VAppBar:O["a"],VBtn:m["a"],VIcon:T["a"],VImg:P["a"],VList:j["a"],VListItem:$["a"],VListItemTitle:E["c"],VMenu:G["a"],VProgressCircular:L["a"],VSpacer:k["a"],VToolbarTitle:U["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{staticClass:"primary darken-1 white--text font-weight-bold",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:""}},[a("v-list",{attrs:{nav:"",dark:"",dense:""}},[e._l(e.menu,(function(t){return[t.menu?[a("v-list-group",{key:t.id,class:t.active?"primary darken-2":"",attrs:{"prepend-icon":t.icon,color:"white--text",value:t.active,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(t.text))])]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"item.active"}},e._l(t.menu,(function(t){return a("v-list-item",{key:t.id,staticClass:"text-right",attrs:{to:t.url,"active-class":"primary darken-2",dense:""}},[a("v-list-item-title",[e._v(e._s(t.text))]),a("v-icon",[e._v("mdi-chevron-right")])],1)})),1)]:[a("v-list-item",{key:t.id,attrs:{to:t.url}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(t.text))])],1)]]}))],2)],1)},A=[],F={name:"the-navigation",props:["nav"],mounted:function(){this.updateMenu()},watch:{nav:{handler:function(){this.updateMenu()},deep:!0}},data:function(){return{menu:[]}},methods:{updateMenu:function(){this.menu=[];for(var e=0,t=Object.keys(this.nav.menu);e<t.length;e++){var a=t[e],r={id:a,text:this.nav.menu[a].text,icon:this.nav.menu[a].icon,order:this.nav.menu[a].order};if(this.nav.active===a?r.active=!0:r.active=!1,this.nav.menu[a].menu){r.menu=[];for(var n=0,o=Object.keys(this.nav.menu[a].menu);n<o.length;n++){var s=o[n],i={id:s,text:this.nav.menu[a].menu[s].text,url:this.nav.menu[a].menu[s].url,order:this.nav.menu[a].menu[s].order};r.menu.push(i),r.menu.sort((function(e,t){e.order!==t.order&&(e.order,t.order)}))}}else this.nav.menu[a].url&&(r.url=this.nav.menu[a].url);this.menu.push(r)}this.menu.sort((function(e,t){e.order!==t.order&&(e.order,t.order)}))}}},H=F,q=a("56b0"),B=a("34c3"),N=a("f774"),W=Object(p["a"])(H,M,A,!1,null,null,null),J=W.exports;f()(W,{VIcon:T["a"],VList:j["a"],VListGroup:q["a"],VListItem:$["a"],VListItemIcon:B["a"],VListItemTitle:E["c"],VNavigationDrawer:N["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{color:"white",app:""}},[a("v-row",{attrs:{justify:"end"}},e._l(e.footer.links,(function(t){return a("v-btn",{key:t.id,staticClass:"text-none",attrs:{text:"",to:t.to,href:t.href,target:t.href?"_blank":""}},[e._v(" "+e._s(t.text)+" ")])})),1)],1)},K=[],Q={name:"the-footer",props:["footer"],data:function(){return{}}},X=Q,Y=a("553a"),Z=a("0fd9"),ee=Object(p["a"])(X,z,K,!1,null,null,null),te=ee.exports;f()(ee,{VBtn:m["a"],VFooter:Y["a"],VRow:Z["a"]});var ae={name:"App",data:function(){return{header:{title:!1,site:null,logo:"iHRIS5Logo.png",auths:[],user:{loggedin:!1,name:""}},footer:{links:[]},nav:{active:null,menu:{mhero:{text:"mHero",icon:"mdi-cellphone-basic",menu:[{id:"sendSMS",url:"/page/mhero",text:"Send Message"},{id:"subContGrps",url:"/page/contact-groups",text:"Contact Groups"},{id:"dashboard",url:"",text:"mHero Dashboard"}]}}}}},components:{TheHeader:I,TheNavigation:J,TheFooter:te},created:function(){var e=this;fetch("/auth").then((function(){fetch("/config/site").then((function(t){t.json().then((function(t){if(t.hasOwnProperty("title")&&(e.header.title=t.title),t.hasOwnProperty("site")&&(e.header.site=t.site),t.hasOwnProperty("logo")&&(e.header.logo=t.logo),t.hasOwnProperty("auth"))for(var a=0,r=Object.keys(t.auth);a<r.length;a++){var n=r[a];t.auth[n].id=n,e.header.auths.push(t.auth[n])}if(t.hasOwnProperty("footer")&&t.footer.hasOwnProperty("links"))for(var o=0,s=Object.keys(t.footer.links);o<s.length;o++){var i=s[o];t.footer.links[i].id=i,e.footer.links.push(t.footer.links[i])}t.hasOwnProperty("user")&&(t.user.hasOwnProperty("loggedin")&&(e.header.user.loggedin=t.user.loggedin),t.user.hasOwnProperty("name")&&(e.header.user.name=t.user.name)),t.hasOwnProperty("nav")&&(t.nav.hasOwnProperty("active")&&(e.nav.active=t.nav.active),t.nav.hasOwnProperty("menu")&&(e.nav.menu=t.nav.menu))}))}))}))}},re=ae,ne=(a("034f"),a("7496")),oe=a("a75b"),se=Object(p["a"])(re,n,o,!1,null,null,null),ie=se.exports;f()(se,{VApp:ne["a"],VBtn:m["a"],VContent:oe["a"],VIcon:T["a"],VSnackbar:w["a"]});var ce=a("8c4f"),le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("v-container",[a("h1",[e._v("iHRIS Demo")]),a("p",[e._v("Welcome to the iHRIS Demo")])])],1)},ue=[],de={name:"Home"},pe=de,he=a("a523"),fe=Object(p["a"])(pe,le,ue,!1,null,null,null),me=fe.exports;f()(fe,{VContainer:he["a"]});var ve,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"test"},[a("fhir-form",[e._v(" Loading... ")])],1)},be=[],_e={"fhir-extension":function(){return a.e("fhir-main").then(a.bind(null,"6b10"))},"fhir-reference":function(){return a.e("fhir-main").then(a.bind(null,"99fa"))},"fhir-string":function(){return a.e("fhir-main").then(a.bind(null,"b78c"))}},ye={name:"Test",data:function(){return{}},components:{FhirForm:function(){return new Promise((function(e){var t='<div class="fhir"><fhir-extension name="ext from data '+ve+'"><fhir-reference name="ref from data"><fhir-string name="str from data" /></fhir-reference></fhir-extension></div>';e({components:_e,template:t})}))}},created:function(){ve=this.$route.params.id}},we=ye,ke=Object(p["a"])(we,ge,be,!1,null,null,null),xe=ke.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-stepper",{model:{value:e.stepper,callback:function(t){e.stepper=t},expression:"stepper"}},[a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("selectRecipients",{on:{mheroRecipientsSelected:e.importData}})],1),a("v-stepper-content",{attrs:{step:"2"}},[a("reviewRecipients",{attrs:{headers:e.headers,practitioners:e.selectedPractitioners},on:{editWorkflow:e.changeWorkflow}})],1)],1)],1)},Se=[],Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",[r("v-img",{attrs:{src:a("1281"),width:"100"}}),r("ihrisReport",{attrs:{report:"mhero"}}),r("v-card-actions",{staticClass:"secondary"},[r("v-spacer"),r("v-btn",{staticStyle:{},attrs:{disabled:!e.canReview,normal:"",rounded:""},on:{click:e.nextStep}},[e._v("Review Selection")])],1)],1)],1)},Ce=[],Oe=a("b85c"),Te=a("2fc5"),Pe={data:function(){return{practitioners:[],reportData:{}}},computed:{canReview:function(){return this.practitioners.length>0}},methods:{nextStep:function(){var e,t=[],a=Object(Oe["a"])(this.reportData.fieldsDetails);try{for(a.s();!(e=a.n()).done;){var r,n=e.value,o=Object(Oe["a"])(n.fields);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.push({text:s[0],value:s[1]})}}catch(i){o.e(i)}finally{o.f()}}}catch(i){a.e(i)}finally{a.f()}this.$emit("mheroRecipientsSelected",this.practitioners,t)}},components:{ihrisReport:Te["default"]},created:function(){var e=this;bt.$on("ihris-report-selections",(function(t,a){e.practitioners=t,e.reportData=a}))}},je=Pe,$e=Object(p["a"])(je,Ve,Ce,!1,null,null,null),Ee=$e.exports;f()($e,{VBtn:m["a"],VCard:v["a"],VCardActions:g["a"],VContainer:he["a"],VImg:P["a"],VSpacer:k["a"]});var Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{persistent:"","max-width":"300"},model:{value:e.statusDialog.enable,callback:function(t){e.$set(e.statusDialog,"enable",t)},expression:"statusDialog.enable"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.statusDialog.color,dark:""}},[r("v-toolbar-title",[r("v-icon",{domProps:{textContent:e._s(e.statusDialog.icon)}}),e._v(" "+e._s(e.statusDialog.title)+" ")],1),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.statusDialog.enable=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[r("b",[e._v(e._s(e.statusDialog.description))])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"white--font",attrs:{dark:"",color:"primary"},on:{click:function(t){e.statusDialog.enable=!1}}},[e._v("Ok")])],1)],1)],1),r("v-img",{attrs:{src:a("1281"),width:"100"}}),r("v-card",[r("v-card-text",[e._v(" How do you want to send Message "),r("v-radio-group",{model:{value:e.communicationType,callback:function(t){e.communicationType=t},expression:"communicationType"}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs2:""}},[r("v-radio",{attrs:{label:"Workflow",value:"flow"}})],1),r("v-flex",{attrs:{xs2:""}},[r("v-radio",{attrs:{label:"Ad-hoc Message",value:"sms"}})],1)],1)],1),"flow"==e.communicationType?r("v-autocomplete",{attrs:{"background-color":"grey lighten-2",label:"Select flow from RapidPro",items:e.workflows,"return-object":""},model:{value:e.workflow,callback:function(t){e.workflow=t},expression:"workflow"}}):e._e(),"sms"==e.communicationType?r("v-textarea",{attrs:{"background-color":"grey lighten-2",color:"blue",label:"Text Message"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}}):e._e()],1)],1),r("br"),r("v-card",[r("v-card-title",[e._v(" Recipients ")]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.practitioners,"item-key":"id"}}),r("v-card-actions",{staticClass:"secondary"},[r("v-btn",{attrs:{normal:"",rounded:""},on:{click:e.changeDetails}},[e._v("Edit Recipients")]),r("v-spacer"),r("v-btn",{attrs:{disabled:!e.canSend,normal:"",rounded:""},on:{click:e.send}},[e._v("Send "),r("v-icon",[e._v("mdi-message")])],1)],1)],1)],1)},Le=[],Ue=(a("a4d3"),a("e01a"),a("4160"),a("159b"),{props:["headers","practitioners"],data:function(){return{workflows:[],workflow:{},communicationType:"",sms:"",statusDialog:{width:"500px",enable:!1,color:"error",icon:"mdi-alert-circle-outline",title:"",description:""}}},methods:{changeDetails:function(){this.$emit("editWorkflow")},send:function(){var e=this,t=[];this.practitioners.forEach((function(e){t.push(e.id)}));var a={practitioners:t,workflow:this.workflow.id};"sms"===this.communicationType?(a.sms=this.sms,a.workflow=null):"flow"===this.communicationType&&(a.workflow=this.workflow.id,a.sms=null),a=JSON.stringify(a);var r="/mhero/send-message",n={method:"POST",headers:{"Content-Type":"application/json"},body:a,redirect:"manual"};fetch(r,n).then((function(){e.statusDialog.enable=!0,e.statusDialog.color="success",e.statusDialog.title="Success","sms"===e.communicationType?e.statusDialog.description="Message Sent Successfully":e.statusDialog.description="Workflow Started Successfully"})).catch((function(t){e.statusDialog.enable=!0,e.statusDialog.color="error",e.statusDialog.title="Error","sms"===e.communicationType?e.statusDialog.description="Failed to send Message":e.statusDialog.description="Failed to start a workflow",console.log(t)}))}},computed:{canSend:function(){return!!this.communicationType&&(!("sms"==this.communicationType&&!this.sms)&&!("flow"===this.communicationType&&!this.workflow.id))}},created:function(){var e=this;fetch("/mhero/workflows").then((function(t){t.json().then((function(t){e.workflows=t}))}))}}),Re=Ue,Ie=a("c6a6"),Me=a("8fea"),Ae=a("0e8f"),Fe=a("a722"),He=a("67b6"),qe=a("43a6"),Be=a("a844"),Ne=a("71d9"),We=Object(p["a"])(Re,Ge,Le,!1,null,null,null),Je=We.exports;f()(We,{VAutocomplete:Ie["a"],VBtn:m["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:he["a"],VDataTable:Me["a"],VDialog:b["a"],VFlex:Ae["a"],VIcon:T["a"],VImg:P["a"],VLayout:Fe["a"],VRadio:He["a"],VRadioGroup:qe["a"],VSpacer:k["a"],VTextarea:Be["a"],VToolbar:Ne["a"],VToolbarTitle:U["a"]});var ze={components:{selectRecipients:Ee,reviewRecipients:Je},data:function(){return{headers:[],selectedPractitioners:[],stepper:1}},methods:{changeWorkflow:function(){this.stepper=1},importData:function(e,t){this.selectedPractitioners=e,this.headers=t,this.stepper=2}}},Ke=ze,Qe=a("7e85"),Xe=a("e516"),Ye=a("9c54"),Ze=Object(p["a"])(Ke,De,Se,!1,null,null,null),et=Ze.exports;f()(Ze,{VStepper:Qe["a"],VStepperContent:Xe["a"],VStepperItems:Ye["a"]});var tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{persistent:"","max-width":"330"},model:{value:e.statusDialog.enable,callback:function(t){e.$set(e.statusDialog,"enable",t)},expression:"statusDialog.enable"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.statusDialog.color,dark:""}},[r("v-toolbar-title",[r("v-icon",{domProps:{textContent:e._s(e.statusDialog.icon)}}),e._v(" "+e._s(e.statusDialog.title)+" ")],1),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.statusDialog.enable=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[r("b",[e._v(e._s(e.statusDialog.description))])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"white--font",attrs:{dark:"",color:"primary"},on:{click:function(t){e.statusDialog.enable=!1}}},[e._v("Ok")])],1)],1)],1),e.unSubscribeDialog?r("v-dialog",{attrs:{persistent:"",width:"850px"},model:{value:e.unSubscribeDialog,callback:function(t){e.unSubscribeDialog=t},expression:"unSubscribeDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary darken-1 white--text",height:"30",dark:""}},[e._v(" UnSubscribe From Groups "),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.unSubscribeDialog=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[e._v(" Select Groups To Unsubscribe "),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.groupHeaders,items:e.unsubscribingGroups,options:e.tblOptions,"server-items-length":e.totalUnsubGroups,"footer-props":{"items-per-page-options":[5,10,20,50]},loading:e.loadingUnsubGrps,"show-select":""},on:{"update:options":function(t){e.tblOptions=t}},model:{value:e.selectedUnsubGrps,callback:function(t){e.selectedUnsubGrps=t},expression:"selectedUnsubGrps"}})],1),r("v-card-actions",[r("v-spacer"),r("v-flex",{attrs:{xs2:""}},[r("v-btn",{staticClass:"white--text",attrs:{disabled:!e.unsubGroupSelected,color:"green",small:""},on:{click:e.saveUnSubscribe}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v("Unsubscribe ")],1)],1)],1)],1),r("v-card",[r("v-card-title",[e._v(" Subscribed Members ")]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.subscribingPractitioners,"item-key":"id"}})],1)],1):e._e(),e.subscribeDialog?r("v-dialog",{attrs:{persistent:"",width:"850px"},model:{value:e.subscribeDialog,callback:function(t){e.subscribeDialog=t},expression:"subscribeDialog"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary darken-1 white--text",height:"30",dark:""}},[e._v(" Subscribe To Groups "),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.subscribeDialog=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[r("ihrisReport",{attrs:{report:"groups"}})],1),r("v-card-actions",[r("v-spacer"),r("v-flex",{attrs:{xs2:""}},[r("v-btn",{staticClass:"white--text",attrs:{disabled:!e.groupSelected,color:"green"},on:{click:e.saveSubscription}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v("Save ")],1)],1)],1)],1),r("v-card",[r("v-card-title",[e._v(" Subscribing Members ")]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.subscribingPractitioners,"item-key":"id"}})],1)],1):e._e(),r("v-card",[r("v-img",{attrs:{src:a("1281"),width:"100"}}),r("ihrisReport",{attrs:{report:"contact-groups"}}),r("v-card-actions",{staticClass:"secondary"},[r("v-btn",{staticStyle:{},attrs:{color:"error",disabled:!e.practitionerSelected,normal:"",rounded:""},on:{click:e.unsubscribe}},[e._v(" UnSubscribe ")]),r("v-spacer"),r("v-btn",{staticStyle:{},attrs:{color:"primary",disabled:!e.practitionerSelected,normal:"",rounded:""},on:{click:e.subscribe}},[e._v(" Subscribe ")])],1)],1)],1)},at=[],rt=(a("7db0"),a("c975"),{data:function(){return{subscribingPractitioners:[],subscribingGroups:[],unsubscribingGroups:[],selectedUnsubGrps:[],totalUnsubGroups:0,reportData:{},subscribeDialog:!1,unSubscribeDialog:!1,loadingUnsubGrps:!1,groupHeaders:[{text:"Name",value:"name"}],tblOptions:{itemsPerPage:1},prevPage:-1,link:[],statusDialog:{width:"500px",enable:!1,color:"error",icon:"mdi-alert-circle-outline",title:"",description:""}}},computed:{practitionerSelected:function(){return this.subscribingPractitioners.length>0},groupSelected:function(){return this.subscribingGroups.length>0},unsubGroupSelected:function(){return this.selectedUnsubGrps.length>0},headers:function(){var e,t=[],a=Object(Oe["a"])(this.reportData.fieldsDetails);try{for(a.s();!(e=a.n()).done;){var r,n=e.value,o=Object(Oe["a"])(n.fields);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.push({text:s[0],value:s[1]})}}catch(i){o.e(i)}finally{o.f()}}}catch(i){a.e(i)}finally{a.f()}return t}},watch:{tblOptions:{handler:function(){this.getMembersGroups()},deep:!0}},methods:{getFullEntityIDs:function(e){var t=this,a=[];return e.forEach((function(e){for(var r,n=["Practitioner","Patient","Person"],o=0,s=n;o<s.length;o++){var i=s[o];if(e[i+".id"]){r=e[i+".id"];break}}r||(r=t.reportData.primaryResource+"/"+e.id),a.push(r)})),a},subscribe:function(){this.subscribeDialog=!0,this.subscribingGroups=[]},unsubscribe:function(){this.selectedUnsubGrps=[],this.unsubscribingGroups=[],this.loadingUnsubGrps=!0;var e,t="/fhir/Group?_elements=name,id&member=",a="",r=this.getFullEntityIDs(this.subscribingPractitioners),n=Object(Oe["a"])(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;a+=a?","+o:o}}catch(s){n.e(s)}finally{n.f()}t+=a+"&_count=1&_total=accurate",this.getMembersGroups(t,!0)},getMembersGroups:function(e,t){var a=this;t&&(this.tblOptions.page=1),this.tblOptions.page>1&&(this.tblOptions.page===this.prevPage-1?e=this.link.find((function(e){return"previous"===e.relation})).url:this.tblOptions.page===this.prevPage+1&&(e=this.link.find((function(e){return"next"===e.relation})).url),e=e.substring(e.indexOf("/fhir/"))),this.prevPage=this.tblOptions.page,fetch(e).then((function(e){e.json().then((function(e){if(e.total>0){a.link=e.link,a.totalUnsubGroups=e.total;var t,r=Object(Oe["a"])(e.entry);try{for(r.s();!(t=r.n()).done;){var n=t.value;a.unsubscribingGroups.push({name:n.resource.name,id:n.resource.id})}}catch(o){r.e(o)}finally{r.f()}}a.loadingUnsubGrps=!1,a.unSubscribeDialog=!0}))})).catch((function(e){a.loadingUnsubGrps=!1,a.statusDialog.enable=!0,a.statusDialog.color="error",a.statusDialog.title="Error",a.statusDialog.description="An error has occured",console.log(e)}))},saveUnSubscribe:function(){var e=this,t=this.getFullEntityIDs(this.subscribingPractitioners),a=[];this.selectedUnsubGrps.forEach((function(e){a.push(e.id)}));var r={members:t,groups:a};r=JSON.stringify(r);var n="/mhero/unsubscribe-contact-groups",o={method:"POST",headers:{"Content-Type":"application/json"},body:r,redirect:"manual"};fetch(n,o).then((function(){e.unSubscribeDialog=!1,e.statusDialog.enable=!0,e.statusDialog.color="success",e.statusDialog.title="Success",e.statusDialog.description="Contacts UnSubscribed successfully",bt.$emit("reload-report")})).catch((function(t){e.unSubscribeDialog=!1,e.statusDialog.enable=!0,e.statusDialog.color="error",e.statusDialog.title="Error",e.statusDialog.description="Failed to UnSubscribe contacts",console.log(t)}))},saveSubscription:function(){var e=this,t=this.getFullEntityIDs(this.subscribingPractitioners),a=[];this.subscribingGroups.forEach((function(e){a.push(e.id)}));var r={members:t,groups:a};r=JSON.stringify(r);var n="/mhero/subscribe-contact-groups",o={method:"POST",headers:{"Content-Type":"application/json"},body:r,redirect:"manual"};fetch(n,o).then((function(){e.subscribeDialog=!1,e.statusDialog.enable=!0,e.statusDialog.color="success",e.statusDialog.title="Success",e.statusDialog.description="Contacts subscribed successfully",bt.$emit("reload-report")})).catch((function(t){e.subscribeDialog=!1,e.statusDialog.enable=!0,e.statusDialog.color="error",e.statusDialog.title="Error",e.statusDialog.description="Failed to subscribe contacts",console.log(t)}))}},components:{ihrisReport:Te["default"]},created:function(){var e=this;bt.$on("ihris-report-selections",(function(t,a){"Group"===a.primaryResource?e.subscribingGroups=t:(e.subscribingPractitioners=t,e.reportData=a)}))}}),nt=rt,ot=Object(p["a"])(nt,tt,at,!1,null,null,null),st=ot.exports;f()(ot,{VBtn:m["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:he["a"],VDataTable:Me["a"],VDialog:b["a"],VFlex:Ae["a"],VIcon:T["a"],VImg:P["a"],VSpacer:k["a"],VToolbar:Ne["a"],VToolbarTitle:U["a"]}),r["a"].use(ce["a"]);var it=[{path:"/",name:"home",component:me},{path:"/page/mhero",name:"mhero",component:et},{path:"/page/contact-groups",name:"contact-groups",component:st},{path:"/test/:id",name:"test",component:xe},{path:"/static/:id",name:"static",component:function(){return a.e("static").then(a.bind(null,"064a"))}},{path:"/resource/view/:page/:id",name:"resource_view",component:function(){return a.e("fhir").then(a.bind(null,"1a0a"))}},{path:"/resource/search/:page",name:"resource_search",component:function(){return a.e("fhir").then(a.bind(null,"9d3d"))}},{path:"/resource/report/:report",name:"resource_report",component:function(){return a.e("fhir").then(a.bind(null,"2fc5"))}},{path:"/resource/add/:page",name:"resource_add",component:function(){return a.e("fhir").then(a.bind(null,"cd8b"))}},{path:"/questionnaire/:questionnaire/:page",name:"questionnaire",component:function(){return a.e("fhir").then(a.bind(null,"9d48"))}}],ct=new ce["a"]({mode:"history",base:"/",routes:it}),lt=ct,ut=a("2f62");r["a"].use(ut["a"]);var dt=new ut["a"].Store({state:{message:{type:"info",text:null,timeout:5e3,active:!1}},mutations:{closeMessage:function(e){e.message.active=!1},setMessage:function(e,t){"string"===typeof t?(e.message.type="info",e.message.timeout=5e3,e.message.text=t,e.message.active=!0):(e.message.type=t.type||"info",e.message.timeout=t.timeout||5e3,e.message.text=t.text,e.message.active=!0)}},actions:{},modules:{}}),pt=a("f309");r["a"].use(pt["a"]);var ht=new pt["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:{base:"#569fd3",darken1:"0d3552",darken2:"011b2d",lighten1:"ddecf6",lighten2:"f4f7f9"},secondary:{base:"#5f6062",darken1:"04070e",lighten1:"e5e5e5"},accent:"#78496a",error:"#b32317",info:"#005595",success:"#8a8d35",warning:"#d06f1a"}}}}),ft=(a("6d93"),a("0551")),mt=a.n(ft),vt=(a("caad"),a("2532"),{_code_cache:{},_code_loading:{},_setCache:function(e,t){return vt._code_cache[e]=t,vt._code_loading[e]=!1,t},resourceLookup:function(e){return new Promise((function(t){var a=e;vt._code_loading[a]?setTimeout((function(){t(vt.resource(e))}),200):vt._code_cache[a]?t(vt._code_cache[a]):(vt._code_loading[a]=!0,fetch("/fhir/$short-name?reference="+e).then((function(r){200===r.status?r.json().then((function(r){r.display?t(vt._setCache(a,r.display)):(console.log("No display data from reference found ",a,r),t(vt._setCache(a,e)))})).catch((function(r){console.log(r),t(vt._setCache(a,e))})):(console.log("Invalid status from reference $short-name for ",a),t(vt._setCache(a,e)))})).catch((function(r){console.log(r),t(vt._setCache(a,e))})))}))},codeLookup:function(e,t,a){return new Promise((function(r){var n=e+"#"+t;vt._code_loading[n]?setTimeout((function(){r(vt.codeLookup(e,t,a))}),200):vt._code_cache[n]?r(vt._code_cache[n]):(vt._code_loading[n]=!0,fetch("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+a).then((function(e){200===e.status?e.json().then((function(e){e.display?r(vt._setCache(n,e.display)):(console.log("No display data from codesystem found ",n,e),r(vt._setCache(n,t)))})).catch((function(e){console.log(e),r(vt._setCache(n,t))})):(console.log("Invalid status from codesystem $short-name for ",n),r(vt._setCache(n,t)))})).catch((function(e){console.log(e),r(vt._setCache(n,t))})))}))},pathFieldExpression:function(e){var t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t}}),gt=vt;r["a"].config.productionTip=!1,Object.defineProperty(r["a"].prototype,"$fhirpath",{value:mt.a}),Object.defineProperty(r["a"].prototype,"$fhirutils",{value:gt});var bt=new r["a"];new r["a"]({router:lt,store:dt,vuetify:ht,render:function(e){return e(ie)}}).$mount("#app")},"8a23":function(e,t,a){}});
//# sourceMappingURL=app.df4d4df8.js.map